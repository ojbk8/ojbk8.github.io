[{"title":"Folderclone谷歌google共享云端硬盘转存相互转移拷贝复制文件的正确姿势","url":"%2Fgoogle_drive_folderclone.html","content":"\n## 关于Folderclone\n\nFolderclone，增加了服务帐户的TD成员和上载数据TB的，在使用某种算法每个服务帐户（750GB /天）的载配额。\n基本上我们可以通过一个项目在TD中添加100个服务帐户。因此，每天可以复制的最大数据是每个项目最大750GB * 100 = 75TB（每天）。\n\n首先计算您每天要复制的数据大小，取决于创建的项目数量。每个项目最多可以创建100个服务帐户。所以每个项目的复制容量是75tb。复制需要至少2个项目。\n\n本教程中TD = Team drive和GD = Gdrive文件夹\n\n详情请查看\n\nhttps://github.com/Spazzlo/folderclone\n\nhttps://github.com/SameerkumarP/Multifolderclone\n\nhttps://blackpearl.biz/threads/7408/\n\nhttps://blackpearl.biz/threads/7892/\n\n\n\n## 新建项目\n\n\n在Google云端控制台上设置2个项目转到[此处](https://console.developers.google.com) \n在【Google Cloud Platform】 【服务条款】中勾选【同意并继续】\n\n![](/images/folderclone/GoogleCloudPlatform.png)\n\n我们必须创建2个新项目，项目名称随便，例如我的项目名称是“foldercloneA”和“foldercloneB”。 \n\n### 新建项目foldercloneA\n\n在[Google云端控制台](https://console.developers.google.com) 【选择项目】【新建项目】\n\n![](/images/folderclone/folderclone1.png)\n\n![](/images/folderclone/foldercloneA1.png)\n\n\n在【API和服务】【库】里面搜索【Google Drive API】和【Identity and Access Management (IAM) API】并启用它们。\n\n\n![](/images/folderclone/apis.png)\n\n![](/images/folderclone/GoogleDriveAPI.png)\n\n![](/images/folderclone/Identity_and_Access_Management_IAM_API.png)\n\n\n【导航菜单】【IAM和管理】【IAM】\n\n![](/images/folderclone/apis1.png)\n\n【服务账号】【创建服务账号】\n\n![](/images/folderclone/apis2.png)\n\n【服务帐号详情】【服务帐号名称】随便填  比如我填写的是\n\n![](/images/folderclone/iam_admin_serviceaccounts.png)\n\n【服务帐号权限（可选）】【请选择一个角色】【Project】【所有者】\n\n![](/images/folderclone/iam_admin_serviceaccounts1.png)\n\n【+添加其它角色】\n\n![](/images/folderclone/iam_admin_serviceaccounts2.png)\n\n【请选择一个角色】【Service Accounts】【Service Account Admin 】\n\n![](/images/folderclone/iam_admin_serviceaccounts3.png)\n\n2个角色【Project-所有者】和【Service Account Admin 】【继续】\n\n![](/images/folderclone/iam_admin_serviceaccounts4.png)\n\n【创建密钥】【密钥类型】选择默认的【JSON】【创建】\n\n![](/images/folderclone/iam_admin_serviceaccounts5.png)\n\n私钥已保存到您的计算机\nfolderclonea-253301-XXXXXXf.json 可用来访问您的云端资源，请妥善保存。\n\n![](/images/folderclone/iam_admin_serviceaccounts6.png)\n\n打开刚才创建下载的文件folderclonea-253301-XXXXXXf.json找到client_email把里面生成的邮箱记下来\n\n![](/images/folderclone/folderclone_client_email.png)\n\n比如我的是【folderclone@folderclonea-253301.iam.gserviceaccount.com】\n\n\n### 新建项目foldercloneB\n\n在[Google云端控制台](https://console.developers.google.com)【创建项目】【foldercloneB】【选择项目】并切换到项目foldercloneB\n\n\n\n添加API【Google Drive API】和【Identity and Access Management (IAM) API】并启用它们。方法跟新建项目foldercloneA一样\n\n【导航菜单】【IAM和管理】【IAM】【添加】项目foldercloneA文件folderclonea-253301-XXXXXXf.json里的邮箱地址\n\n![](/images/folderclone/foldercloneB_add_iam_admin.png)\n\n![](/images/folderclone/foldercloneB_add_iam_admin1.png)\n\n![](/images/folderclone/foldercloneB_add_iam_admin2.png)\n\n并记录保存好foldercloneB_ID\n\n![](/images/folderclone/foldercloneB_ID.png)\n\n比如我这里的是foldercloneb-253302\n\n## 安装Python并配置依赖环境\n\n使用64-bit的Windows  \n\n### 下载Python并安装\n\n1. [下载Python 3.7.4 64-bit](https://www.python.org/ftp/python/3.7.4/python-3.7.4-amd64.exe) 并按如下图所示安装\n\n![](/images/folderclone/install_python1.png)\n\n![](/images/folderclone/install_python2.png)\n\n![](/images/folderclone/install_python3.png)\n\n### 安装依赖环境\n\n在C:\\Program Files\\Python37目录中按【Shift+鼠标右键】\n\n![](/images/folderclone/Python99.png)\n\n打开CMD安装以下依赖环境\n\n``` bash\npython -m pip install --upgrade pip\npip install oauth2client\npip install google-api-python-client\npip install progress\npip install progressbar2\npip install  httplib2shim\n```\n\n\n## 设置folderclone\n\n项目地址https://github.com/Spazzlo/folderclone  \n\n### 设置folderclone文件\n\n1. [本站下载Multifolderclone-master.zip](/uploads/Multifolderclone-master.zip) 或者克隆[下载folderclone](https://github.com/Spazzlo/folderclone/archive/master.zip)到本地 解压  移动文件夹到您想要的地方\n\n2. 在该目录下新建文件夹名为CONTROLLER\n\n![](/images/folderclone/CONTROLLER.png)\n\n3. 把项目foldercloneA文件folderclonea-253301-XXXXXXf.json复制到文件夹CONTROLLER目录下\n\n![](/images/folderclone/CONTROLLER1.png)\n\n\n\n### 生成并创建folderclone用户及配置文件\n\n进入folderclone文件夹目录\n\n![](/images/folderclone/folderclone_add_user.png)\n\n运行以下命令\n\n``` bash\npython serviceaccountfactory.py\n```\n\n然后手动输入foldercloneB_ID空格加数字100回车，回车\n\n输入生成的自定义邮箱前缀，比如我用的是users\n\n比如我这里的是foldercloneb-253302 100\n\n![](/images/folderclone/folderclone_users_config.png)\n\n等待完成后会生成文件夹accounts里面会看到1到199的用户配置文件\n\n![](/images/folderclone/accounts.png)\n\n![](/images/folderclone/accounts1.png)\n\n这时我们可以压缩保存整个文件夹了。\n\n\n## 共享云端硬盘添加成员\n\n1. 查看【共享云端硬盘】的ID\n\n![](/images/folderclone/team_ID.png)\n\n进入【共享云端硬盘】添加新成员项目folderclone-253301-XXXXXXf.json找到client_email里面的邮箱为管理员\n\n![](/images/folderclone/team_add_admin.png)\n\n进入folderclone文件夹目录\n\n![](/images/folderclone/folderclone_add_user.png)\n\n执行python masshare.py -d YYYYYY  其中YYYYYY替换成【共享云端硬盘】的ID\n\n``` bash\npython masshare.py -d YYYYYY\n```\n\n![](/images/folderclone/folderclone_add_user1.png)\n\n![](/images/folderclone/folderclone_add_user2.png)\n\n\n## 拷贝文件到共享云端硬盘\n\n先获取共享链接，且设置成知道此链接的任何人都可以查看\n\n![](/images/folderclone/googledrivesharelink.png)\n\n例如分享链接https://drive.google.com/open?id=1WyhcL9GbMQbtlhrmEGVSIGAltE_G5bRA\n\n![](/images/folderclone/sharefileID.png)\n\nid=1WyhcL9GbMQbtlhrmEGVSIGAltE_G5bRA\n\n如果是别人分享的链接，先右击选择添加到我的云端硬盘\n\n![](/images/folderclone/add_my_drive.png)\n\n 查看【共享云端硬盘】的ID\n\n![](/images/folderclone/team_ID.png)\n\n进入folderclone文件夹目录\n\n![](/images/folderclone/Multifolderclone-master.png)\n\n在CMD窗口执行\n\n``` bash\npython multifolderclone.py -s 源文件ID -d TD-ID\n```\n\n\n例如\n\n``` bash\npython multifolderclone.py -s 1WyhcL9GbMQbtlhrmEGVSIGAltE_G5bRA -d 0ANSyUOxsS0C7Uk9PVA\n```\n\n## 【共享云端硬盘】文件转移到【我的云端硬盘】\n\n借助【共享云端硬盘】作为文件中转站，我们可以将【共享云端硬盘】里面的文件或文件夹【移至】其它【共享云端硬盘】或者【我的云端硬盘】\n\n![](/images/folderclone/yizhi.png)\n\n![](/images/folderclone/tixing.png)\n\n文件所有者会变成我移动者且会占用空间大小\n\n![](/images/folderclone/tixing555.png)\n\n注意只能移至  相当于剪切  并不能复制\n\n\n## GD目标文件夹的准备\n\n比如我想要在【我的云端硬盘】里的某个文件夹里面复制转存文件，具体操作如下\n\n### 安装扩展程序Email Extractor\n\n[下载Chrome](https://dl.google.com/tag/s/dl/chrome/install/googlechromestandaloneenterprise64.msi) 浏览器，然后安装扩展程序[Email Extractor](https://chrome.google.com/webstore/detail/email-extractor/jdianbbpnakhcmfkcckaboohfgnngfcc?hl=en-US) \n\n![](/images/folderclone/add_EmailExtractor.png)\n\n\n![](/images/folderclone/EmailExtractor.png)\n\n### 获取源【共享云端硬盘】成员邮箱\n\n切换到目标【共享云端硬盘】然后点击扩展程序【Email Extractor】【Copy all】复制【共享云端硬盘】所有成员的邮箱。\n\n![](/images/folderclone/TDEmailExtractor.png)\n\n### 创建共享目录文件夹添加成员\n\n![](/images/folderclone/mydriveshare.png)\n\n在【共享对象】里面用【Ctrl+V】粘贴刚才复制的成员邮箱\n\n![](/images/folderclone/mydriveshareaddusers.png)\n\n![](/images/folderclone/mydriveshareaddusers1.png)\n\n现在您的GD目标文件夹已准备就绪。\n\n## GD到GD文件传输\n\n必须先完成上面的GD目标文件夹的准备，然后使用以下代码\n\n``` bash\npython multifolderclone.py -s ZZZZZZ -d DDDDDD\n```\n\n用源文件夹ID替换ZZZZZZ。\n并将DDDDDD替换为目标文件夹（您刚设置的文件夹）\n\n- 必须将共享文件夹添加到驱动器中\n- 源文件夹的公共链接必须处于活动状态，否则服务帐户无法访问源文件夹数据。\n\n## TD到GD文件传输\n\n必须先完成上面的GD目标文件夹的准备，然后使用以下代码\n\n``` bash \npython multifolderclone.py -s ZZZZZZ -d DDDDDD\n```\n\n用TD中的源文件夹ID替换ZZZZZZ，\n用目标文件夹替换DDDDDD（您刚设置的文件夹）\n\n1. 目标GD所在的帐户present必须是您正在传输文件的TD的管理员。\n2. 应在TD和GD中使用相同的服务帐户。\n\n## TD到TD文件传输\n\n现在我们要对2个TD进行处理。一个是源TD，一个是目的地TD。\n\n在根据我的原始帖子设置folderclone时，您必须使用这两个不同的TD ID运行masshare.py两次。\n\n``` bash\npython masshare.py -d 源TDid\n```\n\n``` bash\npython masshare.py -d 目的地TDid\n```\n\n之后，为了在TD到TD之间传输数据，请使用以下代码\n\n``` bash\npython multifolderclone.py -s ZZZZZZ -d DDDDDD\n```\n\n- 将ZZZZZZ替换为源TD中的源文件夹ID \n- 将DDDDDD替换为目标TD中的目标文件夹。\n\n\n要记住的事项\n\n1. 必须将相同的服务帐户添加到两个TD。\n2. 您将使用的源文件夹，必须生成公共链接。\n3. 在所有情况下，必须将源共享文件夹添加到驱动器中\n\n## 注意事项\n\n1. folderclone在拷贝文件夹数目多的时候不全会丢文件，文件夹较少就不会，比如就在那么几个文件夹，哪怕每个文件夹目录下有成千上万个文件也没事。\n2. 运行CMD窗口不要太多，最好最多就俩个吧，多了会大概率丢文件。\n3. 速度比【Copy, URL to Google Drive】快\n4. Folderclone丢失文件，拷贝不全不完整怎么办？删除重来或者用rclone copy校验补全\n5. 文件刚分享或者刚移动文件(夹)不久，不要立刻使用folderclone，有时间延迟，最好适量等侍一会，否则会出现很多空文件夹或者丢失文件太离谱，我一般会隔一天再操作。\n6. 使用[sstap](/uploads/sstap-beta-1.0.9.7.exe.7z)全局富强上网。\n","tags":["folderclone"],"categories":["教程"]},{"title":"通过cookies免费看Netflix","url":"%2Ffree-netflix-account-cookies.html","content":"\n\n### 浏览器安装插件\n\n[Accounts Pool](https://accountspool.com)\n\n[Chrome](https://accountspool.com/downloads/v1.1/accounts-pool.zip) or [Firefox](https://addons.mozilla.org/en-US/firefox/addon/accounts-pool/)\n\n\n* Chrome浏览器下载解压后打开[扩展程序](chrome://extensions/)【打开开发者模式】【加载已解压的扩展程序】来手动安装。\n\n\n### Get Cookies\n\n[Free Netflix Account Cookies [30+ Updated Every Hour] - NEW METHOD](https://tecknity.com/free-netflix-account-cookies/)\n\n按提示进入，直到看到Cookies然后打开插件中的【Use Cookies】即可自动跳转到[Netflix](https://www.netflix.com)\n\n- 应该就是已经登陆状态了\n\n\n> PS:\n\n``` bash\nToo many people are using your account at the moment\nTo watch Shooter,stop playing on another screen.\n```\n\n目前有太多人在使用您的帐户\n要观看Shooter，请停止在其他屏幕上播放。\n\n\n","tags":["Cookies"],"categories":["未分类"]},{"title":"GoogleDrive云端硬盘Microsoft_OneDrive对比下A1_E3_GD版本区别","url":"%2FMicrosoft-OneDrive-Google-Drive-GSuite-E3-edu-Version-difference.html","content":"\n\n看到有大佬科普了教育版onedrive怎么查看数据中心，捋了好久终于是捋清楚了几个版本的差别。\n\n刚好最近热度比较大的网盘我都有在用，干脆整理下做下对比。\n\n可能还有什么没有考虑到，欢迎大佬指正。\n\n# 几个了解到的情况\n\n1. Googledrive，不管是教育账户，个人账户，团队盘。 使用的线路都没有什么大的差别，使用自家的服务器集群。\n2. onedrive, 教育版A1，企业版E3 ，个人版都是走全球CDN, 经测试E3和A1下载地址后缀是sharepoint.com。走的cdn线路一样的。 个人版貌似线路IP不同。\n3. onedrive世纪互联版数据中心在北京，上海，国内基本直通。\n4. onedrive教育版,企业版,等sharepoint.com下载地址的，随着api泛滥，线路稳定性大打折扣。\n5. 谷歌盘单文件最大限制为 5T   ，one盘单文件最大限制为 15G，感谢大佬补充\n6. 团队盘单文件大小受限于自己帐号网盘的大小，如果是个人版谷歌盘容量只有15g,那么添加到该账户的团队盘单文件最大也是15G\n\n# Googledrive 各类型对比。\n\na. G Suite \n价格：12刀月。\n空间：标注1T 实际为无限。\n隐私：保障。\n国内：不可用。\n国际稳定性：好。\n翻车指标：准付费，无所畏惧\n\nb. Google drive社区大学邮箱版。 \n价格：约20-50\n隐私：无保障。\n翻车指标：利用虚假身份注册的号，校方追查便会翻车。\n(其余同上)\n\nc. Google drive校友邮箱版。 \n价格：约100-300。\n隐私：无保障。\n翻车指标：利用他人信息注册的号，使用者找回便会翻车。\n(其余同上)\n\nd. Google drive团队盘版。 \n价格：约0-200年\n隐私：无保障\n翻车指标：团队盘，管理员不管管理员是否在盘内，都可随时移除成员。\n(其余同上)\n\n# onedrive 各类型对比。单文件限制15G\n\na. onedrive 个人版 \n价格：60-100年（拼车）\n空间：1T\n隐私：保障。\n国内线路稳定性：好。\n国内：可用。\n翻车指标：准付费，无所畏惧\n\na. onedrive 世纪互联版 \n价格：最低32.00用户/月  感谢大佬补充\n空间：1T及\n隐私：保障。\n国内线路稳定性：非常好。\n国内：可用。\n翻车指标：准付费，无所畏惧\n\nb. onedrive 开发者e3 全局 \n价格：300-500\n空间：5T*25个账号   感谢大佬指正\n隐私：保障。\n国内线路稳定性：不好。\n国内：可用。（附带桌面应用）\n翻车指标：微软风控。后续微软政策变更等\n\n\nb. onedrive 教育版a1p \n价格：0-30\n空间：5T\n隐私：无保障。\n国内线路稳定性：不好。\n国内：可用。（附带桌面应用）\n翻车指标：微软风控。后续微软政策变更等\n（关于a1p订阅来历，以及具体翻车指标楼主还不了解。有了解的大佬可以补充下。）\n\n\nb. onedrive 教育版a1 \n价格：0-10\n空间：5T\n隐私：无保障。\n国内线路稳定性：不好。\n国内：可用。\n翻车指标：微软风控。后续微软政策变更等\n\n# 总结\n\n* 空间情况：谷歌盘最好。（无限）\n* 便携情况：onedrive个人版最好。（国内可用,线路稳定,app多兼容)\n* 线路情况：onedrive世纪互联版最好。(国内线路，全天候跑满。)\n* 价格情况：无法对比，越贵越好。 \n* 稳定情况：无法对比，没有付费，或通过正规渠道付费的，都有翻车风险，时间，政策变更都不可控，所以不要心存侥幸，（一定做好数据备份）。 \n\n# 临时补充\n\n1. 淘宝卖A1的，有部分严重溢价收智商税，也有伪造账号的，要注意不要受骗。\n2. onedrive，右上角，头像，点击我的帐户，选订阅可以看到自己账号类型。   \n3. 关于[世纪互联唯一登陆地址](https://portal.partner.microsoftonline.cn) 登陆不了就是假的世纪互联号。\n4. [普通国际版登陆地址](https://login.microsoftonline.com)\n5. 利用@萌咖大佬分享的[工具查数据中心](https://moeclub.org/lookup)可以查看账号数据中心。\n6. [世纪互联版office365购买地址](https://products.office.com/zh-cn/compare-china-global-versions-office365)\n7. [比较 Office 365 中国版及全球版订阅计划](https://products.office.com/zh-cn/compare-china-global-versions-office365)\n8. [安装 Office](https://account.microsoft.com/services/office/install)\n\n我选择Microsoft OneDrive家庭版拼车，睡觉也安心了！\n\n\n","tags":["MicrosoftOneDrive"],"categories":["未分类"]},{"title":"Chrome谷歌浏览器插件离线下载安装油猴脚本","url":"%2FChrome-crx-tampermonkey-extensions.html","content":"\nChrome下载 [32位](https://dl.google.com/tag/s/dl/chrome/install/googlechromestandaloneenterprise.msi) [64位](https://dl.google.com/tag/s/dl/chrome/install/googlechromestandaloneenterprise64.msi)\n\n\n[Chrome 网上应用店 - 扩展程序](https://chrome.google.com/webstore/category/extensions) `chrome`浏览器插件默认下载安装完后会删除.crx安装包\n\n# 离线下载保存`crx`插件的方法\n\n打开[扩展程序](chrome://extensions/)开启开发者模式，复制的扩展程序id到下面的网站下载。\n\n1. [Chrome Extension Downloader](https://chrome-extension-downloader.com/)\n2. http://yurl.sinaapp.com/crx.php\n\n例如：\n\n* [油猴脚本](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)Tampermonkey的ID是`dhdgffkkebhmkfjojejmpbldmpobfkfo`\n* 二维码(QR码)生成器(QR Code Generator)的ID是`pflgjjogbmmcmfhfcnlohagkablhbpmg`\n\n# 离线安装`crx`插件\n\n新版chrome必须开启开发者模式，把后缀为.crx的插件直接拖放安装\n\n# 油猴脚本推荐\n\n1. [PanDownload网页版 - 百度网盘不限速直链下载 Jaeger](https://greasyfork.org/zh-CN/scripts/383059-pandownload%E7%BD%91%E9%A1%B5%E7%89%88-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E4%B8%8D%E9%99%90%E9%80%9F%E7%9B%B4%E9%93%BE%E4%B8%8B%E8%BD%BD-jaeger)\n2. [购物党自动比价工具-领取淘宝内部券](https://greasyfork.org/zh-CN/scripts/14466-%E8%B4%AD%E7%89%A9%E5%85%9A%E8%87%AA%E5%8A%A8%E6%AF%94%E4%BB%B7%E5%B7%A5%E5%85%B7-%E9%A2%86%E5%8F%96%E6%B7%98%E5%AE%9D%E5%86%85%E9%83%A8%E5%88%B8)\n3. [破解VIP会员视频集合](https://greasyfork.org/zh-CN/scripts/27530-%E7%A0%B4%E8%A7%A3vip%E4%BC%9A%E5%91%98%E8%A7%86%E9%A2%91%E9%9B%86%E5%90%88)\n4. [QQ音乐付费无损音乐免费下载](https://greasyfork.org/zh-CN/scripts/370308-qq%E9%9F%B3%E4%B9%90%E4%BB%98%E8%B4%B9%E6%97%A0%E6%8D%9F%E9%9F%B3%E4%B9%90%E5%85%8D%E8%B4%B9%E4%B8%8B%E8%BD%BD)\n\n更多脚本请访问[Greasy Fork - 安全、实用的用户脚本大全](https://greasyfork.org/zh-CN)\n\n","tags":["Chrome"],"categories":["教程"]},{"title":"免费申请开通支付宝当面付基础版费率0.38%对接ZFAKA教程","url":"%2FApply-alipay-dangmianfu-ZFAKA.html","content":"\n# 申请开通支付宝当面付基础版费率0.38%\n\n操作步骤\n\n打开[蚂蚁金服开放](https://openhome.alipay.com/platform/home.htm) 登录 \n\n打开：https://openhome.alipay.com/isv/isvMerchantManage.htm 点击【新增商户】\n\n特别提醒：\n\n- 输入类目自己看着，一般选零售，比如生活百货（不建议选择金融网络）\n- 营业执照是非必填项，可以不上传\n- 上传门头，可以利用搜索引擎或者大众点评\n- 联系方式？（据说可以随便输入，建议输入真实的）\n- 费率建议选择0.38\n\n申请出错\n\n有网友反馈无法申请，返回错误！可以试一试下面的地址申请！不过**费率是0.6**\n\nhttps://b.alipay.com/signing/authorizedProductSet.htm\n\n\n并按提示完成签约上线, 查看 [商家签约管理](https://openhome.alipay.com/isv/settling/queryMerchantSignProductList.htm)\n\n![](/images/alipay-dangmianfu.png)\n\n\n\n# 支付宝当面付对接ZFAKA\n\n[RSA私钥及公钥生成](https://docs.open.alipay.com/58/103242)\n\n生成方式一（推荐）：使用支付宝提供的一键生成工具（内附使用说明）\n\nWindows：[下载](http://p.tb.cn/rmsportal_6680_secret_key_tools_RSA_win.zip)\n\nMAC OSX：[下载](http://p.tb.cn/rmsportal_6680_secret_key_tools_RSA_macosx.zip)\n\n解压打开文件夹，直接运行“RSA 签名验签工具.bat”（WINDOWS）或“RSA 签名验签工具.command”（MAC_OSX），点击“生成 RSA 密钥”，会自动生成公私钥，然后点击 `打开文件位置`，即可找到工具自动生成的密钥。\n具体步骤请参考签名专区[生成RSA密钥指南](https://docs.open.alipay.com/291/105971)。\n\n1. 把`RSA 签名验签工具`生成的`商户应用公钥`复制到网页&移动应用 [管理中心-蚂蚁金服开放平台](https://openhome.alipay.com/platform/appManage.htm#/apps)【应用信息】【加签方式】【应用公钥(SHA256withRsa)】【应用公钥】中\n2. 把ZFAKA【支付宝当面付】上方的【本支付接口异步支付回调地址】\n\n``` bash\nhttps://xxx.xxx.xxx/product/notify/?paymethod=zfbf2f\n```\n\n复制到支付宝的【授权回调地址】中，其中`https://xxx.xxx.xxx`是自己的域名\n\n3. 在支付宝【加签方式】【查看支付宝公钥】并把它复制到ZFAKA【后台管理】【设置中心】【支付设置】【支付宝当面付】【编辑】【ali_public_key】中\n\n4. 把支付宝【APPID】复制到【ZFAKA】中\n\n5. 把`RSA 签名验签工具`生成的`商户应用私钥`复制到【ZFAKA】应用密匙【rsa_private_key】中\n","tags":["alipay"],"categories":["教程"]},{"title":"更新国内直连可以下载chrome官方的链接","url":"%2Fchrome-download-windows.html","content":"\n更新可以下载chrome企业包，全路径识别替换更新。国内可正常访问 企业版 \nMSI：\n\n[32位](https://dl.google.com/tag/s/dl/chrome/install/googlechromestandaloneenterprise.msi) or [64位](https://dl.google.com/tag/s/dl/chrome/install/googlechromestandaloneenterprise64.msi)\n","tags":["chrome"],"categories":["教程"]},{"title":"Ubuntu18.04关闭防火墙开放所有端口","url":"%2Fubuntu-iptables.html","content":"\n``` bash\nsudo iptables -P INPUT ACCEPT\nsudo iptables -P FORWARD ACCEPT\nsudo iptables -P OUTPUT ACCEPT\nsudo iptables -F\niptables-save > /etc/iptables/rules.v4\n```\n","categories":["未分类"]},{"title":"最近azure的3年版MSDN订阅翻车补救【无限复活】Visual Studio Enterprise","url":"%2Fazure-visualstudio-msdn.html","content":"\n订阅:Visual Studio Enterprise\n3年 每月150美元的额度\n\n订阅激活\nhttps://account.windowsazure.com/signup?offer=MS-AZR-0063P\n\n前往设置备用邮箱\nhttps://my.visualstudio.com/Subscriptions \n\n10分钟后 登陆Azure管理入口\n\nhttps://portal.azure.com\n\n注册成功后建议在msdn订阅页面删除这个备用邮箱和订阅的关联性，如果azure翻车 反复前面的步骤。理论上就可以继续重新注册azure了。【哪里跌倒哪里爬起来】\n\n","tags":["azure"],"categories":["教程"]},{"title":"推送发布到GitHub及错误提示","url":"%2Fgit-push-error.html","content":"\n\n安装git\n\n``` bash\napt-get install git -y\n```\n\n进入目录后初始化\n\n``` bash\ngit init\n```\n\n# 排除不需要备份的文件和目录\n\n在根目录下创建`.gitignore`文件，里面的文件或目录不会被上传到github. 例：\n\n``` bash\npublic\nthemes\ndev\n.git\n.DS_Store\n*.bak\n*_bak\n*.old\n*.log\n```\n\n\n# 使用 SSH 密钥登录 GitHub\n\n``` bash\ngit config --global user.name \"username\"\ngit config --global user.email \"username168@gmail.com\"\nssh-keygen -t rsa -C 'username@gmail.com'\n```\n\n然后使用\n\n``` bash\ncat /root/.ssh/id_rsa.pub\n```\n\n把里面的文本全部复制到\nhttps://github.com/username/branchname/settings/keys `Add deploy key`\n\n``` bash\nssh -T git@github.com\n```\n\n测试是否连接成功\n\n# 推送到github\n\n``` bash\ngit commit -m \"自定义描述\"\ngit remote add origin git@github.com:username/branchname.git\ngit push -u origin master\n```\n\n# git push错误提示\n\n使用`git push -u origin master`时弹出错误提示\n\n* src refspec master does not match any.\n\n``` bash\nerror: src refspec master does not match any.\nerror: failed to push some refs to 'git@github.com:username/branchname.git'\n```\n\n然后用如下方法解决了：\n\n``` bash\ngit add .\ngit commit -m \"write your meaaage\"  \n```\n\n* ERROR: Repository not found.\n\n``` bash\nERROR: Repository not found.\nfatal: Could not read from remote repository.\n\nPlease make sure you have the correct access rights\nand the repository exists.\n```\n\n解决方案是\n\n``` bash\ngit remote set-url origin git@github.com:username/branchname.git\n```\n\n# 更新push\n\n以后当有更新时，使用以下三步曲上传。\n\n``` bash\ngit add .\ngit commit -m \"自定义描述\" \ngit push -u origin master\n```\n","tags":["GitHub"],"categories":["教程"]},{"title":"Win7用户福音：微软集成2019更新的新版Windows 7镜像","url":"%2Fmicrosoft-Windows7-2019update-iso-download.html","content":"\n近期微软放出了官方 Windows 7 （2019版） 全补丁集成版ISO映像文件，分别是2018年8月1日编译的旗舰版、专业版、家庭高级版的64位和32位镜像，版本号Build 7601.24214，目前只有英文版。\n\n\n主要特点如下：\n\n* 集成最新的.net Framework框架.net Framework 4.7.2。\n* 集成了SP1以后发布的有效更新186个\n* 官方支持 UEFI 和 NVME 启动。\n* 集成 USB 3.0/3.1。\n* Internet Explorer 11。\n* Win 10 模式的EFI。\n\n\n真正官方原生编译集成，绝非民间自制版本！。\n\n# 64位系统镜像下载地址\n\n旗舰版: [7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_ULTIMATE_x64FRE_en-us.iso](http://download.microsoft.com/download/5/1/9/5195A765-3A41-4A72-87D8-200D897CBE21/7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_ULTIMATE_x64FRE_en-us.iso)\n\nSHA1: 7CC76B0015220DE956328FB934D61B710A94293D\n\n专业版：[7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_PROFESSIONAL_x64FRE_en-us.iso](http://download.microsoft.com/download/0/6/3/06365375-C346-4D65-87C7-EE41F55F736B/7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_PROFESSIONAL_x64FRE_en-us.iso)\n\nSHA1: B3260CE8C339E13C4E6D327E1310B06C8E1402B0\n\n家庭高级版：[7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_HOMEPREMIUM_x64FRE_en-us.iso](http://download.microsoft.com/download/E/A/8/EA804D86-C3DF-4719-9966-6A66C9306598/7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_HOMEPREMIUM_x64FRE_en-us.iso)\n\nSHA1: C15BB9873548BD4A69371BC7966560C13162128C\n\n# 32位系统镜像下载地址\n\n旗舰版：[7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_ULTIMATE_x86FRE_en-us.iso](http://download.microsoft.com/download/1/E/6/1E6B4803-DD2A-49DF-8468-69C0E6E36218/7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_ULTIMATE_x86FRE_en-us.iso)\n\nSHA1：6F8791FBB4E883FF96B7FFC202640B0A8053D122\n\n专业版：[7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_PROFESSIONAL_x86FRE_en-us.iso](https://download.microsoft.com/download/C/0/6/C067D0CD-3785-4727-898E-60DC3120BB14/7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_PROFESSIONAL_x86FRE_en-us.iso)\n\nSHA1：F1B6B81C6F6C7BAB91DCAF711502706468B3D09A\n\n\n家庭高级版：[7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_HOMEPREMIUM_x86FRE_en-us.iso](http://download.microsoft.com/download/E/D/A/EDA6B508-7663-4E30-86F9-949932F443D0/7601.24214.180801-1700.win7sp1_ldr_escrow_CLIENT_HOMEPREMIUM_x86FRE_en-us.iso)\n\nSHA1：110674427B27F7216A95C4D659AE9F211C91FEFD\n\n# 简体中文语言包下载地址\n\n[64位](http://download.windowsupdate.com/msdownload/update/software/updt/2011/02/windows6.1-kb2483139-x64-zh-cn_2c1884b4fdf6c8e91986369d88bbcaae01c6f187.exe) or [32位](http://download.windowsupdate.com/msdownload/update/software/updt/2009/08/windows6.1-kb972813-x86-zh-cn_ab024143b556395e6638e26712b1e0f3bc031fcf.exe)\n\n\nps:微软做的这个新镜像很赞，集成到2018年11月的所有更新，适合于想要长期继续使用Windows 7的用户。毕竟微软上一次发布Windows 7的镜像还是在SP1那时候，在遥远的2011年5月12日，安装那版镜像后要装很多更新，非常不便。现在微软做了集成更新的Windows 7镜像，对广大Windows 7用户以及企业IT管理员无疑是个福音。最后还是希望微软能发布全语言版的新Windows 7镜像。\n\n\n\n\n","tags":["Windows7"]},{"title":"ubuntu-18.04设置systemctl开机启动脚本rc.local","url":"%2Fubuntu-1804-rc-local-systemctl.html","content":"\n使用`update-rc.d`以及`rc.local`等方法就是不生效。后来在ubuntu的官方论坛ubuntu-16.10开始不再使用initd管理系统改用systemd\n\nubuntu-18.04 LTS版本用的是systemctl命令来替换了service和chkconfig的功能。\n\n> systemd is now used for user sessions. System sessions had already been provided by systemd in previous Ubuntu releases.\n\n\n比如以前启动 mysql 服务用:\n\n``` bash\nsudo service mysql start\n```\n\n现在用：\n\n``` bash\nsudo systemctl start mysqld.service\n```\n\n其实这个改动到不是算大，主要是开机启动比以前复杂多了。systemd 默认读取 /etc/systemd/system 下的配置文件，该目录下的文件会链接/lib/systemd/system/下的文件。\n\n执行 ls /lib/systemd/system 你可以看到有很多启动脚本，其中就有我们需要的 rc.local.service\n\n打开脚本内容：\n\n``` bash\ncat /lib/systemd/system/rc.local.service\n```\n\n可以看出`/lib/systemd/system/rc.local.service`的启动顺序是没有`Install`段\n\n``` bash\n#  This file is part of systemd.\n#\n#  systemd is free software; you can redistribute it and/or modify it\n#  under the terms of the GNU Lesser General Public License as published by\n#  the Free Software Foundation; either version 2.1 of the License, or\n#  (at your option) any later version.\n\n# This unit gets pulled automatically into multi-user.target by\n# systemd-rc-local-generator if /etc/rc.local is executable.\n[Unit]\nDescription=/etc/rc.local Compatibility\nConditionFileIsExecutable=/etc/rc.local\nAfter=network.target\n\n[Service]\nType=forking\nExecStart=/etc/rc.local start\nTimeoutSec=0\nRemainAfterExit=yes\n```\n\n一般正常的启动文件主要分成三部分\n\n1. `Unit`段: 启动顺序与依赖关系 \n2. `Service`段: 启动行为,如何启动，启动类型 \n3. `Install`段: 定义如何安装这个配置文件，即怎样做到开机启动\n\n下面为`/lib/systemd/system/rc.local.service`添加`Install`段\n\n``` bash\necho \"\n[Install]  \nWantedBy=multi-user.target  \nAlias=rc-local.service\" >> /lib/systemd/system/rc.local.service\n```\n\n这里需要注意一下ubuntu-18.04默认是没有`/etc/rc.local`这个文件的，需要自己创建\n\n``` bash\nsudo touch /etc/rc.local\n```\n\n添加`rc.local`自定义启动\n\n``` bash\nsudo echo \"#!/bin/bash\" > /etc/rc.local\n```\n\n添加测试,编辑文件`/etc/rc.local`中添加\n\n\n``` bash\necho \"test\" > /root/test.txt\n```\n\n给予可执行权限\n\n``` bash\nchmod 755 /etc/rc.local\n```\n\n`systemd`默认读取`/etc/systemd/system`下的配置文件, 所以还需要在`/etc/systemd/system`目录下创建软链接\n\n``` bash\nln -s /lib/systemd/system/rc.local.service /etc/systemd/system/\n```\n\n重启系统,然后看看/root/test.txt文件的内容为test 是否存在就知道开机脚本是否生效了。\n","categories":["教程"]},{"title":"caddy官方脚本一键手动安装与使用","url":"%2Fcaddy.html","content":"\ncaddy官网 ：https://caddyserver.com/\n\n手动下载： https://caddyserver.com/download\n\nGithub：https://github.com/mholt/caddy\n\ncaddy会自动签发证书,有效期3个月，自动续期。\n\n``` bash\nCN = Let's Encrypt Authority X3\nO = Let's Encrypt\nC = US\n```\n\n**在启动caddy服务前，请确保域名A记录解析到VPS的IP上并生效。**\n\n# 官方脚本安装\n\n``` bash\ncurl https://getcaddy.com | bash -s personal\n```\n\n或者\n\n``` bash\nwget -qO- https://getcaddy.com | bash -s personal\n```\n\n若需安装插件\n\n``` bash\ncurl https://getcaddy.com | bash -s personal http.git,dns\n```\n\n# 配置caddy\n\n创建配置文件放到 /etc/caddy 目录\n\n``` bash\nsudo mkdir /etc/caddy\nsudo touch /etc/caddy/Caddyfile\nsudo chown -R root:www-data /etc/caddy\n```\n\n配置ssl证书目录\n\n``` bash\nsudo mkdir /etc/ssl/caddy\nsudo chown -R www-data:root /etc/ssl/caddy\nsudo chmod 0770 /etc/ssl/caddy\n```\n\n配置网站目录\n\n``` bash\nsudo mkdir /var/www\nsudo chown www-data:www-data /var/www\n```\n\n配置 systemd\n\n``` bash\nsudo curl -s  https://raw.githubusercontent.com/mholt/caddy/master/dist/init/linux-systemd/caddy.service  -o /etc/systemd/system/caddy.service\nsudo systemctl daemon-reload\nsudo systemctl enable caddy.service\nsudo systemctl status caddy.service\n```\n\n配置Caddfile配置文件\n修改Caddfile文件\n\n``` bash\nvi /etc/caddy/Caddyfile\n```\n\n一个简单的websocket加静态网站配置\n\n``` bash\nwww.google.com\n{\n  log /var/log/caddy/access.log\n  tls google@gmail.com\n  proxy /caressr 127.0.0.1:10000 {\n    websocket\n    header_upstream -Origin\n  }\n  root /var/www/\n}\n```\n\n给log路径赋权\n\n``` bash\nsudo chown www-data:www-data /var/log/caddy\n```\n\n上例是一个简单的websocket加静态网站配置。第一行为自己的域名，tls后面加上邮箱会自动申请let’sencrypt ssl证书。Caddfile更多配置详见官网。\n\n通过systemd管理caddy\n\n\n``` bash\nsudo systemctl start caddy.service\nsudo systemctl stop caddy.service\nsudo systemctl restart caddy.service\nsudo systemctl reload caddy.service\n```\n\n# Caddy无法启动报错\n\n``` bash\nsudo systemctl status caddy.service\n● caddy.service - Caddy HTTP/2 web server\n   Loaded: loaded (/etc/systemd/system/caddy.service; enabled; vendor preset: en\n   Active: failed (Result: exit-code) since Sat 2019-06-15 01:41:29 UTC; 1min 10\n     Docs: https://caddyserver.com/docs\n Main PID: 712 (code=exited, status=1/FAILURE)\n\nJun 15 01:41:27 sg systemd[1]: Started Caddy HTTP/2 web server.\nJun 15 01:41:28 sg caddy[712]: Activating privacy features... 2019/06/15 01:41:2\nJun 15 01:41:28 sg caddy[712]: 2019/06/15 01:41:28 [INFO] [sg.567899.xyz] acme:\nJun 15 01:41:29 sg caddy[712]: 2019/06/15 01:41:29 [INFO] [sg.567899.xyz] AuthUR\nJun 15 01:41:29 sg caddy[712]: 2019/06/15 01:41:29 [INFO] [sg.567899.xyz] acme:\nJun 15 01:41:29 sg caddy[712]: 2019/06/15 01:41:29 [INFO] [sg.567899.xyz] acme:\nJun 15 01:41:29 sg systemd[1]: caddy.service: Main process exited, code=exited,\nJun 15 01:41:29 sg systemd[1]: caddy.service: Unit entered failed state.\nJun 15 01:41:29 sg systemd[1]: caddy.service: Failed with result 'exit-code'.\n```\n\n[解决方案](https://caddy.community/t/caddy-wont-start-could-not-start-http-server-for-challenge-listen-tcp-80-bind-permission-denied/2543)\n\n\n修改服务文件取消以下注释：\n\n``` bash\nvi /etc/systemd/system/caddy.service\n```\n\n找到\n\n``` bash\n;CapabilityBoundingSet=CAP_NET_BIND_SERVICE\n;AmbientCapabilities=CAP_NET_BIND_SERVICE\n;NoNewPrivileges=true\n```\n\n修改为\n\n``` bash\nCapabilityBoundingSet=CAP_NET_BIND_SERVICE\nAmbientCapabilities=CAP_NET_BIND_SERVICE\nNoNewPrivileges=true\n```\n\n\n# Caddy自动申请SSL证书位置：\n\n``` bash\n/etc/ssl/caddy/acme/acme-v02.api.letsencrypt.org/sites/xxx.xxx(域名)/\n```\n","tags":["caddy"]},{"title":"手动配置安装WireGuard服务端","url":"%2FWireGuard-service-install.html","content":"\n\n### WireGuard简单介绍\nWireGuard是通过UDP协议传输数据的，这意味着它可以搭建在被墙的服务器上使用，复活被墙IP！\n\n更安全的加密\n* Curve25519 目前最高水平的秘钥交换算法。\n* ChaCha20 对称加解密算法，比 AES 更快更高效。\n* Poly1305 是一种 MAC (Message Authentication Code) 标准，用于验证数据的完整性和消息的真实性。\n* BLAKE2 一种更安全的 HASH 算法（类似的有 SHA1, SHA256, MD5）\n* SipHash24 另一种 HASH 算法。\n* HKDF 一种秘钥衍生算法。\n\n### 前提要求\n系统要求：Debian 8 / 9、Ubuntu 14.04 / 16.04 / 18.04 / 18.10\n服务器要求：OpenVZ 虚拟化的服务器不支持安装该VPN，其他虚拟化均可。\n注意：如果你用的是 Vultr、DO，且你本地没有 IPv6 地址,那就不要勾选 Enable IPv6否则可能客户端链接时可能会出错。\n[CentOS7官方安装代码](https://www.wireguard.com/install/#red-hat-enterprise-linux-centos-module-tools)\n\n\n<!--more-->\n\n\n### Debian安装步骤\n\n安装和 linux-image 内核版本相对于的 linux-headers 内核\n\n``` bash\napt update\napt install linux-headers-$(uname -r) -y\n```\n\nDebian安装后使用以下命令检测linux-headers内核是否安装成功\n\n``` bash\ndpkg -l|grep linux-headers\n```\n\n安装WireGuard\n\n``` bash\necho \"deb http://deb.debian.org/debian/ unstable main\" > /etc/apt/sources.list.d/unstable.list\necho -e 'Package: *\\nPin: release a=unstable\\nPin-Priority: 150' > /etc/apt/preferences.d/limit-unstable\napt update\napt install wireguard resolvconf -y\n```\nresolvconf 是用来指定DNS的，旧一些的系统可能没装。\n\n### Ubuntu安装步骤\n首先如果你是 Ubuntu 14.04 系统，那么请先安装 PPA\n以下步骤仅限 Ubuntu 14.04 系统执行\n\n``` bash\napt update\napt install software-properties-common -y\n```\n\n通过PPA工具添加WireGuard源\n\n``` bash\nadd-apt-repository ppa:wireguard/wireguard\napt install wireguard\n```\n\n安装WireGuard\n\n``` bash\napt update\napt install wireguard resolvconf -y\n```\n\n### 验证是否安装成功\n\n使用以下命令\n\n``` bash\nlsmod | grep wireguard\nmodprobe wireguard && lsmod | grep wireguard\n```\n\n输出能看到wireguard即表示安装成功了\n\n``` bash\nwireguard             212992  0\nip6_udp_tunnel         16384  1 wireguard\nudp_tunnel             16384  1 wireguard\n```\n\n### 配置\n\n#### 生成密匙对\n请先手动创建配置文件目录\n\n``` bash\nmkdir /etc/wireguard\n```\n\n然后开始生成 密匙对(公匙+私匙)\n\n``` bash\nwg genkey | tee sprivatekey | wg pubkey > spublickey\nwg genkey | tee cprivatekey | wg pubkey > cpublickey\n```\n\n查看主网卡名称\n\n``` bash\nip addr\n```\n\n#### 生成服务端配置文件\n* 井号开头的是注释说明，用该命令执行后会自动过滤注释文字。\n* 下面加粗的这一大段都是一个代码！请把下面几行全部复制，然后粘贴到 SSH软件中执行，不要一行一行执行！\n\n``` bash\necho \"[Interface]\n# 服务器的私匙，对应客户端配置中的公匙（自动读取上面刚刚生成的密匙内容）\nPrivateKey = $(cat sprivatekey)\n# 本机的内网IP地址，一般默认即可，除非和你服务器或客户端设备本地网段冲突\nAddress = 10.0.0.1/24 \n# 运行 WireGuard 时要执行的 iptables 防火墙规则，用于打开NAT转发之类的。\n# 如果你的服务器主网卡名称不是 eth0 ，那么请修改下面防火墙规则中最后的 eth0 为你的主网卡名称。\nPostUp   = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n# 停止 WireGuard 时要执行的 iptables 防火墙规则，用于关闭NAT转发之类的。\n# 如果你的服务器主网卡名称不是 eth0 ，那么请修改下面防火墙规则中最后的 eth0 为你的主网卡名称。\nPostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -D FORWARD -o wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n# 服务端监听端口，可以自行修改\nListenPort = 443\n# 服务端请求域名解析 DNS\nDNS = 8.8.8.8\n# 保持默认\nMTU = 1420\n# [Peer] 代表客户端配置，每增加一段 [Peer] 就是增加一个客户端账号，具体我稍后会写多用户教程。\n[Peer]\n# 该客户端账号的公匙，对应客户端配置中的私匙（自动读取上面刚刚生成的密匙内容）\nPublicKey = $(cat cpublickey)\n# 该客户端账号的内网IP地址\nAllowedIPs = 10.0.0.2/32\"|sed '/^#/d;/^\\s*$/d' > wg0.conf\n\n```\n\n#### 生成客户端配置文件\n* 井号开头的是注释说明，用该命令执行后会自动过滤注释文字。\n* 下面加粗的这一大段都是一个代码！请把下面几行全部复制，然后粘贴到 SSH软件中执行，不要一行一行执行！\n\n``` bash\necho \"[Interface]\n# 服务器的私匙，对应客户端配置中的公匙（自动读取上面刚刚生成的密匙内容）\nPrivateKey = $(cat sprivatekey)\n# 本机的内网IP地址，一般默认即可，除非和你服务器或客户端设备本地网段冲突\nAddress = 10.0.0.1/24 \n# 运行 WireGuard 时要执行的 iptables 防火墙规则，用于打开NAT转发之类的。\n# 如果你的服务器主网卡名称不是 eth0 ，那么请修改下面防火墙规则中最后的 eth0 为你的主网卡名称。\nPostUp   = iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE\n# 停止 WireGuard 时要执行的 iptables 防火墙规则，用于关闭NAT转发之类的。\n# 如果你的服务器主网卡名称不是 eth0 ，那么请修改下面防火墙规则中最后的 eth0 为你的主网卡名称。\nPostDown = iptables -D FORWARD -i wg0 -j ACCEPT; iptables -D FORWARD -o wg0 -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE\n# 服务端监听端口，可以自行修改\nListenPort = 443\n# 服务端请求域名解析 DNS\nDNS = 8.8.8.8\n# 保持默认\nMTU = 1420\n# [Peer] 代表客户端配置，每增加一段 [Peer] 就是增加一个客户端账号，具体我稍后会写多用户教程。\n[Peer]\n# 该客户端账号的公匙，对应客户端配置中的私匙（自动读取上面刚刚生成的密匙内容）\nPublicKey = $(cat cpublickey)\n# 该客户端账号的内网IP地址\nAllowedIPs = 10.0.0.2/32\"|sed '/^#/d;/^\\s*$/d' > wg0.conf\n \n# 上面加粗的这一大段都是一个代码！请把下面几行全部复制，然后粘贴到 SSH软件中执行，不要一行一行执行！\n生成客户端配置文件\n接下来就开始生成客户端配置文件：\n\n# 井号开头的是注释说明，用该命令执行后会自动过滤注释文字。\n# 下面加粗的这一大段都是一个代码！请把下面几行全部复制，然后粘贴到 SSH软件中执行，不要一行一行执行！\n \necho \"[Interface]\n# 客户端的私匙，对应服务器配置中的客户端公匙（自动读取上面刚刚生成的密匙内容）\nPrivateKey = $(cat cprivatekey)\n# 客户端的内网IP地址\nAddress = 10.0.0.2/24\n# 解析域名用的DNS\nDNS = 8.8.8.8\n# 保持默认\nMTU = 1420\n[Peer]\n# 服务器的公匙，对应服务器的私匙（自动读取上面刚刚生成的密匙内容）\nPublicKey = $(cat spublickey)\n# 服务器地址和端口，下面的 X.X.X.X 记得更换为你的服务器公网IP，端口请填写服务端配置时的监听端口\nEndpoint = X.X.X.X:443\n# 因为是客户端，所以这个设置为全部IP段即可\nAllowedIPs = 0.0.0.0/0, ::0/0\n# 保持连接，如果客户端或服务端是 NAT 网络(比如国内大多数家庭宽带没有公网IP，都是NAT)，那么就需要添加这个参数定时链接服务端(单位：秒)，如果你的服务器和你本地都不是 NAT 网络，那么建议不使用该参数（设置为0，或客户端配置文件中删除这行）\nPersistentKeepalive = 25\"|sed '/^#/d;/^\\s*$/d' > client.conf\n```\n\n接下来你就可以将这个客户端配置文件/etc/wireguard/client.conf 通过SFTP、HTTP等方式下载到本地了\n\n``` bash\ncat /etc/wireguard/client.conf\n```\n\n### 剩余其他操作\n\n#### 赋予配置文件夹权限\n\n``` bash\nchmod 777 -R /etc/wireguard\n```\n\n#### 打开防火墙转发功能\n\n``` bash\necho 1 > /proc/sys/net/ipv4/ip_forward\necho \"net.ipv4.ip_forward = 1\" >> /etc/sysctl.conf\nsysctl -p\n```\n\n### 启动WireGuard\n``` bash\nwg-quick up wg0\n```\n### 停止WireGuard\n``` bash\nwg-quick down wg0\n```\n### 查询WireGuard状态\n``` bash\nwg\n```\n### 设置开机启动\n\n注意：Ubuntu 14.04 系统默认是没有 systemctl 的，所以无法配置开机启动。\n\n``` bash\nsystemctl enable wg-quick@wg0\n```\n### 取消开机启动\n``` bash\nsystemctl disable wg-quick@wg0\n```\n\n\n\n\n","tags":["WireGuard"],"categories":["教程"]},{"title":"MarkdownPad2_Pro专业版注册码","url":"%2FMarkdownPad2-Pro-SN-key.html","content":"\nMarkdownPad 2是一款不错的Markdown编辑器\n[下载MarkdownPad](http://markdownpad.com/download.html)安装\nMarkdownPad2_Pro注册码\n\n- 邮箱\n\n``` bash\nSoar360@live.com\n```\n- 许可密钥\n\n``` bash\nGBPduHjWfJU1mZqcPM3BikjYKF6xKhlKIys3i1MU2eJHqWGImDHzWdD6xhMNLGVpbP2M5SN6bnxn2kSE8qHqNY5QaaRxmO3YSMHxlv2EYpjdwLcPwfeTG7kUdnhKE0vVy4RidP6Y2wZ0q74f47fzsZo45JE2hfQBFi2O9Jldjp1mW8HUpTtLA2a5/sQytXJUQl/QKO0jUQY4pa5CCx20sV1ClOTZtAGngSOJtIOFXK599sBr5aIEFyH0K7H4BoNMiiDMnxt1rD8Vb/ikJdhGMMQr0R4B+L3nWU97eaVPTRKfWGDE8/eAgKzpGwrQQoDh+nzX1xoVQ8NAuH+s4UcSeQ==\n```\n","tags":["MarkdownPad2"],"categories":["教程"]},{"title":"美国SIM实体电话卡Lycamobile激活充值关闭语音信箱","url":"%2FLycamobile-activation-Recharge-Close-Voice-mail.html","content":"\n网红款美国SIM实体电话卡Lycamobile\n### 激活SIM卡获得电话号码\n去[Lycamobile官方网站](https://www.lycamobile.us) 的在线激活页面[Activate SIM - Lycamobile](https://www.lycamobile.us/en/activate-sim)完成\n*激活前请不要把SIM卡插入到手机*\nZIP code: 10065 #选择纽约州纽约曼哈顿中城10065会有机率分配到212区号\nICCID: \nEmail address:\nPUK Code:\nSelect Language: English\n![](/images/lycamobile-SIM.png)\n看到提示\n**<font color=\"#339966\">12127299444 Sim Successfully Activated</font>**\n*这时可以把SIM卡插入到手机了*\n\n<!--more-->\n\n\n稍等片刻就能收到Lycamobile运营商发来的3条短信\n1. Welcome to lycamobile Plus, Your number is 12127299444\n\n2. Dear Customer, your permanent lycamobile number is 12127299444 and Your Customer Identification PIN is 9921. Thanks for using LycaMobile.\n\n3. Thanks for choosing Lycamobile!.You will receive GPRS settings. Please accept it. Visit Lycamobile.com for offers. Have any questions? Dial 602.\n\n分别是电话号码、PIN等，记录并保存好。\n\n### Lycamobile充值\n- (https://www.lycamobile.us/en/checkout/)\n官方充值10美元起另收0.5美元的服务费，不能PayPal付款\n- (https://www.recharge.com) \n10美元起+1.99美元服务费,可以用PayPal付款\n- 去淘宝飞猪充值\n最低充值5美元话费大概40RMB\n- [x]*611# 查话费\n- [x]*613# 查本机号码\n\n### Lycamobile资费及注意事项\n1. **每隔90天要使用并消费一次**，打电话，发短信都行。否则回收号码并清空余额\n2. 打电话和接电话收费0.49美元\n3. 发短信收费0.1美元（所以保号一般就是给自己发短信比较划算，90天一次）\n\n### 关闭语音信箱\n手机拨打 *#21# 可以暂时关闭开机状态下的语音信箱（临时方案，没卵用，关机后照样扣费）。\n有3种方式，注意时差，要在他们的工作时间，北京时间23:00以后，冬季可能会再往后推一个小时\n#### 客服热线\n如果您觉得自己英语口语交流没问题的话，拨打官方客服热线1-866-277-3221 可以使用Goolge Voice免费拨打\n#### 在线客服\n[chat online](http://webchat.lycamobile.com/Code/webchatLogin.php) 可以使用谷歌人机翻译，附上全部聊天内容。\n``` bash\n[客服] Welcome to Lycamobile customer support, how may I help you?\n[客户] I need to turn off voicemail service because I have multiple numbers, I think it is a waste to use voicemail service, look forward to your help!\n[客服] I will help you with that.\n[客户] thanks!\n[客户] I provide you with the following information:\n[客服] In order to cancel your voice mail service please help us with your below details\n[客户] OK\n[客服] ?\tYour Lycamobile SIM card number. ?\tFrequently Method of recharge. ? Current plan in your sim.\n[客户] 12127299444\n[客户] top up date:23-1-2019 $5\n[客户] frequently numbers: 1 850 8884433\n[客服] Thank you for the details. Please be on hold, I check our log and will pull you’re details.\n[客户] OK\n[客服] Thanks for your patience.\n[客户] Looking forward to closing voice mail service as soon as possible, thanks!\n[客服] We glad to inform that, we successfully deactivate your 12127299444 Voice mail service for your account.\n[客服] Your request has been raised under the reference number 70128444.\n[客户] thank you very much\n[客服] Is there anything else I can help you with today?\n[客户] no thanks!\n[客服] Thank you for contacting Lycamobile Web Chat, have a nice day.\n[客服] All services have left the conversation\n```\n![lycamobile-SIM-closing-voicemail](/images/lycamobile-SIM-closing-voicemail.png)\n#### 官方留言\n打开(https://www.lycamobile.us/en/help/contact-us/)\n按以下模版提交 <font color=red>注意删除掉中文注释</font>\n``` bash\nI need to turn off voicemail service because I have multiple numbers, I think it is a waste to use voicemail service,\nlook forward to your help!\nI provide you with the following information:\nSIM card number: +1 212 7299000 \n#填上你的手机号码,注意格式\nPUK number: 87887776\n#填上你的PUK码\nAny 2 frequently dialed numbers:I didn't make any calls, or was it a new number Last\n#最近通话的两个号码，模板的英文意思是没有打过电话\ntop up date:24-9-2018 $10\n#修改你的最后一次充值时间和金额，注意这个格式\nbirth:01/07/1983 \n#激活手机卡是填写的出生年月，注意保持这个格式，如果激活过程中没有填写，就把这一行删除\nLooking forward to closing voice mail service as soon as possible, thanks!\n```\n接下来就是耐心等待了，办理时间不一， 最长可能要等待72+小时。\n\n\n","tags":["Lycamobile"],"categories":["教程"]},{"title":"利用Travis CI和Hugo將Blog自動部署到Github Pages","url":"%2FHugo-Travis-CI-Deploy-Github-Pages-Automatically.html","content":"\n個人Blog採用靜態Blog形式託管在[Github][github]上。此前使用的是[Hexo][hexo]，因其包依賴關係複雜，部署流程繁瑣，故將整個部署環境封裝到Docker鏡像中以實現快速部署，但仍較爲繁瑣。現轉用執行速度快、操作簡便的[Hugo][hugo]。本文記錄如何在GNU/Linux中通過[Travis CI][travisci]將[Hugo][hugo]生成的Blog內容自動同步到[Github][github]，實現持續集成、部署。\n\n\n> 转载自 [利用Travis CI和Hugo將Blog自動部署到Github Pages](https://axdlog.com/zh/2018/using-hugo-and-travis-ci-to-deploy-blog-to-github-pages-automatically/)\n\n\n## 官方文檔\n本文中的相關操作皆以官方文檔爲操作依據\n\n* Github\n    * [GitHub Pages Basics](https://help.github.com/categories/github-pages-basics/)\n    * [User, Organization, and Project Pages](https://help.github.com/articles/user-organization-and-project-pages/)\n    * [Creating Project Pages using the command line](https://help.github.com/articles/creating-project-pages-using-the-command-line/)\n    * [Configuring a publishing source for GitHub Pages](https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/)\n* Hugo\n    * [Host on GitHub](https://gohugo.io/hosting-and-deployment/hosting-on-github/)\n* Travis CI\n    * [GitHub Pages Deployment][travisci-github-page]\n    * [Building a Python Project](https://docs.travis-ci.com/user/languages/python/)\n    * [Best Practices in Securing Your Data](https://docs.travis-ci.com/user/best-practices-security/)\n    * [Customizing the Build](https://docs.travis-ci.com/user/customizing-the-build/)\n\n\n### GitHub Pages 限制\n\n> GitHub Pages is a static site hosting service designed to host your personal, organization, or project pages directly from a GitHub repository.\n\n\nGitHub Pages 站點在使用上有如下限制：\n\n1. 倉庫大小[不得超過1GB](https://help.github.com/en/articles/what-is-my-disk-quota#file-and-repository-size-limitations)；\n2. 生成的 GitHub Pages 站點大小不得超過1 GB；\n3. GitHub Pages 站點每月限 100 GB 流量；\n4. GitHub Pages 站點每小時限構建10次；\n\n更多介紹見官方文檔 『[What is GitHub Pages?](https://help.github.com/en/articles/what-is-github-pages)』。\n\n\n## 準備工作\n\n1. 在[Github][github]註冊帳號；\n2. 在[Travis CI][travisci]註冊帳號(可通過Github帳號登入)；\n3. 本地系統安裝`git`，`hugo`；\n4. 個人域名(可選，此處指定域名`axdlog.com`)；\n\n\n## 安裝 Hugo\n* Github 地址: <https://github.com/gohugoio/hugo>\n* 下載頁: <https://github.com/gohugoio/hugo/releases>\n* 版本信息API:  <https://api.github.com/repos/gohugoio/hugo/releases/latest>\n\nhugo官方的安裝文檔頁[Install Hugo](https://gohugo.io/getting-started/installing/)，如果使用GNU/Linux，可考慮使用本人寫的Python腳本進行快速安裝。\n\n查看版本信息\n\n```bash\n# which hugo\n/usr/local/bin/hugo\n\n# hugo version\nHugo Static Site Generator v0.55.5-A83256B9 linux/amd64 BuildDate: 2019-05-02T13:03:36Z\n```\n\n### Python Script\n\n這個Python腳本用於安裝或升級 GNU/Linux 中的Hugo。\n\n\n操作過程\n\n```bash\n$ sudo python3 ~/hugo.py\nuccessfully download pack /tmp/hugo_0.55.4_Linux-64bit.tar.gz!\nSuccessfully install Hugo v0.55.4!\n\nSymlink info:\nlrwxrwxrwx 1 root root 14 Apr 26 12:26 /usr/local/bin/hugo -> /opt/Hugo/hugo\n\nHugo info:\nHugo Static Site Generator v0.55.4-57900417 linux/amd64 BuildDate: 2019-04-25T07:38:50Z\n\n$ sudo python3 ~/hugo.py\nLatest version 0.55.4 existed.\n\nHugo info:\nHugo Static Site Generator v0.55.4-57900417 linux/amd64 BuildDate: 2019-04-25T07:38:50Z\n\n\n# update operation\n$ sudo python3 hugo.py\nLocal version 0.55.4 < latest version 0.55.5.\nSuccessfully download pack /tmp/hugo_0.55.5_Linux-64bit.tar.gz!\nSuccessfully install Hugo v0.55.5!\n\nSymlink info:\nlrwxrwxrwx 1 root root 14 May  2 11:21 /usr/local/bin/hugo -> /opt/Hugo/hugo\n\nHugo info:\nHugo Static Site Generator v0.55.5-A83256B9 linux/amd64 BuildDate: 2019-05-02T13:03:36Z\n```\n\n\n### 創建新項目\n如何通過[Hugo][hugo]創建一個新的站點，詳見官方文檔 [Get Started](https://gohugo.io/getting-started/)、[Quick Start](https://gohugo.io/getting-started/quick-start/)。\n\n> If this is your first time using Hugo and you’ve [already installed Hugo on your machine](https://gohugo.io/getting-started/installing/), we recommend the [quick start](https://gohugo.io/getting-started/quick-start/).\n\n此處且將站點名稱命名爲`quickstart`(其實就是目錄名，不一定是最終的網站名稱)。\n\n```bash\nhugo new site quickstart\n```\n\nHugo生成的目錄結構如下\n\n```bash\n# tree -L 2\n├── archetypes\n│   └── default.md\n├── config.toml\n├── content\n├── data\n├── layouts\n├── static\n└── themes\n\n6 directories, 2 files\n```\n\n**注意**：這些不是最終的Blog內容，是用於生成Blog內容的文件。\n\n目錄`content`中存放自己需要發佈的Blog (Markdown文件)；\n\n如果要預覽Blog最終效果，可通過命令`hugo server`在本地開啓一個Web服務器，端口號`1313`，在瀏覽器中打開即可。\n\n```bash\nWeb Server is available at http://localhost:1313/ (bind address 127.0.0.1)\nPress Ctrl+C to stop\n```\n\n在項目所在目錄中執行命令`hugo`，會生成名爲`public`的目錄，該目錄存放着最終的Blog內容文件。將`public`目錄中的所有內容上傳至Github的`master`分支中即可。\n\n演示過程如下\n\n```bash\n# hugo\n\n                   | EN   \n+------------------+-----+\n  Pages            | 426  \n  Paginator pages  |  24  \n  Non-page files   |   0  \n  Static files     |  34  \n  Processed images |   0  \n  Aliases          |  95  \n  Sitemaps         |   1  \n  Cleaned          |   0  \n\nTotal in 403 ms\n\n# tree -L 1\n.\n├── archetypes\n├── config.toml\n├── content\n├── data\n├── layouts\n├── public\n├── resources\n├── static\n└── themes\n\n8 directories, 1 file\n```\n\n\n## 配置 Github 倉庫\n**注意**：本部分的處理思路、操作非常重要，Git配置步驟省略。Git的使用見官方文檔 『[GitHub Help](https://help.github.com/en)』、『[Git Cheat Sheets](https://github.github.com/training-kit/)』。\n\n使用GitHub Pages託管Blog內容，需要創建名爲`<username>.github.io`的倉庫，並將Hugo生成的Blog內容提交到倉庫的`master`中。\n\n因Hugo生成的內容分爲兩部分，源文件和`public`目錄中的Blog內容。故通過`git checkout --orphan`在同一倉庫中創建2個分支：\n\n* 分支`code`用於存放源文件；\n* 分支`master`用於存放`public`目錄中的Blog內容；\n\n處理思路與官方文檔 [Configuring a publishing source for GitHub Pages](https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/)不同，需要注意。\n\n### 創建空倉庫\n本人GitHub帳號名爲`MaxdSre`，故創建倉庫`maxdsre.github.io`。\n\n創建倉庫後，出現如下提示信息\n\n>or create a new repository on the command line\n\n```bash\necho \"# maxdsre.github.io\" >> README.md\ngit init\ngit add README.md\ngit commit -m \"first commit\"\ngit remote add origin git@github.com:MaxdSre/maxdsre.github.io.git\ngit push -u origin master\n```\n\n>or push an existing repository from the command line\n\n```bash\ngit remote add origin git@github.com:MaxdSre/maxdsre.github.io.git\ngit push -u origin master\n```\n\n### 分支操作\n操作分爲4步：\n\n1. 初始化Git倉庫(`git init`)；\n2. 創建`code`分支，提交源文件代碼到倉庫；\n3. 在目標目錄中執行`hugo`生成`public`目錄，將`public`目錄中內容轉移到臨時目錄中， 清空目標目錄，將臨時目錄中文件複製到該目錄中；\n4. 通過命令`git checkout --orphan`創建`master`分支，將目錄中內容提交到倉庫。\n\n進入目標目錄（此處爲`/PATH/quickstart/`）後，順序執行如下操作命令\n\n#### code 分支\n```bash\n# Initialized empty Git repository in /PATH/.git/\ngit init\n\n# Switched to a new branch 'code', equal to 'git branch code && git checkout code'\ngit checkout -b code\n\n# exclude dir public/\necho '/public/' >> .gitignore\nsed -r -i '/^\\/public\\/$/{$!d}' .gitignore\n\n# Add file contents to the index\ngit add .\n\n# Show the working tree status\n# git status\n\n# Record changes to the repository\ngit commit -m \"Hugo generator code\"\n\n# Manage set of tracked repositories\ngit remote add origin git@github.com:MaxdSre/maxdsre.github.io.git\n\n# Update remote refs along with associated objects to branch 'code'\ngit push -u origin code\n```\n\n#### master 分支\n在目錄中執行`hugo`生成`public`目錄。通過命令`git branch -a`可查看倉庫的分支信息。\n\n```bash\n# execute command hugo\nhugo\n\n# create temporary dir\nHUGO_TEMP_DIR=$(mktemp -d)\ncp -R public/* \"$HUGO_TEMP_DIR\"\n\n# create orphan branch 'master'\ngit checkout --orphan master\n\n# empty current dir\nrm .git/index\ngit clean -fdx\n\n# copy back contents in dir public/\ncp -R \"$HUGO_TEMP_DIR\"/. .\n\n# add, commit, push\ngit add .\n# git status\ngit commit -m 'initial blog content'\ngit push -u origin master\n\n# remove temp dir\n[[ -d \"$HUGO_TEMP_DIR\" ]] && rm -rf \"$HUGO_TEMP_DIR\"\n```\n\n#### image 分支\n此操作爲可選操作，本人創建第3個分支`image`用作圖牀，本文中的圖片即存放在該分支中。\n\n**注**：[GitHub][github]每個倉庫可使用 **1 GB** 存儲空間，單個文件大小不超過 **100 MB**，詳見官方文檔 『[File and repository size limitations](https://help.github.com/en/articles/what-is-my-disk-quota#file-and-repository-size-limitations)』。\n\n```bash\ngit checkout --orphan image\nrm .git/index\ngit clean -fdx\n\n# add content to this branch\n\ngit add .\ngit commit -m 'initial blog images'\ngit push -u origin image\n\n# fatal: The current branch image has no upstream branch.\n# To push the current branch and set the remote as upstream, use\n# git push --set-upstream origin image\n```\n\n### 切換分支\n如果要將本地分支切換到遠程分支`remotes/origin/image`，可通過如下命令實現\n\n```bash\n# git checkout -b <branch> --track <remote>/<branch>\n# -b <new_branch>    Create a new branch named <new_branch> and start it at <start_point>;\n# -t, --track     When creating a new branch, set up \"upstream\" configuration.\n\ngit checkout -t remotes/origin/image\n\n# 本地分支，從其它分支切換到本地分支code\ngit checkout code\n```\n\n演示過程如下\n\n```bash\n$ git branch\n* code\n\n$ git branch -a\n* code\n  remotes/origin/HEAD -> origin/code\n  remotes/origin/code\n  remotes/origin/image\n  remotes/origin/master\n\n$ git checkout -t remotes/origin/image\nBranch 'image' set up to track remote branch 'image' from 'origin'.\n  Switched to a new branch 'image'\n\n$ git branch\n  code\n* image\n\n$ git branch -a\n  code\n* image\n  remotes/origin/HEAD -> origin/code\n  remotes/origin/code\n  remotes/origin/image\n  remotes/origin/master\n```\n\n此處遠程默認分支爲`code`，如果需要更改爲`master`，執行如下命令\n\n```bash\n# change HEAD from origin/code to origin/master\ngit remote set-head origin master\n```\n\n\n### 刪除分支\n可分爲刪除遠程分支、本地分支、追蹤分支三種情況，具體見[How do I delete a Git branch both locally and remotely?](https://stackoverflow.com/questions/2003505/how-do-i-delete-a-git-branch-both-locally-and-remotely#answer-23961231)。\n\n```bash\n# 1 - 刪除遠程分支\n$ git push origin --delete <branch> # Git version 1.7.0 or newer\n$ git push origin :<branch> # Git versions older than 1.7.0\n\n# 2 - 刪除本地分支\n$ git branch --delete <branch>\n$ git branch -d <branch> # Shorter version\n\n$ git branch -D <branch> # Force delete un-merged branches\n\n# error: The branch 'image' is not fully merged.\n# If you are sure you want to delete it, run 'git branch -D image'.\n\n# 3 - 刪除本地追蹤分支\n$ git branch --delete --remotes <remote>/<branch>\n$ git branch -dr <remote>/<branch> # Shorter\n\n$ git fetch <remote> --prune # Delete multiple obsolete tracking branches\n$ git fetch <remote> -p # Shorter\n```\n\n\n## Travis CI 配置\n[Travis CI][travisci]官方說明文檔 [GitHub Pages Deployment][travisci-github-page]。\n\n### 生成 Github 訪問 Token\n> You’ll need to generate a [personal access token](https://help.github.com/articles/creating-an-access-token-for-command-line-use/) with the public_repo or repo scope (repo is required for private repositories). Since the token should be private, you’ll want to pass it to Travis securely in your [repository settings](https://docs.travis-ci.com/user/environment-variables#Defining-Variables-in-Repository-Settings) or via [encrypted variables](https://docs.travis-ci.com/user/environment-variables#Defining-encrypted-variables-in-.travis.yml) in .travis.yml.\n\n在Github的[Developer settings](https://github.com/settings/tokens)頁面中生成`personal access tokens`，若是私有倉庫，勾選`repo`；若是公開倉庫，勾選`public_repo`。此處本人選擇了 `public_repo`, `repo:status`, `repo_deployment`三項。\n\n生成的是長度爲`40`的隨機字符串，注意請勿泄漏。\n\n![](/images/github-access-token.png)\n\n\n### 設置環境變量\n生成的`token`須在[Travis CI][travisci]的目標Repo中設置，頁面地址爲 <https://travis-ci.org/MaxdSre/maxdsre.github.io/settings>。\n\n![](/images/travisci-system-var-setting.png)\n\n確保`General`中的`Build only if .travis.yml is present`, `Build pushed branches`, `Build pushed pull requests`已啓用。\n\n![](/images/travisci-general-setting.png)\n\n官方文檔[GitHub Pages Deployment][travisci-github-page]定義的默認`token`名爲`GITHUB_TOKEN`，其它指令詳見文檔。\n\n> Notice that the values are not escaped when your builds are executed. Special characters (for bash) should be escaped accordingly.\n\n此處定義相關變量，稍後會寫入`.travis.yml`文件。\n\nEnvironment Variables | Value\n---|---\nCNAME_URL | axdlog.com\nGITHUB_USERNAME | MaxdSre\nGITHUB_EMAIL | admin@axdlog.com (假設值)\nGITHUB_TOKEN | 75e8b72618ebf48df0b235cp4affd79e167b2489 (假設值)\n\n\n### .travis.yml 指令\n[Hugo][hugo]是用Golang構建的，如果在`.travis.yml`中使用`language: go`，[Travis CI][travisci]構建Golang環境耗時太長(數分鐘)。\n\n~~看到他人教程中有用Python的，恰巧最近在學習Python，便選擇Python做爲構建環境。因[Travis CI][travisci]的容器環境是基於Ubuntu的，故可以使用`dpkg`、`apt-get`等命令，但需要添加`sudo`~~。\n\n使用Python經常出現構建失敗的情況，原因是GitHub禁止Travis容器的HTTP請求，通過`tor`代理解決。\n\n最終指令如下\n\n\n#### Python\n\n```yml\n# https://docs.travis-ci.com/user/deployment/pages/\n# https://docs.travis-ci.com/user/reference/xenial/\n# https://docs.travis-ci.com/user/languages/python/\n# https://docs.travis-ci.com/user/customizing-the-build/\n\ndist: xenial\nlanguage: python\npython:\n  - \"3.7\"\n\nbefore_install:\n  - sudo apt-get update -qq\n  - sudo apt-get -yq install apt-transport-https tor curl\n\n# install - install any dependencies required\ninstall:\n    # install latest release version\n    # Github may forbid request from travis container, so use tor proxy\n    - sudo systemctl start tor\n    # - curl -fsL --socks5-hostname 127.0.0.1:9050 https://api.github.com/repos/gohugoio/hugo/releases/latest | sed -r -n '/browser_download_url/{/Linux-64bit.deb/{s@[^:]*:[[:space:]]*\"([^\"]*)\".*@\\1@g;p;q}}' | xargs wget\n    - download_command='curl -fsSL -x socks5h://127.0.0.1:9050' # --socks5-hostname\n    - $download_command -O $($download_command https://api.github.com/repos/gohugoio/hugo/releases/latest | sed -r -n '/browser_download_url/{/Linux-64bit.deb/{s@[^:]*:[[:space:]]*\"([^\"]*)\".*@\\1@g;p;q}}')\n    - sudo dpkg -i hugo*.deb\n    - rm -rf public 2> /dev/null\n\n# script - run the build script\nscript:\n    - hugo 2> /dev/null\n    - echo \"$CNAME_URL\" > public/CNAME\n\ndeploy:\n  provider: pages\n  skip-cleanup: true\n  github-token: $GITHUB_TOKEN  # Set in travis-ci.org dashboard, marked secure\n  email: $GITHUB_EMAIL\n  name: $GITHUB_USERNAME\n  verbose: true\n  keep-history: true\n  local-dir: public\n  target_branch: master  # branch contains blog content\n  on:\n    branch: code  # branch contains Hugo generator code\n```\n\n#### Golang (deprecated)\n\n```yml\n# https://docs.travis-ci.com/user/deployment/pages/\n# https://docs.travis-ci.com/user/reference/xenial/\n# https://docs.travis-ci.com/user/languages/go/\n# https://docs.travis-ci.com/user/customizing-the-build/\n\ndist: xenial\nlanguage: go\ngo:\n    - master\n\n# before_install\n# install - install any dependencies required\ninstall:\n    - go get github.com/gohugoio/hugo    # consume time 70.85s\n\nbefore_script:\n    - rm -rf public 2> /dev/null\n\n# script - run the build script\nscript:\n    - hugo 2> /dev/null\n    - echo \"$CNAME_URL\" > public/CNAME\n\ndeploy:\n  provider: pages\n  skip-cleanup: true\n  github-token: $GITHUB_TOKEN  # Set in travis-ci.org dashboard, marked secure\n  email: $GITHUB_EMAIL\n  name: $GITHUB_USERNAME\n  verbose: true\n  keep-history: true\n  local-dir: public\n  target_branch: master  # branch contains blog content\n  on:\n    branch: code  # branch contains Hugo generator code\n```\n\n\n將指令寫入到文件`.travis.yml`中，並將該`.travis.yml`上傳至repo的`code`分支中。\n\n\n## 持續集成\n所有操作完成後，只需將需要發佈的Blog上傳到repo的`code`分支中，[Travis CI][travisci]會自動進行部署操作，將更新的Blog內容更新到repo的`master`分支中，實現Blog的持續集成，自動部署。\n\n![](/images/travisci-deploy-status.png)\n\n部署過程日誌\n\n![](/images/travisci-deploy-log-1.png)\n\n![](/images/travisci-deploy-log-2.png)\n\n\n## 參考資料\n* [Continuous Integration of Hugo Website using Travis CI and Github](https://jellis18.github.io/post/2017-12-03-continuous-integration-hugo/)\n* [Travis continuous delivery](https://github.com/ldez/travis-continuous-delivery-hugo-deploy)\n* [How to create a website like freshswift.net using Hugo, Travis CI, and GitHub Pages](https://medium.com/zendesk-engineering/how-to-create-a-website-like-freshswift-net-using-hugo-travis-ci-and-github-pages-67be6f480298)\n* [GitLab CI remove priority zero from Hugo sitemap](https://www.leowkahman.com/2017/09/10/gitlab-ci-remove-priority-zero-from-hugo-sitemap/)\n* [Deploy Hugo site to Github Pages with Travis CI](https://leonidboykov.com/post/hugo-github-travis/)\n\n\n\n\n","tags":["GitHub-Pages"],"categories":["教程"]},{"title":"简要安装hexo和next主题","url":"%2Fhexo-next-install.html","content":"\n以下以Windows平台为例\n### 下载安装Node和git\n[Git - Downloads](https://git-scm.com/downloads) 和 [下载 | Node.js](https://nodejs.org/zh-cn/download/)\n### 安装hexo\n打开Git Bash依次执行\n\n``` bash\nnpm install hexo-cli -g\ncd /d  #这里以D盘为例\nhexo init blog\ncd blog #/d/blog为hexo的根目录\nnpm install\nhexo server\n```\n\n应该就能在浏览器中打开(http://localhost:4000) 看到效果了。\n\n<!--more-->\n\n### hexo远程同步到github\n登陆[GitHub](https://github.com)并创建分支为username.github.io 可以点击[Join GitHub](https://github.com/join?source=header-home)\n\n``` bash\ngit config --global user.name \"username\"\ngit config --global user.email \"youremail@gmail.com\"\nssh-keygen -t rsa -C 'youremail@gmail.com'\n```\n\nYour public key has been saved in /c/Users/admin/.ssh/id_rsa.pub.\n按提示一路回车即可以得到KEY,并收到邮件提醒。\n用文本编辑器打开/c/Users/admin/.ssh/id_rsa.pub这个文件将里面的所有文本文字\n复制到repo－Settings－Deploy keys－Add deploy key中，Title可以随便填写\n回到Git Bash\n\n``` bash\nssh -T git@github.com\n```\n\n测试是否连接成功，如果能看到\n\nHi username/username.github.io! You've successfully authenticated, but GitHub does not provide shell access.\n即表示连接成功了。\n安装 hexo-deployer-git\n\n``` bash\nnpm install hexo-deployer-git --save\n```\n\n1. 先同步hexo生成的静态文件修改hexo根目录下的_config.yml配置文件\n\n``` bash\ndeploy: \n  type: git\n  repo: https://github.com/username/username.github.io\n  branch: master\n  message: hexo生成的静态文件\n```\n\n然后使用以下命令github同步\n\n``` bash\nhexo clean\nhexo g\nhexo d\n```\n\n2. 为了日后换电脑编辑同步github更方便，这里强烈建议先后依次2个branch分支\n\n``` bash\ndeploy: \n  type: git\n  repo: https://github.com/username/username.github.io\n  branch: hexo\n  message: hexo原始配置文件\n```\n\n然后使用以下命令github同步\n\n``` bash\nhexo clean\nhexo g\nhexo d\n```\n\n- repo:库（Repository）地址\n- branch:分支名称。如果您使用的是 GitHub 或 GitCafe 的话，程序会尝试自动检测。\n- message:自定义提交信息\n\n使用详情参考[Hexo](https://hexo.io/zh-cn/)\n### 安装next主题 \n定位到 Hexo 站点目录下\n\n``` bash\ngit clone https://github.com/iissnan/hexo-theme-next themes/next\n```\n\n修改站点根目录下的_config.yml配置文件,启用 NexT 主题\n\n``` bash\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: next\n```\n\n详情参考: [开始使用 - NexT 使用文档](https://theme-next.iissnan.com/getting-started.html#theme-settings)\n","tags":["hexo"]},{"title":"V2ray官方安装配置shadowsocks+WebSocket+TLS+Web+Cloudflare_CDN","url":"%2FV2ray-config-shadowsocks-WebSocket-TLS%2BWebCloudflare_CDN.html","content":"\n1. https://v2ray.com/\n2. https://github.com/v2ray/v2ray-core\n3. https://toutyrater.github.io/\n4. https://guide.v2fly.org/\n5. https://github.com/veekxt/v2ray-template\n\n本篇主要针对websocket+tls+web三件套的使用方法\n\n## 准备工作\n\n1. 拥有公网IP且80 443端口可用的墙外VPS，NAT鸡一般不会给这2个端口使用权。\n2. 注册并拥有域名\n3. 域名绑定使用[Cloudflare ](https://www.cloudflare.com/zh-cn/)家的NS解析服务。\n\n\nCloudflare Nameservers分配给我的2个免费NS服务器。\n\n``` bash\nlynn.ns.cloudflare.com\ntara.ns.cloudflare.com\n```\n\n把域名原有的NS删除并填上Cloudflare Nameservers分配给我的2个免费NS服务器。\n\n假设我想\n\n- a.yourdomain.com 用作直连\n- b.yourdomain.com 套Cloudflare_CDN\n\n在Cloudflare里添加A记录值Name分别为a和b到VPS的公网IP的2条解析，确保解析生效后才能使用。\n\n## V2Ray安装\n\n日常更新及安装curl\n\nDebian & Ubuntu\n\n``` bash\napt-get update\napt-get install wget curl -y\n```\n\nCentOS\n``` bash\nyum update\nyum install wget curl -y\n```\n\n安装V2Ray\n\n``` bash\nbash <(curl -L -s https://install.direct/go.sh)\n```\n\n如果上面的官方链接失效了可以使用下面的\n\n``` bash\nbash <(curl -L -s https://raw.githubusercontent.com/ojbk8/v2ray-core/master/go.sh)\n```\n\n\n## V2ray配置文件\n\n备份重命名默认生成的原始V2ray配置文件\n\n``` bash\nmv /etc/v2ray/config.json /etc/v2ray/config_Backup.json\n```\n\n按需要改动下面`/etc/v2ray/config.json`里面的`port` 和 `id`和 `password`等值，建议改成`/etc/v2ray/config_Backup.json`默认随机生成的值，当然也可以照抄不改直接复制使用。\n\n编辑文件`/etc/v2ray/config.json`\n\n``` bash\nvi /etc/v2ray/config.json\n```\n\n加入下面的代码\n\n``` json\n{\n  \"inbounds\": [{\n    \"port\": 22782,\n    \"protocol\": \"vmess\",\n    \"settings\": {\n      \"clients\": [\n        {\n          \"id\": \"4e0f9136-5ea8-462c-bce9-7dd75376d378\",\n          \"alterId\": 64\n        }\n      ]\n    },\n\t\"streamSettings\": {\n\t\"network\": \"ws\",\n\t\"security\": \"none\",\n\t\"wsSettings\": {\n\t\t\"path\": \"/ray\"\n\t\t}\n      },\n\t\"listen\": \"127.0.0.1\"\n  }],\n    \"inboundDetour\": [\n    {\n      \"protocol\": \"shadowsocks\",\n      \"port\": 1008,\n      \"settings\": {\n        \"method\": \"chacha20-ietf-poly1305\",\n        \"password\": \"yourpassword\",\n        \"udp\": true\n      }\n    },\n    {\n      \"protocol\": \"shadowsocks\",\n      \"port\": 1009,\n      \"settings\": {\n        \"method\": \"aes-128-gcm\",\n        \"password\": \"youpassword\",\n        \"udp\": true\n      }\n    }\n  ],\n  \"outbounds\": [\n  {\n    \"protocol\": \"freedom\",\n    \"settings\": {}\n  }\n  ]\n}\n```\n\n\n**此文件配置可同时兼顾使用**\n\n1. shadowsocks\n2. WebSocket+TLS+Web\n3. WebSocket+TLS+Web+Cloudflare_CDN\n\n\n## 管理V2Ray进程\n\n\n``` bash\nservice v2ray start\n```\n\nubuntu 16.10+ 使用\n\n``` bash\nsystemctl start v2ray.service\nsystemctl status v2ray.service\nsystemctl stop v2ray.service\nsystemctl restart v2ray.service\n```\n\n此脚本会自动安装以下文件：\n\n- /usr/bin/v2ray/v2ray：V2Ray 程序；\n- /usr/bin/v2ray/v2ctl：V2Ray 工具；\n- /etc/v2ray/config.json：配置文件；\n- /usr/bin/v2ray/geoip.dat：IP 数据文件\n- /usr/bin/v2ray/geosite.dat：域名数据文件\n\n此脚本会配置自动运行脚本。自动运行脚本会在系统重启之后，自动运行 V2Ray。目前自动运行脚本只支持带有 Systemd 的系统，以及 Debian / Ubuntu 全系列。\n\n运行脚本位于系统的以下位置：\n\n- /etc/systemd/system/v2ray.service: Systemd\n- /etc/init.d/v2ray: SysV\n\n脚本运行完成后，你需要：\n\n1. 编辑 /etc/v2ray/config.json 文件来配置你需要的代理方式；\n2. 运行 service v2ray start 来启动 V2Ray 进程；\n3. 之后可以使用 service v2ray start|stop|status|reload|restart|force-reload 控制 V2Ray 的运行。\n\n## 更新\n\n停止v2ray覆盖重新安装一次再启动它\n\n``` bash\nservice v2ray stop\nbash <(curl -L -s https://install.direct/go.sh)\nservice v2ray start\n```\n\n## 配置WEB服务器WebSocket的规则\n\n在配置文件中添加v2ray的WebSocket的规则，然后重启在WEB服务器生效。\n\n### Caddy\n\n``` bash\n\tproxy /ray localhost:22782 {\n\t\twebsocket\n\t\theader_upstream -Origin\n\t}\n```\n\n点击查看[caddy安装教程](/post/caddy/)\n\n\n### Nginx\n\n``` bash\nlocation /ray {\n\tproxy_redirect off;\n\tproxy_pass http://127.0.0.1:22782;\n\tproxy_http_version 1.1;\n\tproxy_set_header Upgrade $http_upgrade;\n\tproxy_set_header Connection \"upgrade\";\n\tproxy_set_header Host $http_host;\n\tproxy_read_timeout 300s;\n    }\n```\n\n### Apache\n\n把以下配置加到VirtualHost值\n\n``` bash\n  <Location \"/ray/\">\n    ProxyPass ws://127.0.0.1:22782/ray/ upgrade=WebSocket\n    ProxyAddHeaders Off\n    ProxyPreserveHost On\n    RequestHeader append X-Forwarded-For %{REMOTE_ADDR}s\n  </Location>\n```\n\n## Cloudflare设置CDN\n\n注意：开启Cloudflare的CDN前，确保灰色云朵(用作直连)是没有点亮的，websocket+tls+web祼连可用。\n\n- a.yourdomain.com 灰色云朵(用作直连)\n- b.yourdomain.com 彩色云朵(套Cloudflare_CDN)\n\n只要把a设置成灰色云朵，b设置成彩色云朵。如下图\n\n![](/images/cloudflare-cdn.png)\n\n使用Cloudflare的SSL证书\n\n进入Cloudflare的`Crypto`把`SSL`选项设置成`Full`证书生效后是\n\n```\nUniversal SSL Status - Active Certificate\n```\n\n![](/images/cloudflare-Crypto-SSL.png)\n\n**注意**\n\n\nCloudflare的`Crypto`里面的`Minimum TLS Version`选择**强制TLS1.3需要V2ray服务端和客户端同时使用4.19.1+版本才能用**\n\n此时\n\nping a.yourdomain.com 是VPS的IP\n\nping b.yourdomain.com 是Cloudflare的IP\n\n## 客户端连接使用\n\n``` json\n{\n  \"inbounds\": [\n    {\n      \"port\": 1080,\n      \"listen\": \"127.0.0.1\",\n      \"protocol\": \"socks\",\n      \"sniffing\": {\n        \"enabled\": true,\n        \"destOverride\": [\"http\", \"tls\"]\n      },\n      \"settings\": {\n        \"auth\": \"noauth\",\n        \"udp\": false\n      }\n    }\n  ],\n  \"outbounds\": [\n    {\n      \"protocol\": \"vmess\",\n      \"settings\": {\n        \"vnext\": [\n          {\n            \"address\": \"a.yourdomain.com\",\n            \"port\": 443,\n            \"users\": [\n              {\n                \"id\": \"4e0f9136-5ea8-462c-bce9-7dd75376d378\",\n                \"alterId\": 64\n              }\n            ]\n          }\n        ]\n      },\n      \"streamSettings\": {\n        \"network\": \"ws\",\n        \"security\": \"tls\",\n\t\t\"security\": \"none\",\n        \"wsSettings\": {\n          \"path\": \"/ray\"\n        }\n      }\n    }\n  ]\n}\n```\n\n\n\n- 地址(address):a.yourdomain.com\n- 端口(port):443\n- 用户ID:4e0f9136-5ea8-462c-bce9-7dd75376d378\n- 额外ID(alterId):0  #只要≤服务端的值即可，值越少越不占内存\n- 加密方式(security):none\n- 传输协议(network):ws\n- 伪装类型(type):none\n- 伪装域名(host):留空不填\n- 路径(path): /ray\n- 底层传输安全: tls\n\n把域名换成`b.yourdomain.com`即套用Cloudflare的CDN\n\n\n\n","tags":["Cloudflare"]},{"title":"Debian9安装最新版Node.js和NPM","url":"%2FDebian-Nodejs-NPM.html","content":"\n`Node.js`是一个基于Chrome V8 JavaScript引擎构建的平台.Nodejs可用于轻松构建快速，可扩展的网络应用程序。最新版本node.js ppa由其官方网站维护。我们可以将这个PPA添加到Debian 9（Stretch） Debian 8（Jessie）和Debian 7（Wheezy）系统中。这篇我抄来的文章可以帮助你在Debian 9/8/7系统上安装最新的Nodejs和NPM。\n\n# 添加Node.js PPA\n首先，您需要在我们的系统中由Nodejs官方网站提供node.js PPA。如果尚未安装，我们还需要安装python-software-properties软件包。您可以选择安装最新的Node.js版本或LTS版本。\n\n最新版安装命令：\n\n``` bash\ncurl -sL https://deb.nodesource.com/setup_9.x | sudo bash\n```\n\n安装LTS长期维护版：\n\n``` bash\napt-get install curl python-software-properties\ncurl -sL https://deb.nodesource.com/setup_8.x |  bash\n```\n\n# 安装Node.js和NPM\n添加所需的PPA文件后，可以安装Nodejs包。NPM也将与node.js一起安装。该命令还会在您的系统上安装许多其他相关软件包。\n\n``` bash\napt-get install nodejs\n```\n\n# 检查Node.js和NPM版本\n安装node.js后，验证并检查安装的版本。你可以在node.js 官方网站上找到关于当前版本的更多细节。\n\n检查Node.js版本\n\n``` bash\nnode -v \n```\n\n检查npm版本\n\n``` bash\nnpm -v \n```\n","tags":["NPM"],"categories":["教程"]},{"title":"BaiduPCS-Go上传下载不限速的百度网盘客户端","url":"%2FBaiduPCS-Go.html","content":"\n\n> BaiduPCS-Go项目地址(https://github.com/iikira/BaiduPCS-Go)\n\n### [Android运行BaiduPCS-Go](https://github.com/iikira/BaiduPCS-Go/wiki/Android-%E8%BF%90%E8%A1%8C%E6%9C%AC%E9%A1%B9%E7%9B%AE%E7%A8%8B%E5%BA%8F%E5%8F%82%E8%80%83%E7%A4%BA%E4%BE%8B)\n[下载Termux](https://termux.com/) 安装并运行\n\n``` bash\ntermux-setup-storage\n```\n\n始终允许Termux获取存储权限\n\n#### 安装方式一: 通过软件源安装\n\n``` bash\necho \"deb [trusted=yes] http://termux.iikira.com stable main\" >> /data/data/com.termux/files/usr/etc/apt/sources.list\n```\n\n添加更新软件源\n\n``` bash\napt update\n```\n\n安装程序\n\n``` bash\napt install baidupcs-go\n```\n\n#### 安装方式二: 手动安装\n\n``` bash\napt update && apt upgrade -y\nwget -O 1.zip https://github.com/iikira/BaiduPCS-Go/releases/download/v3.3.3/BaiduPCS-Go-v3.3.3-android-21-arm64.zip\nunzip 1.zip && rm 1.zip\nmv BaiduPCS-Go-v3.3.3-android-21-arm64 BaiduPCS-Go\ncd ~/BaiduPCS-Go && ./BaiduPCS-Go\n```\n\n按提示完成登陆\n\n``` bash\nBaiduPCS-Go login\n```\n\n配置文件所在的目录为家目录的情况\n\n``` bash\nconfig set -max_parallel 500\n```\n下载最大并发量建议值: 50~500, 太低下载速度提升不明显甚至速度会变为0, 太高可能会导致程序出错被操作系统结束掉\n\n\n\n更新程序\n\n``` bash\napt update\napt install baidupcs-go\n```\n\n卸载程序\n\n``` bash\napt remove baidupcs-go\n```\n\n# BaiduPCS-Go 百度网盘客户端\n\n仿 Linux shell 文件处理命令的百度网盘命令行客户端.\n\nThis project was largely inspired by [GangZhuo/BaiduPCS](https://github.com/GangZhuo/BaiduPCS)\n\n## 解决错误代码4, No permission to do this operation\n\n``` bash\nBaiduPCS-Go config set -appid 266719\n```\n\n详见讨论 [#387](https://github.com/iikira/BaiduPCS-Go/issues/387)\n\n## 注意\n\n此文档只针对于最新的commit, 可能不适用于已发布的最新版本.\n\n\n\n# 特色\n\n多平台支持, 支持 Windows, macOS, linux, 移动设备等.\n\n百度帐号多用户支持;\n\n通配符匹配网盘路径和 Tab 自动补齐命令和路径, [通配符_百度百科](https://baike.baidu.com/item/通配符);\n\n[下载](#下载文件目录)网盘内文件, 支持多个文件或目录下载, 支持断点续传和单文件并行下载;\n\n[上传](#上传文件目录)本地文件, 支持上传大文件(>2GB), 支持多个文件或目录上传;\n\n[离线下载](#离线下载), 支持http/https/ftp/电驴/磁力链协议.\n\n# 编译/交叉编译 说明\n参见 [编译/交叉编译帮助](https://github.com/iikira/BaiduPCS-Go/wiki/编译-交叉编译帮助)\n\n# 下载/运行 说明\n\nGo语言程序, 可直接在[发布页](https://github.com/iikira/BaiduPCS-Go/releases)下载使用.\n\n如果程序运行时输出乱码, 请检查下终端的编码方式是否为 `UTF-8`.\n\n使用本程序之前, 建议学习一些 linux 基础知识 和 基础命令.\n\n如果未带任何参数运行程序, 程序将会进入仿Linux shell系统用户界面的cli交互模式, 可直接运行相关命令.\n\ncli交互模式下, 光标所在行的前缀应为 `BaiduPCS-Go >`, 如果登录了百度帐号则格式为 `BaiduPCS-Go:<工作目录> <百度ID>$ `\n\n程序会提供相关命令的使用说明.\n\n## Windows\n\n程序应在 命令提示符 (Command Prompt) 或 PowerShell 中运行, 在 mintty (例如: GitBash) 可能会有显示问题.\n\n也可直接双击程序运行, 具体使用方法请参见 [命令列表及说明](#命令列表及说明) 和 [初级使用教程](#初级使用教程).\n\n## Linux / macOS\n\n程序应在 终端 (Terminal) 运行.\n\n具体使用方法请参见 [命令列表及说明](#命令列表及说明) 和 [初级使用教程](#初级使用教程).\n\n## Android / iOS\n\n> Android / iOS 移动设备操作比较麻烦, 不建议在移动设备上使用本程序.\n\n安卓, 建议使用 [Termux](https://termux.com) 或 [NeoTerm](https://github.com/NeoTerm/NeoTerm) 或 终端模拟器, 以提供终端环境.\n\n示例: [Android 运行本项目程序参考示例](https://github.com/iikira/BaiduPCS-Go/wiki/Android-运行本项目程序参考示例), 有兴趣的可以参考一下.\n\n苹果iOS, 需要越狱, 在 Cydia 搜索下载并安装 MobileTerminal, 或者其他提供终端环境的软件.\n\n示例: [iOS 运行本项目程序参考示例](https://github.com/iikira/BaiduPCS-Go/wiki/iOS-运行本项目程序参考示例), 有兴趣的可以参考一下.\n\n具体使用方法请参见 [命令列表及说明](#命令列表及说明) 和 [初级使用教程](#初级使用教程).\n\n# 命令列表及说明\n\n## 注意 ! ! !\n\n命令的前缀 `BaiduPCS-Go` 为指向程序运行的全路径名 (ARGv 的第一个参数)\n\n直接运行程序时, 未带任何其他参数, 则程序进入cli交互模式, 运行以下命令时, 要把命令的前缀 `BaiduPCS-Go` 去掉!\n\ncli交互模式已支持按tab键自动补全命令和路径.\n\n## 检测程序更新\n\n``` bash\nBaiduPCS-Go update\n```\n\n## 登录百度帐号\n\n### 常规登录百度帐号\n\n支持在线验证绑定的手机号或邮箱,\n\n``` bash\nBaiduPCS-Go login\n```\n\n### 使用百度 BDUSS 来登录百度帐号\n\n[关于 获取百度 BDUSS](https://github.com/iikira/BaiduPCS-Go/wiki/关于-获取百度-BDUSS)\n\n``` bash\nBaiduPCS-Go login -bduss=<BDUSS>\n```\n\n#### 例子\n\n``` bash\nBaiduPCS-Go login -bduss=1234567\n```\n\n``` bash\nBaiduPCS-Go login\n请输入百度用户名(手机号/邮箱/用户名), 回车键提交 > 1234567\n```\n\n## 列出帐号列表\n\n``` bash\nBaiduPCS-Go loglist\n```\n\n列出所有已登录的百度帐号\n\n## 获取当前帐号\n\n``` bash\nBaiduPCS-Go who\n```\n\n## 切换百度帐号\n\n切换已登录的百度帐号\n\n``` bash\nBaiduPCS-Go su <uid>\n```\n\n``` bash\nBaiduPCS-Go su\n\n请输入要切换帐号的 # 值 >\n```\n\n## 退出百度帐号\n\n退出当前登录的百度帐号\n\n``` bash\nBaiduPCS-Go logout\n```\n\n程序会进一步确认退出帐号, 防止误操作.\n\n## 获取网盘配额\n\n``` bash\nBaiduPCS-Go quota\n```\n获取网盘的总储存空间, 和已使用的储存空间\n\n## 切换工作目录\n\n``` bash\nBaiduPCS-Go cd <目录>\n```\n\n### 切换工作目录后自动列出工作目录下的文件和目录\n\n``` bash\nBaiduPCS-Go cd -l <目录>\n```\n\n#### 例子\n\n``` bash\n# 切换 /我的资源 工作目录\nBaiduPCS-Go cd /我的资源\n\n# 切换 上级目录\nBaiduPCS-Go cd ..\n\n# 切换 根目录\nBaiduPCS-Go cd /\n\n# 切换 /我的资源 工作目录, 并自动列出 /我的资源 下的文件和目录\nBaiduPCS-Go cd -l 我的资源\n\n# 使用通配符\nBaiduPCS-Go cd /我的*\n```\n\n## 输出工作目录\n\n``` bash\nBaiduPCS-Go pwd\n```\n\n## 列出目录\n\n列出当前工作目录的文件和目录或指定目录\n\n``` bash\nBaiduPCS-Go ls\n```\n\n``` bash\nBaiduPCS-Go ls <目录>\n```\n\n### 可选参数\n\n``` bash\n-asc: 升序排序\n-desc: 降序排序\n-time: 根据时间排序\n-name: 根据文件名排序\n-size: 根据大小排序\n```\n\n#### 例子\n\n``` bash\n# 列出 我的资源 内的文件和目录\nBaiduPCS-Go ls 我的资源\n\n# 绝对路径\nBaiduPCS-Go ls /我的资源\n\n# 降序排序\nBaiduPCS-Go ls -desc 我的资源\n\n# 按文件大小降序排序\nBaiduPCS-Go ls -size -desc 我的资源\n\n# 使用通配符\nBaiduPCS-Go ls /我的*\n```\n\n## 列出目录树形图\n\n列出当前工作目录的文件和目录或指定目录的树形图\n\n``` bash\nBaiduPCS-Go tree <目录>\n\n# 默认获取工作目录元信息\nBaiduPCS-Go tree\n```\n\n## 获取文件/目录的元信息\n\n``` bash\nBaiduPCS-Go meta <文件/目录1> <文件/目录2> <文件/目录3> ...\n\n# 默认获取工作目录元信息\nBaiduPCS-Go meta\n```\n\n#### 例子\n\n``` bash\nBaiduPCS-Go meta 我的资源\nBaiduPCS-Go meta /\n```\n\n## 搜索文件\n\n按文件名搜索文件（不支持查找目录）。\n\n默认在当前工作目录搜索.\n\n``` bash\nBaiduPCS-Go search [-path=<需要检索的目录>] [-r] <关键字>\n```\n\n#### 例子\n\n``` bash\n# 搜索根目录的文件\nBaiduPCS-Go search -path=/ 关键字\n\n# 搜索当前工作目录的文件\nBaiduPCS-Go search 关键字\n\n# 递归搜索当前工作目录的文件\nBaiduPCS-Go search -r 关键字\n```\n\n## 下载文件/目录\n\n``` bash\nBaiduPCS-Go download <网盘文件或目录的路径1> <文件或目录2> <文件或目录3> ...\nBaiduPCS-Go d <网盘文件或目录的路径1> <文件或目录2> <文件或目录3> ...\n```\n\n### 可选参数\n\n``` bash\n  --test          测试下载, 此操作不会保存文件到本地\n  --ow            overwrite, 覆盖已存在的文件\n  --status        输出所有线程的工作状态\n  --save          将下载的文件直接保存到当前工作目录\n  --saveto value  将下载的文件直接保存到指定的目录\n  -x              为文件加上执行权限, (windows系统无效)\n  --share         以分享文件的方式获取下载链接来下载\n  --locate        以获取直链的方式来下载\n  -p value        指定下载线程数\n```\n\n支持多个文件或目录的下载.\n\n下载的文件默认保存到 **程序所在目录** 的 download/ 目录, 支持设置指定目录, 重名的文件会自动跳过!\n\n[关于下载的简单说明](https://github.com/iikira/BaiduPCS-Go/wiki/%E5%85%B3%E4%BA%8E%E4%B8%8B%E8%BD%BD%E7%9A%84%E7%AE%80%E5%8D%95%E8%AF%B4%E6%98%8E)\n\n#### 例子\n\n``` bash\n# 设置保存目录, 保存到 D:\\Downloads\n# 注意区别反斜杠 \"\\\" 和 斜杠 \"/\" !!!\nBaiduPCS-Go config set -savedir D:/Downloads\n\n# 下载 /我的资源/1.mp4\nBaiduPCS-Go d /我的资源/1.mp4\n\n# 下载 /我的资源 整个目录!!\nBaiduPCS-Go d /我的资源\n\n# 下载网盘内的全部文件!!\nBaiduPCS-Go d /\nBaiduPCS-Go d *\n```\n\n## 上传文件/目录\n\n``` bash\nBaiduPCS-Go upload <本地文件/目录的路径1> <文件/目录2> <文件/目录3> ... <目标目录>\nBaiduPCS-Go u <本地文件/目录的路径1> <文件/目录2> <文件/目录3> ... <目标目录>\n```\n\n* 上传默认采用分片上传的方式, 上传的文件将会保存到, <目标目录>.\n\n* 遇到同名文件将会自动覆盖!!\n\n* 当上传的文件名和网盘的目录名称相同时, 不会覆盖目录, 防止丢失数据.\n\n\n#### 注意:\n\n* 分片上传之后, 服务器可能会记录到错误的文件md5, 可使用 fixmd5 命令尝试修复文件的MD5值, 修复md5不一定能成功, 但文件的完整性是没问题的.\n\nfixmd5 命令使用方法:\n\n``` bash\nBaiduPCS-Go fixmd5 -h\n```\n\n* 禁用分片上传可以保证服务器记录到正确的md5.\n\n* 禁用分片上传时只能使用单线程上传, 指定的单个文件上传最大线程数将会无效.\n\n#### 例子:\n\n``` bash\n# 将本地的 C:\\Users\\Administrator\\Desktop\\1.mp4 上传到网盘 /视频 目录\n# 注意区别反斜杠 \"\\\" 和 斜杠 \"/\" !!!\nBaiduPCS-Go upload C:/Users/Administrator/Desktop/1.mp4 /视频\n\n# 将本地的 C:\\Users\\Administrator\\Desktop\\1.mp4 和 C:\\Users\\Administrator\\Desktop\\2.mp4 上传到网盘 /视频 目录\nBaiduPCS-Go upload C:/Users/Administrator/Desktop/1.mp4 C:/Users/Administrator/Desktop/2.mp4 /视频\n\n# 将本地的 C:\\Users\\Administrator\\Desktop 整个目录上传到网盘 /视频 目录\nBaiduPCS-Go upload C:/Users/Administrator/Desktop /视频\n```\n\n## 获取下载直链\n\n``` bash\nBaiduPCS-Go locate <文件1> <文件2> ...\n```\n\n#### 注意\n\n若该功能无法正常使用, 提示`user is not authorized, hitcode:101`, 尝试更换 User-Agent 为 `netdisk;8.3.1;android-android`:\n\n``` bash\nBaiduPCS-Go config set -user_agent \"netdisk;8.3.1;android-android\"\n```\n\n## 手动秒传文件\n\n``` bash\nBaiduPCS-Go rapidupload -length=<文件的大小> -md5=<文件的md5值> -slicemd5=<文件前256KB切片的md5值(可选)> -crc32=<文件的crc32值(可选)> <保存的网盘路径, 需包含文件名>\nBaiduPCS-Go ru -length=<文件的大小> -md5=<文件的md5值> -slicemd5=<文件前256KB切片的md5值(可选)> -crc32=<文件的crc32值(可选)> <保存的网盘路径, 需包含文件名>\n```\n\n注意: 使用此功能秒传文件, 前提是知道文件的大小, md5, 前256KB切片的 md5 (可选), crc32 (可选), 且百度网盘中存在一模一样的文件.\n\n上传的文件将会保存到网盘的目标目录.\n\n遇到同名文件将会自动覆盖! \n\n可能无法秒传 20GB 以上的文件!!\n\n#### 例子:\n\n``` bash\n# 如果秒传成功, 则保存到网盘路径 /test\nBaiduPCS-Go rapidupload -length=56276137 -md5=fbe082d80e90f90f0fb1f94adbbcfa7f -slicemd5=38c6a75b0ec4499271d4ea38a667ab61 -crc32=314332359 /test\n```\n\n\n## 修复文件MD5\n\n``` bash\nBaiduPCS-Go fixmd5 <文件1> <文件2> <文件3> ...\n```\n\n尝试修复文件的MD5值, 以便于校验文件的完整性和导出文件.\n\n使用分片上传文件, 当文件分片数大于1时, 百度网盘服务端最终计算所得的md5值和本地的不一致, 这可能是百度网盘的bug.\n\n不过把上传的文件下载到本地后，对比md5值是匹配的, 也就是文件在传输中没有发生损坏.\n\n对于MD5值可能有误的文件, 程序会在获取文件的元信息时, 给出MD5值 \"可能不正确\" 的提示, 表示此文件可以尝试进行MD5值修复.\n\n修复文件MD5不一定能成功, 原因可能是服务器未刷新, 可过几天后再尝试.\n\n修复文件MD5的原理为秒传文件, 即修复文件MD5成功后, 文件的**创建日期, 修改日期, fs_id, 版本历史等信息**将会被覆盖, 修复的MD5值将覆盖原先的MD5值, 但不影响文件的完整性.\n\n注意: 无法修复 **20GB** 以上文件的 md5!!\n\n#### 例子:\n\n``` bash\n# 修复 /我的资源/1.mp4 的 MD5 值\nBaiduPCS-Go fixmd5 /我的资源/1.mp4\n```\n\n## 获取本地文件的秒传信息\n\n``` bash\nBaiduPCS-Go sumfile <本地文件的路径>\nBaiduPCS-Go sf <本地文件的路径>\n```\n\n获取本地文件的大小, md5, 前256KB切片的 md5, crc32, 可用于秒传文件.\n\n#### 例子:\n\n``` bash\n# 获取 C:\\Users\\Administrator\\Desktop\\1.mp4 的秒传信息\nBaiduPCS-Go sumfile C:/Users/Administrator/Desktop/1.mp4\n```\n\n## 导出文件/目录\n\n``` bash\nBaiduPCS-Go export <文件/目录1> <文件/目录2> ...\nBaiduPCS-Go ep <文件/目录1> <文件/目录2> ...\n```\n\n导出网盘内的文件或目录, 原理为秒传文件, 此操作会生成导出文件或目录的命令.\n\n#### 注意\n\n**无法导出 20GB 以上的文件!!**\n\n**无法导出文件的版本历史等数据!!**\n\n并不是所有的文件都能导出成功, 程序会列出无法导出的文件列表\n\n#### 例子:\n\n``` bash\n# 导出当前工作目录:\nBaiduPCS-Go export\n\n# 导出所有文件和目录, 并设置新的根目录为 /root\nBaiduPCS-Go export -root=/root /\n\n# 导出 /我的资源\nBaiduPCS-Go export /我的资源\n```\n\n## 创建目录\n\n``` bash\nBaiduPCS-Go mkdir <目录>\n```\n\n#### 例子\n\n``` bash\nBaiduPCS-Go mkdir 123\n```\n\n## 删除文件/目录\n\n``` bash\nBaiduPCS-Go rm <网盘文件或目录的路径1> <文件或目录2> <文件或目录3> ...\n```\n\n注意: 删除多个文件和目录时, 请确保每一个文件和目录都存在, 否则删除操作会失败.\n\n被删除的文件或目录可在网盘文件回收站找回.\n\n#### 例子\n\n``` bash\n# 删除 /我的资源/1.mp4\nBaiduPCS-Go rm /我的资源/1.mp4\n\n# 删除 /我的资源/1.mp4 和 /我的资源/2.mp4\nBaiduPCS-Go rm /我的资源/1.mp4 /我的资源/2.mp4\n\n# 删除 /我的资源 内的所有文件和目录, 但不删除该目录\nBaiduPCS-Go rm /我的资源/*\n\n# 删除 /我的资源 整个目录 !!\nBaiduPCS-Go rm /我的资源\n```\n\n## 拷贝文件/目录\n\n``` bash\nBaiduPCS-Go cp <文件/目录> <目标 文件/目录>\nBaiduPCS-Go cp <文件/目录1> <文件/目录2> <文件/目录3> ... <目标目录>\n```\n\n注意: 拷贝多个文件和目录时, 请确保每一个文件和目录都存在, 否则拷贝操作会失败.\n\n#### 例子\n\n``` bash\n# 将 /我的资源/1.mp4 复制到 根目录 /\nBaiduPCS-Go cp /我的资源/1.mp4 /\n\n# 将 /我的资源/1.mp4 和 /我的资源/2.mp4 复制到 根目录 /\nBaiduPCS-Go cp /我的资源/1.mp4 /我的资源/2.mp4 /\n```\n\n## 移动/重命名文件/目录\n\n``` bash\n# 移动:\nBaiduPCS-Go mv <文件/目录1> <文件/目录2> <文件/目录3> ... <目标目录>\n# 重命名:\nBaiduPCS-Go mv <文件/目录> <重命名的文件/目录>\n```\n\n注意: 移动多个文件和目录时, 请确保每一个文件和目录都存在, 否则移动操作会失败.\n\n#### 例子\n\n``` bash\n# 将 /我的资源/1.mp4 移动到 根目录 /\nBaiduPCS-Go mv /我的资源/1.mp4 /\n\n# 将 /我的资源/1.mp4 重命名为 /我的资源/3.mp4\nBaiduPCS-Go mv /我的资源/1.mp4 /我的资源/3.mp4\n```\n\n## 分享文件/目录\n\n``` bash\nBaiduPCS-Go share\n```\n\n### 设置分享文件/目录\n\n``` bash\nBaiduPCS-Go share set <文件/目录1> <文件/目录2> ...\nBaiduPCS-Go share s <文件/目录1> <文件/目录2> ...\n```\n\n### 列出已分享文件/目录\n\n``` bash\nBaiduPCS-Go share list\nBaiduPCS-Go share l\n```\n\n### 取消分享文件/目录\n\n``` bash\nBaiduPCS-Go share cancel <shareid_1> <shareid_2> ...\nBaiduPCS-Go share c <shareid_1> <shareid_2> ...\n```\n\n目前只支持通过分享id (shareid) 来取消分享.\n\n## 离线下载\n\n``` bash\nBaiduPCS-Go offlinedl\nBaiduPCS-Go clouddl\nBaiduPCS-Go od\n```\n\n离线下载支持http/https/ftp/电驴/磁力链协议\n\n离线下载同时进行的任务数量有限, 超出限制的部分将无法添加.\n\n### 添加离线下载任务\n\n``` bash\nBaiduPCS-Go offlinedl add -path=<离线下载文件保存的路径> 资源地址1 地址2 ...\n```\n\n添加任务成功之后, 返回离线下载的任务ID.\n\n### 精确查询离线下载任务\n\n``` bash\nBaiduPCS-Go offlinedl query 任务ID1 任务ID2 ...\n```\n\n### 查询离线下载任务列表\n \n``` bash\nBaiduPCS-Go offlinedl list\n```\n\n### 取消离线下载任务\n\n``` bash\nBaiduPCS-Go offlinedl cancel 任务ID1 任务ID2 ...\n```\n\n### 删除离线下载任务\n\n``` bash\nBaiduPCS-Go offlinedl delete 任务ID1 任务ID2 ...\n\n# 清空离线下载任务记录, 程序不会进行二次确认, 谨慎操作!!!\nBaiduPCS-Go offlinedl delete -all\n```\n\n#### 例子\n\n``` bash\n# 将百度和腾讯主页, 离线下载到根目录 /\nBaiduPCS-Go offlinedl add -path=/ http://baidu.com http://qq.com\n\n# 添加磁力链接任务\nBaiduPCS-Go offlinedl add magnet:?xt=urn:btih:xxx\n\n# 查询任务ID为 12345 的离线下载任务状态\nBaiduPCS-Go offlinedl query 12345\n\n# 取消任务ID为 12345 的离线下载任务\nBaiduPCS-Go offlinedl cancel 12345\n```\n\n## 回收站\n\n``` bash\nBaiduPCS-Go recycle\n```\n\n回收站操作.\n\n### 列出回收站文件列表\n\n``` bash\nBaiduPCS-Go recycle list\n```\n\n#### 可选参数\n\n``` bash\n  --page value  回收站文件列表页数 (default: 1)\n```\n\n### 还原回收站文件或目录\n\n``` bash\nBaiduPCS-Go recycle restore <fs_id 1> <fs_id 2> <fs_id 3> ...\n```\n\n根据文件/目录的 fs_id, 还原回收站指定的文件或目录.\n\n### 删除回收站文件或目录/清空回收站\n\n``` bash\nBaiduPCS-Go recycle delete [-all] <fs_id 1> <fs_id 2> <fs_id 3> ...\n```\n\n根据文件/目录的 fs_id 或 -all 参数, 删除回收站指定的文件或目录或清空回收站.\n\n#### 例子\n\n``` bash\n# 从回收站还原两个文件, 其中的两个文件的 fs_id 分别为 1013792297798440 和 643596340463870\nBaiduPCS-Go recycle restore 1013792297798440 643596340463870\n\n# 从回收站删除两个文件, 其中的两个文件的 fs_id 分别为 1013792297798440 和 643596340463870\nBaiduPCS-Go recycle delete 1013792297798440 643596340463870\n\n# 清空回收站, 程序不会进行二次确认, 谨慎操作!!!\nBaiduPCS-Go recycle delete -all\n```\n\n## 显示程序环境变量\n\n``` bash\nBaiduPCS-Go env\n```\n\nBAIDUPCS_GO_CONFIG_DIR: 配置文件路径,\n\nBAIDUPCS_GO_VERBOSE: 是否启用调试.\n\n## 显示和修改程序配置项\n\n``` bash\n# 显示配置\nBaiduPCS-Go config\n\n# 设置配置\nBaiduPCS-Go config set\n```\n\n注意: v3.5 以后, 程序对配置文件储存路径的寻找做了调整, 配置文件所在的目录可以是程序本身所在目录, 也可以是家目录.\n\n配置文件所在的目录为家目录的情况:\n\nWindows: `%APPDATA%\\BaiduPCS-Go`\n\n其他操作系统: `$HOME/.config/BaiduPCS-Go`\n\n可通过设置环境变量 `BAIDUPCS_GO_CONFIG_DIR`, 指定配置文件存放的目录.\n\n#### 例子\n\n``` bash\n# 显示所有可以设置的值\nBaiduPCS-Go config -h\nBaiduPCS-Go config set -h\n\n# 设置下载文件的储存目录\nBaiduPCS-Go config set -savedir D:/Downloads\n\n# 设置下载最大并发量为 150\nBaiduPCS-Go config set -max_parallel 150\n\n# 组合设置\nBaiduPCS-Go config set -max_parallel 150 -savedir D:/Downloads\n```\n\n## 测试通配符\n\n``` bash\nBaiduPCS-Go match <通配符表达式>\n```\n\n测试通配符匹配路径, 操作成功则输出所有匹配到的路径.\n\n#### 例子\n\n``` bash\n# 匹配 /我的资源 目录下所有mp4格式的文件\nBaiduPCS-Go match /我的资源/*.mp4\n```\n\n## 工具箱\n\n``` bash\nBaiduPCS-Go tool\n```\n\n目前工具箱支持加解密文件等.\n\n# 初级使用教程\n\n新手建议: **双击运行程序**, 进入仿 Linux shell 的 cli 交互模式;\n\ncli交互模式下, 光标所在行的前缀应为 `BaiduPCS-Go >`, 如果登录了百度帐号则格式为 `BaiduPCS-Go:<工作目录> <百度ID>$ `\n\n以下例子的命令, 均为 cli交互模式下的命令\n\n运行命令的正确操作: **输入命令, 按一下回车键 (键盘上的 Enter 键)**, 程序会接收到命令并输出结果\n\n## 1. 查看程序使用说明\n\ncli交互模式下, 运行命令 `help`\n\n## 2. 登录百度帐号 (必做)\n\ncli交互模式下, 运行命令 `login -h` (注意空格) 查看帮助\n\ncli交互模式下, 运行命令 `login` 程序将会提示你输入百度用户名(手机号/邮箱/用户名)和密码, 必要时还可以在线验证绑定的手机号或邮箱\n\n## 3. 切换网盘工作目录\n\ncli交互模式下, 运行命令 `cd /我的资源` 将工作目录切换为 `/我的资源` (前提: 该目录存在于网盘)\n\n目录支持通配符匹配, 所以你也可以这样: 运行命令 `cd /我的*` 或 `cd /我的??` 将工作目录切换为 `/我的资源`, 简化输入.\n\n将工作目录切换为 `/我的资源` 成功后, 运行命令 `cd ..` 切换上级目录, 即将工作目录切换为 `/`\n\n为什么要这样设计呢, 举个例子,\n\n假设 你要下载 `/我的资源` 内名为 `1.mp4` 和 `2.mp4` 两个文件, 而未切换工作目录, 你需要依次运行以下命令:\n\n``` bash\nd /我的资源/1.mp4\nd /我的资源/2.mp4\n```\n\n而切换网盘工作目录之后, 依次运行以下命令:\n\n``` bash\ncd /我的资源\nd 1.mp4\nd 2.mp4\n```\n\n这样就达到了简化输入的目的\n\n## 4. 网盘内列出文件和目录\n\ncli交互模式下, 运行命令 `ls -h` (注意空格) 查看帮助\n\ncli交互模式下, 运行命令 `ls` 来列出当前所在目录的文件和目录\n\ncli交互模式下, 运行命令 `ls /我的资源` 来列出 `/我的资源` 内的文件和目录\n\ncli交互模式下, 运行命令 `ls ..` 来列出当前所在目录的上级目录的文件和目录\n\n## 5. 下载文件\n\n说明: 下载的文件默认保存到 download/ 目录 (文件夹)\n\ncli交互模式下, 运行命令 `d -h` (注意空格) 查看帮助\n\ncli交互模式下, 运行命令 `d /我的资源/1.mp4` 来下载位于 `/我的资源/1.mp4` 的文件 `1.mp4` , 该操作等效于运行以下命令:\n\n``` bash\ncd /我的资源\nd 1.mp4\n```\n\n现在已经支持目录 (文件夹) 下载, 所以, 运行以下命令, 会下载 `/我的资源` 内的所有文件 (违规文件除外):\n\n``` bash\nd /我的资源\n```\n\n参见 例6 设置下载最大并发量\n\n## 6. 设置下载最大并发量\n\ncli交互模式下, 运行命令 `config set -h` (注意空格) 查看设置帮助以及可供设置的值\n\ncli交互模式下, 运行命令 `config set -max_parallel 250` 将下载最大并发量设置为 250\n\n下载最大并发量建议值: 50~500, 太低下载速度提升不明显甚至速度会变为0, 太高可能会导致程序出错被操作系统结束掉.\n\n## 7. 退出程序\n\n运行命令 `quit` 或 `exit` 或 组合键 `Ctrl+C` 或 组合键 `Ctrl+D`\n\n# 已知问题\n\n* 分片上传文件时, 当文件分片数大于1, 网盘端最终计算所得的md5值和本地的不一致, 这可能是百度网盘的bug, 测试把上传的文件下载到本地后，对比md5值是匹配的. 可通过秒传的原理来修复md5值.\n\n# 常见问题\n\n参见 [常见问题](https://github.com/iikira/BaiduPCS-Go/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98)\n\n# TODO\n\n1. 上传大文件;\n2. 回收站操作, 例如查询回收站文件, 还原文件或目录等.\n","tags":["BaiduPCS-Go"],"categories":["教程"]},{"title":"Ubuntu_Debian配置Apache2_PHP配置站点","url":"%2FUbuntu-Debian-Apache2-php-vhost-sites.html","content":"\n日常更新\n\n``` bash\napt-get update -y\napt-get upgrade -y\n```\n\n查找程序名\n\n``` bash\nsudo apt-cache search apache | grep 'apache2'\n```\n\n# 安装Apache2\n\n``` bash\napt-get install apache2\n```\n\n安装好后开服务\n\n``` bash\nservice apache2 start\nsystemctl enable apache2\n```\n\n检查Apache2运行状态\n\n``` bash\nsystemctl status apache2\n```\n\n安装Apache的php支持模块\n\n``` bash\nsudo apt-get install libapache2-mod-php\n```\n\n重启Apache2\n\n``` bash\n/etc/init.d/apache2 restart\n```\n\n停止\n\n``` bash\n/etc/init.d/apache2 stop\n```\n\n状态查询\n\n``` bash\n/etc/init.d/apache2 status\n```\n\n在浏览器中输入IP地址，看到以下页面说明apache成功安装\n\nDebian系统上Apache2 Web服务器安装的配置布局如下：\n\n``` bash\n/etc/apache2/\n|-- apache2.conf\n|       `--  ports.conf\n|-- mods-enabled\n|       |-- *.load\n|       `-- *.conf\n|-- conf-enabled\n|       `-- *.conf\n|-- sites-enabled\n|       `-- *.conf\n```\n\n\n1. apache2.conf is the main configuration file. It puts the pieces together by including all remaining configuration files when starting up the web server.\n2. ports.conf is always included from the main configuration file. It is used to determine the listening ports for incoming connections, and this file can be customized anytime.\n3. Configuration files in the mods-enabled/, conf-enabled/ and sites-enabled/ directories contain particular configuration snippets which manage modules, global configuration fragments, or virtual host configurations, respectively.\n4. They are activated by symlinking available configuration files from their respective *-available/ counterparts. These should be managed by using our helpers a2enmod, a2dismod, a2ensite, a2dissite, and a2enconf, a2disconf . See their respective man pages for detailed information.\n5. The binary is called apache2. Due to the use of environment variables, in the default configuration, apache2 needs to be started/stopped with /etc/init.d/apache2 or apache2ctl. Calling /usr/bin/apache2 directly will not work with the default configuration.\n\nDocument Roots\n\nBy default, Debian does not allow access through the web browser to any file apart of those located in /var/www, public_html directories (when enabled) and /usr/share (for web applications). If your site is using a web document root located elsewhere (such as in /srv) you may need to whitelist your document root directory in /etc/apache2/apache2.conf.\n\nThe default Debian document root is /var/www/html. You can make your own virtual hosts under /var/www. This is different to previous releases which provides better security out of the box.\n\nReporting Problems\n\nPlease use the reportbug tool to report bugs in the Apache2 package with Debian. However, check existing bug reports before reporting a new bug.\n\nPlease report bugs specific to modules (such as PHP and others) to respective packages, not to the web server itself.\n\n查看apache2版本号\n\n``` bash\napache2 -v\n```\n\n显示\n\n``` bash\nServer version: Apache/2.4.25 (Debian)\nServer built:   2019-04-02T19:05:13\n```\n\n列出 Debian 仓库中与 Apache 相关的软件列表。\n\n``` bash\napt-cache search apache | less\n```\n\n带有 “apache” 字眼的软件包通常都是与相应软件包有关的，如 -doc, -dev, -common, -perl …\n\n\nhttps://wiki.debian.org/zh_CN/Apache\n\n\n# 安装PHP及所需的模块：\n\n``` bash\napt-get install php7.0 libapache2-mod-php7.0 php7.0-cli php7.0-mcrypt php7.0-intl php7.0-mysql php7.0-curl php7.0-gd php7.0-soap php7.0-xml php7.0-zip -y\n```\n\n查看PHP版本\n\n``` bash\nphp -v\n```\n\n显示如下\n\nPHP 7.0.33-0+deb9u3 (cli) (built: Mar  8 2019 10:01:24) ( NTS )\nCopyright (c) 1997-2017 The PHP Group\nZend Engine v3.0.0, Copyright (c) 1998-2017 Zend Technologies\n    with Zend OPcache v7.0.33-0+deb9u3, Copyright (c) 1999-2017, by Zend Technologies\n\t\n\t\n测试是否安装成功 \n创建`test.php`脚本，保存到`/var/www/html`目录下,脚本内容为：\n\n``` bash\n<?php\necho \"Hellow World\";\n?>\n```\n\n浏览器输入localhost/test.php，浏览器返回Hello World则环境配置成功\n\n\n\n\n# 设置域名虚拟主机\n\n使用Apache Web服务器时，您可以使用虚拟主机 （类似于Nginx中的服务器块）来封装配置详细信息并从单个服务器托管多个域。 我们将设置一个名为example.com的域名，但您应将其替换为您自己的域名 。 要了解有关使用DigitalOcean设置域名的更多信息，请参阅我们的DigitalOcean DNS简介 。\n\nDebian 9上的Apache默认启用了一个服务器块，配置为从/var/www/html目录中提供文档。 虽然这适用于单个站点，但如果您托管多个站点，它可能会变得难以处理。 不要修改/var/www/html ，让我们在example.com网站的/var/www创建一个目录结构，将/var/www/html保留为默认目录，如果客户端请求没有匹配任何其他网站。\n\n按如下所示为example.com创建目录，使用-p标志创建任何必需的父目录：\n\n``` bash\nsudo mkdir -p /var/www/example.com/html\n```\n\n接下来，使用$USER环境变量分配目录的所有权：\n\n``` bash\nsudo chown -R $USER:$USER /var/www/example.com/html\n```\n\n如果您尚未修改unmask值，则Web根目录的权限应该是正确的，但您可以通过键入以下内容来确保：\n\n``` bash\nsudo chmod -R 755 /var/www/example.com\n```\n\n接下来，使用nano或您喜欢的编辑器创建一个示例index.html页面：\n\n``` bash\nnano /var/www/example.com/html/index.html\n```\n\n在里面，添加以下示例HTML：\n\n``` bash\n/var/www/example.com/html/index.html\n<html>\n    <head>\n        <title>Welcome to Example.com!</title>\n    </head>\n    <body>\n        <h1>Success!  The example.com server block is working!</h1>\n    </body>\n</html>\n```\n\n完成后保存并关闭文件。\n\n为了使Apache能够提供此内容，必须使用正确的指令创建虚拟主机文件。 不要直接修改位于`/etc/apache2/sites-available/000-default.conf`的默认配置文件，而是在`/etc/apache2/sites-available/example.com.conf`创建一个新文件：\n\n``` bash\nsudo nano /etc/apache2/sites-available/example.com.conf\n```\n\n粘贴在以下配置块中，类似于默认配置块，但为我们的新目录和域名更新：\n\n``` bash\nnano /etc/apache2/sites-available/example.com.conf\n```\n\n键入以下内容来\n\n\n``` bash\n<VirtualHost *:80>\n    ServerAdmin admin@example.com\n    ServerName example.com\n    ServerAlias www.example.com\n    DocumentRoot /var/www/example.com/html\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n</VirtualHost>\n```\n\n请注意，我们已将DocumentRoot更新为新目录，将ServerAdmin更新为example.com站点管理员可以访问的电子邮件。 我们还添加了两个指令： ServerName ，它建立了应该与此虚拟主机定义匹配的基本域; ServerAlias ，它定义了应该匹配的更多名称，就像它们是基本名称一样。\n\n完成后保存并关闭文件。\n\n让我们使用a2ensite工具启用该文件：\n\n``` bash\nsudo a2ensite example.com.conf\n```\n\n禁用000-default.conf定义的默认站点：\n\n``` bash\nsudo a2dissite 000-default.conf\n```\n\n接下来，让我们测试一下配置错误：\n\n``` bash\nsudo apache2ctl configtest\n```\n\n您应该看到以下输出：\n\nSyntax OK\n\n重启Apache以实现更改：\n\n``` bash\nsudo systemctl restart apache2\n```\n\nApache现在应该为您的域名服务。 您可以通过导航到http:// example.com来测试这一点，您应该在其中看到如下内容：\n\n# 其它\n\n* /var/www/html ：实际的Web内容默认只包含您之前看到的默认Apache页面，它是在/var/www/html目录下提供的。 这可以通过更改Apache配置文件来更改。\n* /etc/apache2 ：Apache配置目录。 所有Apache配置文件都驻留在此处。\n* /etc/apache2/apache2.conf ：主要的Apache配置文件。 可以对其进行修改以更改Apache全局配置。 该文件负责加载配置目录中的许多其他文件。\n* /etc/apache2/ports.conf ：此文件指定Apache将监听的端口。 默认情况下，Apache在端口80上监听，并在启用提供SSL功能的模块时另外监听端口443。\n* /etc/apache2/sites-available/ ：可以存储每站点虚拟主机的目录。 Apache不会使用此目录中的配置文件，除非它们链接到sites-enabled目录。 通常，所有服务器块配置都在此目录中完成，然后通过使用a2ensite命令链接到其他目录来启用。\n* /etc/apache2/sites-enabled/ ：存储已启用的每站点虚拟主机的目录。 通常，这些是通过使用a2ensite链接到sites-available目录中的配置文件来创建的。 Apache在启动或重新加载以编译完整配置时读取此目录中的配置文件和链接。\n* /etc/apache2/conf-available/ ， /etc/apache2/conf-enabled/ ：这些目录与sites-available和sites-enabled目录具有相同的关系，但用于存储不属于a的配置片段虚拟主机。 可以使用a2enconf命令启用conf-available目录中的文件，并使用a2enconf命令禁用这些a2disconf 。\n* /etc/apache2/mods-available/ ， /etc/apache2/mods-enabled/ ：这些目录分别包含可用和已启用的模块。 以.load结尾的文件包含用于加载特定模块的片段，而以.conf结尾的文件包含这些模块的配置。 可以使用a2enmod和a2dismod命令启用和禁用模块。\n* /var/log/apache2/access.log ：默认情况下，除非将Apache配置为执行其他操作，否则对Web服务器的每个请求都将记录在此日志文件中。\n* /var/log/apache2/error.log ：默认情况下，所有错误都记录在此文件中。 Apache配置中的LogLevel指令指定错误日志将包含多少详细信息。\n\n\n","tags":["Apache2"],"categories":["教程"]},{"title":"使用Aira2下载文件后自动上传到Google Drive网盘 onedrive","url":"%2FAira2-uploads-GoogleDrive-onedrive.html","content":"\n# 更新\n\n``` bash\n【2018.10.30】\n这里分享下萌咖大佬的Aira2上传脚本，不过是精简版，全能版暂不分享，精简版包含以下功能：\n1、脚本适用于Rclone挂载的网盘，比如Onedrive/Google Drive等。\n2、判断上传文件的文件大小区间。\n限制最低上传大小：可防止产生的.aria2后缀文件一起上传到网盘。\n限制最高文件大小：适用于Onedrive等，官方限制上传不能超过15G，其它可自行更改其数值。\n3、支持文件名中包含空格等特殊字符。\n```\n\n\n# 脚本说明: Aria2 一键安装管理脚本\n\n系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/aria2.sh && chmod +x aria2.sh && bash aria2.sh\n```\n\n> Aria2下载为什么会多出一个.aria2后缀的文件？\n\n找到force-save参数，进行设置\n\n`force-save=true` 会保存文件下载历史,但会在下载目录产生同名.aria2文件\n\n`force-save=false`不产生同名.aria2文件,同时也不能能保存下载历史\n\n\n# 使用方法\n\n原理是当下载完后`aria2`会给脚本传3个参数`$1`、`$2`、`$3`分别为`gid`、文件数量、文件路径。我们对文件路径这个字符串处理一番就可以达到目的了。\n\n新建脚本文件`rcloneupload.sh`并复制下面代码：\n\n``` bash\n#!/bin/bash\ndownloadpath='/root/Download' #需要上传的目录，Aria2下载目录\nname='rclonename' #配置Rclone时填写的name\nfolder='/rclone' #网盘里的文件夹，留空为整个网盘。\nMinSize='0.01k' #限制最低上传大小，默认10k，BT下载时可防止上传其他无用文件。会删除文件，谨慎设置。\nMaxSize='15G' #限制最高文件大小，默认15G，OneDrive上传限制。\n\nfilepath=$3 #Aria2传递给脚本的原始路径，如果是单文件则为/root/Download/1.mp4，如果是文件夹则该值为文件夹内第一个文件比如/root/Download/a/b/1.mp4\nrdp=${filepath#${downloadpath}/} #路径转换，去掉开头的下载路径。\npath=${downloadpath}/${rdp%%/*} #文件或文件夹路径。如果是单个文件，应与原始路径一致。\n\nif [ $2 -eq 0 ]\n\tthen\n\t\texit 0\nfi\n\nwhile true; do\nif [ \"$path\" = \"$filepath\" ] && [ $2 -eq 1 ] #如果下载的是单个文件\n\tthen\n\trclone move -v \"$filepath\" ${name}:${folder} --min-size $MinSize --max-size $MaxSize\n\trm -vf \"$filepath\".aria2 #删除残留的.aria.2文件\n\texit 0\nelif [ \"$path\" != \"$filepath\" ] #如果下载的是文件夹\n\tthen\n\twhile [[ \"`ls -A \"$path/\"`\" != \"\" ]]; do\n\trclone move -v \"$path\" ${name}:\"${folder}\"/\"${rdp%%/*}\" --min-size $MinSize --max-size $MaxSize --delete-empty-src-dirs\n\trclone delete -v \"$path\" --max-size $MinSize #删除多余的文件\n\trclone rmdirs -v \"$downloadpath\" --leave-root #删除空目录，--delete-empty-src-dirs参数已实现，加上无所谓。\n\tdone\n\trm -vf \"$path\".aria2 #删除残留的.aria2文件\n\texit 0\nfi\ndone\n```\n\n或者\n\n\n``` bash\n#!/bin/bash\n\nGID=\"$1\";\nFileNum=\"$2\";\nFile=\"$3\";\nMinSize=\"5\"  #限制最低上传大小，默认5k\nMaxSize=\"157286400\"  #限制最高文件大小(单位k)，默认15G\nRemoteDIR=\"/RATS/\";  #rclone挂载的本地文件夹，最后面保留/\nLocalDIR=\"/download/\";  #Aria2下载目录，最后面保留/\n\nif [[ -z $(echo \"$FileNum\" |grep -o '[0-9]*' |head -n1) ]]; then FileNum='0'; fi\nif [[ \"$FileNum\" -le '0' ]]; then exit 0; fi\nif [[ \"$#\" != '3' ]]; then exit 0; fi\n\nfunction LoadFile(){\n  IFS_BAK=$IFS\n  IFS=$'\\n'\n  if [[ ! -d \"$LocalDIR\" ]]; then return; fi\n  if [[ -e \"$File\" ]]; then\n    FileLoad=\"${File/#$LocalDIR}\"\n    while true\n      do\n        if [[ \"$FileLoad\" == '/' ]]; then return; fi\n        echo \"$FileLoad\" |grep -q '/';\n        if [[ \"$?\" == \"0\" ]]; then\n          FileLoad=$(dirname \"$FileLoad\");\n        else\n          break;\n        fi;\n      done;\n    if [[ \"$FileLoad\" == \"$LocalDIR\" ]]; then return; fi\n    EXEC=\"$(command -v mv)\"\n    if [[ -z \"$EXEC\" ]]; then return; fi\n    Option=\" -f\";\n    cd \"$LocalDIR\";\n    if [[ -e \"$FileLoad\" ]]; then\n      ItemSize=$(du -s \"$FileLoad\" |cut -f1 |grep -o '[0-9]*' |head -n1)\n      if [[ -z \"$ItemSize\" ]]; then return; fi\n      if [[ \"$ItemSize\" -le \"$MinSize\" ]]; then\n        echo -ne \"\\033[33m$FileLoad \\033[0mtoo small to spik.\\n\";\n        return;\n      fi\n      if [[ \"$ItemSize\" -ge \"$MaxSize\" ]]; then\n        echo -ne \"\\033[33m$FileLoad \\033[0mtoo large to spik.\\n\";\n        return;\n      fi\n      eval \"${EXEC}${Option}\" \\'\"${FileLoad}\"\\' \"${RemoteDIR}\";\n    fi\n  fi\n  IFS=$IFS_BAK\n}\nLoadFile;\n```\n\n\n\n\n授权\n\n``` bash\nchmod +x rcloneupload.sh\n```\n\n然后再到Aria2配置文件中加上一行\n\n``` bash\non-download-complete=/root/rcloneupload.sh\n```\n\n即可，后面为脚本的路径。最后重启Aria2生效。\n\n\n转载自： https://www.moerats.com/archives/482/\n","tags":["Aira2"],"categories":["教程"]},{"title":"Debian9安装最新版Nginx","url":"%2FDebian-Ubuntu-install-New-Nginx.html","content":"\napt-get默认安装的nginx为1.10，如果嫌太老了可以修改安装源的方式来获得更新的版本；\n\n一、添加Nginx源\n新建一个nginx.list文件\n\n``` bash\nvi /etc/apt/sources.list.d/nginx.list\n```\n\n加入以下内容：\n\n``` bash\ndeb http://nginx.org/packages/mainline/debian/ stretch nginx\ndeb-src http://nginx.org/packages/mainline/debian/ stretch nginx\n```\n\n下面这个我也不晓得干什么的，反正老外是这样写的\n\n``` bash\nwget -qO - http://nginx.org/keys/nginx_signing.key | apt-key add -\n```\n\n更新一下让源生效\n\n``` bash\napt update\n```\n\n \n\n二、安装更新版本nginx\n\n如果之前用apt命令安装了旧版本nginx,需要卸载掉才行\n\n``` bash\napt remove nginx-common\n```\n\n正式开始安装\n\n``` bash\napt install nginx\n```\n\n \n\n安装完成查看版本:\n\n\n``` bash\nnginx -v\n```\n\n会列出`Nginx` `OpenSSL`相关配置文件路径...\n\n查看nginx进程\n\n``` bash\nps aux | grep nginx\npgrep nginx\n```\n\n\n安装好的文件位置：\n\n``` bash\n/usr/sbin/nginx  #主程序\n/etc/nginx  #存放配置文件\n/usr/share/nginx  #存放静态文件\n/var/log/nginx  #存放日志\n/etc/nginx/nginx.conf  #默认nginx配置文件\n```\n\nNginx控制命令：\n\n``` bash\n###启动\nsystemctl enable nginx\n###重启\nsystemctl restart nginx\n###停止\nsystemctl stop nginx\n###也可以使用\n/etc/init.d/nginx start # 启动Nginx服务\n/etc/init.d/nginx stop # 停止Nginx服务\n/etc/init.d/nginx  restart # 重启Nginx服务\n```\n\n# 增加 Nginx 虚拟主机\n\n检查`/etc/nginx/nginx.conf`配置文件，确保文件中有：`include /etc/nginx/conf.d/*.conf;` 默认已经有了的。\n\n然后在目录`/etc/nginx/conf.d/`下面新建文件`site1.conf`，`site2.conf`...文件名任意写，自己看明白就OK  \n\nNginx配置支持PHP\n\n``` bash\n\tlocation ~ \\.php$ {\n        fastcgi_pass 127.0.0.1:9000;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n\t}\n```    \n\n或者\n\n``` bash\n\tlocation ~ \\.php$ {\n        fastcgi_pass unix:/run/php/php7.2-fpm.sock;\n        fastcgi_index index.php;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include fastcgi_params;\n\t}\n```\n\n又或者\n\n``` bash\n\tlocation ~ \\.php$ {\n\tinclude snippets/fastcgi-php.conf;\n\tfastcgi_pass unix:/run/php/php7.2-fpm.sock;\n\t}\n```\n\n\n# 解决Nginx php-fpm配置有误引起的502错误\n\n针对该问题的解决方案是，修改`/etc/nginx/conf/vhosts`下的conf文件，\n\n将`fastcgi_pass 127.0.0.1:9000;`修改为`fastcgi_pass unix:/run/php/php7.0-fpm.sock;`\n\n重启Nginx服务后，WEB访问依然报错502，继续定位分析。\n\n在nginx error_log日志`/var/log/nginx/error.log`中出现了以下新的报错内容：\n\n``` bash\n2017/07/29 11:24:47 [crit] 6114#0: *1 connect() to unix:/run/php/php7.2-fpm.sock failed (13: Permission denied) while connecting to upstream, client: 183.14.134.xx, server: 112.74.89.xx, request: “GET / HTTP/1.1”, upstream: “fastcgi://unix:/run/php/php7.2-fpm.sock:”, host: “112.74.89.xx”\n```\n\n\n编辑文件`/etc/php/7.2/fpm/pool.d/www.conf`找到\n\n``` bash\nlisten.owner = www-data\nlisten.group = www-data\n;listen.mode = 0660\n```\n\n修改为\n\n``` bash\n;listen.owner = www-data\n;listen.group = www-data\nlisten.mode = 0666\n```\n\n重启下Nginx和php\n\n``` bash\nsystemctl restart nginx\nsystemctl restart php7.2-fpm\n```\n","tags":["Nginx"],"categories":["教程"]},{"title":"Nginx使用官方工具 Certbot 配置申请 Let’s Encrypt SSL 安全证书详细教程","url":"%2FDebian-Ubuntu-Nginx-Certbot-Let%E2%80%99s-Encrypt-SSL.html","content":"\n\n### 获取 Certbot 客户端\n\n``` bash\nwget https://dl.eff.org/certbot-auto\nchmod a+x ./certbot-auto\n./certbot-auto --help\n```\n\n\n### 配置 nginx 、验证域名所有权\n\n在虚拟主机配置文件（ /etc/nginx/conf.d/xxx.com.conf ）中添加如下内容，这一步是为了通过 Let’s Encrypt 的验证，验证 linuxstory.org 这个域名是属于我的管理之下。（具体解释可见下一章“一些补充说明”的“ certbot 的两种工作方式”）\n\n``` bash\nlocation ^~ /.well-known/acme-challenge/ {\n   default_type \"text/plain\";\n   root     /home/wwwroot/xxx.com/;\n}\n\nlocation = /.well-known/acme-challenge/ {\n   return 404;\n}\n```\n\n`/home/wwwroot/xxx.com/`是站点根目录路径\n`xxx.com`替换成自己的域名\n\n\n3、重载 nginx\n\n\n``` bash\nsystemctl restart nginx\n```\n\n4、生成证书\n\n``` bash\n./certbot-auto certonly --webroot -w /home/wwwroot/xxx.com/ -d  xxx.com\n```\n\n证书生成成功后，会有 Congratulations 的提示，并告诉我们证书放在 /etc/letsencrypt/live 这个位置\n\n``` bash\n/etc/letsencrypt/live/xxx.com/fullchain.pem\n/etc/letsencrypt/live/xxx.com/privkey.pem\n```\n\n配置 Nginx修改`/etc/nginx/conf.d/xxx.com.conf`使用 SSL 证书\n\n``` bash\nssl_certificate      /etc/letsencrypt/live/xxx.com/fullchain.pem;\nssl_certificate_key  /etc/letsencrypt/live/xxx.com/privkey.pem;\n```\n\n配置所有http自动跳转到https\n\n``` bash\nserver {\n    listen 80;\n    server_name xxx.com;\n    return 301 https://$server_name$request_uri;\n}\n```\n\n重载 nginx\n\n\n``` bash\nsystemctl restart nginx\n```\n\n### 后续工作\n\n出于安全策略， Let’s Encrypt 签发的证书有效期只有 90 天，所以需要每隔三个月就要更新一次安全证书，虽然有点麻烦，但是为了网络安全，这是值得的也是应该的。好在 Certbot 也提供了很方便的更新方法。\n\n测试`Certbot`进行更新\n\n``` bash\n./certbot-auto renew --dry-run\n```\n\n如果出现类似的结果，就说明测试成功了（总之有 Congratulations 的字眼）\n\n``` bash\nCongratulations, all renewals succeeded. The following certs have been renewed:  \n   /etc/letsencrypt/live/linuxstory.org/fullchain.pem (success)\n** DRY RUN: simulating 'certbot renew' close to cert expiry\n** (The test certificates above have not been saved.)\n```\n\n设置定时任务\n\n出于安全策略， Let’s Encrypt 签发的证书有效期只有 90 天。通过 ./certbot-auto renew 命令可以续签。 编辑 crontab 文件：\n\n``` bash\ncrontab -e\n```\n\n添加 certbot 命令： \n\n在每天凌晨3点运行。该命令将检查服务器上的证书是否将在未来30天内过期，如果是，则进行更新。--quiet 指令告诉 certbot 不要生成输出。\n\n``` bash\n0 3 * * * /root/letsencrypt/certbot-auto renew --quiet\n```\n\n手动更新的方法\n\n``` bash\n./certbot-auto renew -v\n```\n\n自动更新的方法\n\n``` bash\n./certbot-auto renew --quiet --no-self-upgrade\n```\n\n完整的配置示范\n\n``` bash\nserver {\n    listen       80;\n    server_name  xxx.com;\n    return 301 https://$server_name$request_uri;\n}\nserver {\n    listen       443;\n    server_name  xxx.com;\n    root         /usr/share/nginx/test;\n    location / {\n\tindex  index.php index.html index.htm;\n    }\n\t\n\t# php\n\tlocation ~ \\.php$ {\n\tfastcgi_pass unix:/run/php/php7.2-fpm.sock;\n\tfastcgi_index index.php;\n\tfastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n\tinclude fastcgi_params;\n\t}\n\t\n\t# Certbot\n\tlocation ^~ /.well-known/acme-challenge/ {\n\tdefault_type \"text/plain\";\n\troot   /usr/share/nginx/test/;\n\t}\n\tlocation = /.well-known/acme-challenge/ {\n\treturn 404;\n\t}\n\n\t# ssl\n    ssl on;\n    ssl_certificate    /etc/letsencrypt/live/xxx.com/fullchain.pem;\n    ssl_certificate_key    /etc/letsencrypt/live/xxx.com/privkey.pem;\n    #include /etc/letsencrypt/options-ssl-nginx.conf;\n    #ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;\n    ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3;\n    #ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\t\n\n}\n```\n\n\n# certbot泛域名证书\n\n申请命令：\n\n``` bash\ncertbot certonly -d *.xxx.com --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory\n```\n\n`--manual`交互式获取，`--preferred-challenges dns`使用DNS验证的方式（泛域名只能使用DNS验证），`--server`指明支持acme-v02的Server地址，默认是acme-v01的地址。\n\n\n按照要求输入邮箱，同意协议，当看到下面信息：\n\n``` bash \n------------------------------------------------------------\nPlease deploy a DNS TXT record under the name\n_acme-challenge.xxx.com with the following value:\n\nJHkwGFgXq3OgedI-4RU1X0EcFUz7cxIPN7r1Qyw5JTw\n\nBefore continuing, verify the record is deployed.\n------------------------------------------------------------\nPress Enter to Continue\n```\n\n暂停操作，配置域名解析，添加一条TXT类型的解析：\n\n纪录：`_acme-challenge.xxx.com` 结果：`JHkwGFgXq3OgedI-4RU1X0EcFUz7cxIPN7r1Qyw5JTw`\n\n等待3-5分钟，使用以下命令检查解析是否设置成功：\n\n``` bash\ndig -t txt _acme-challenge.xxx.com @8.8.8.8\n```\n\n域名解析结果正确，再回到certbot申请的流程中敲回车，成功后，certbot会提示证书和私钥的路径，接着在nginx中配置并重启即可\n\n\n问题一： `certbot`升级完成后，运行certbot进行泛域名申请时，提示缺少库文件：\n\nNo module named 'requests.packages.urllib3'\n\n通过以下命令安装依赖：\n\n``` bash\npip install requests urllib3 pyOpenSSL --force --upgrade\n```\n\n问题二： 再次运行时，继续提示错误：\n\nImportError: 'pyOpenSSL' module missing required functionality. Try upgrading to v0.14 or newer.\n\n\n通过以下命令修复：\n\n``` bash\npip install --upgrade --force-reinstall 'requests==2.6.0'\n```\n\n注意\n\n申请的泛域名证书*.xxx.com并不能用在xxx.com，所以服务器还是需要两个证书。\n\n","tags":["Nginx"]},{"title":"一个逗比写的逗比脚本","url":"%2FToyoDAdoubi-ssh.html","content":"\n\n[Github](https://github.com/ToyoDAdoubi)  [Telegram](https://t.me/Toyo233)  (https://doub.io)\n账号分别都删库清空删号了\n![](/images/Toyo233-Telegram.jpg)\nfork to (https://github.com/doubi)\n\n## 逗比根据地的镜像站:\n* https://doubmirror.cf\n* https://doub.doubmirror.ga\n* https://doubibackup.com\n* https://doubmirror.ml\n* https://sutmirror.cf\n\n## 代理相关\n\n### ss_go.sh\n\n- 脚本说明: Shadowsocks 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/ss-jc67/\n- 项目地址: https://github.com/shadowsocks/go-shadowsocks2\n\n脚本特点:\n目前网上的各个Shadowsocks脚本基本都是只有 安装/启动/重启 等基础功能，对于小白来说还是不够简单方便。既然是一键脚本，那么就要尽可能地简单，小白更容易接受使用！\n\n下载安装:\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ss-go.sh && chmod +x ss-go.sh && bash ss-go.sh\n```\n\n<!--more-->\n\n---\n### ssr.sh\n\n- 脚本说明: ShadowsocksR 一键安装管理脚本，支持单端口/多端口切换和管理\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/ss-jc42/\n- 项目地址: https://github.com/ToyoDAdoubi/shadowsocksr\n\n脚本特点:\n目前网上的各个ShadowsocksR脚本基本都是只有 安装/启动/重启 等基础功能，对于小白来说还是不够简单方便。既然是一键脚本，那么就要尽可能地简单，小白更容易接受使用！\n\n- 支持 限制 用户速度\n- 支持 限制 端口设备数\n- 支持 显示 当前连接IP\n- 支持 显示 SS/SSR连接+二维码\n- 支持 切换管理 单/多端口\n- 支持 一键安装 锐速\n- 支持 一键安装 BBR\n- 支持 一键封禁 垃圾邮件(SMAP)/BT/PT\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ssr.sh && chmod +x ssr.sh && bash ssr.sh\n```\n\n### ssrmu.sh\n\n- 脚本说明: ShadowsocksR 一键安装管理脚本，支持流量控制\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/ss-jc60/\n- 项目地址: https://github.com/ToyoDAdoubi/shadowsocksr\n\n脚本特点:\n目前网上的各个ShadowsocksR脚本基本都是只有 安装/启动/重启 等基础功能，对于小白来说还是不够简单方便。既然是一键脚本，那么就要尽可能地简单，小白更容易接受使用！\n\n- 支持 限制 用户速度\n- 支持 限制 用户设备数\n- 支持 限制 用户总流量\n- 支持 定时 流量清零\n- 支持 显示 当前连接IP\n- 支持 显示 SS/SSR连接+二维码\n- 支持 一键安装 锐速\n- 支持 一键安装 BBR\n- 支持 一键封禁 垃圾邮件(SMAP)/BT/PT\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ssrmu.sh && chmod +x ssrmu.sh && bash ssrmu.sh\n```\n\n### brook.sh\n\n- 脚本说明: Brook 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/brook-jc3/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/brook.sh && chmod +x brook.sh && bash brook.sh\n```\n\n### goflyway.sh\n\n- 脚本说明: GoFlyway 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/goflyway-jc2/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/goflyway.sh && chmod +x goflyway.sh && bash goflyway.sh\n```\n\n### lightsocks.sh\n\n- 脚本说明: LightSocks 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/lightsocks-jc1/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/lightsocks.sh && chmod +x lightsocks.sh && bash lightsocks.sh\n```\n\n### daze.sh\n\n- 脚本说明: DAZE 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/daze-jc3/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/daze.sh && chmod +x daze.sh && bash daze.sh\n```\n### mtproxy.sh\n\n- 脚本说明: Mtproto Proxy 一键安装管理脚本\n- 系统支持: CentOS7 / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc7/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/mtproxy.sh && chmod +x mtproxy.sh && bash mtproxy.sh\n```\n\n### mtproxy_go.sh\n\n- 脚本说明: Mtproto Proxy Go版 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc9/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/mtproxy_go.sh && chmod +x mtproxy_go.sh && bash mtproxy_go.sh\n```\n\n## 中转相关\n\n### iptables-pf.sh\n\n- 脚本说明: iptables 端口转发 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-20/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/iptables-pf.sh && chmod +x iptables-pf.sh && bash iptables-pf.sh\n```\n\n### brook-pf.sh\n\n- 脚本说明: Brook 端口转发 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-37/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/brook-pf.sh && chmod +x brook-pf.sh && bash brook-pf.sh\n```\n\n### haproxy.sh\n\n- 脚本说明: HaProxy 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-19/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/haproxy.sh && chmod +x haproxy.sh && bash haproxy.sh\n```\n\n### socat.sh\n\n- 脚本说明: Socat 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-18/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/socat.sh && chmod +x socat.sh && bash socat.sh\n```\n\n### tinymapper.sh\n\n- 脚本说明: tinyPortMapper 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-36/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/tinymapper.sh && chmod +x tinymapper.sh && bash tinymapper.sh\n```\n\n## BT下载相关\n\n### aria2.sh\n\n- 脚本说明: Aria2 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc4/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/aria2.sh && chmod +x aria2.sh && bash aria2.sh\n```\n\n### cloudt.sh\n\n- 脚本说明: Cloud Torrent 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-12/\n- 项目地址: https://github.com/jpillora/cloud-torrent\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/cloudt.sh && chmod +x cloudt.sh && bash cloudt.sh\n```\n\n### pserver.sh\n\n- 脚本说明: Peerflix Server 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-13/\n- 项目地址: https://github.com/asapach/peerflix-server\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/pserver.sh && chmod +x pserver.sh && bash pserver.sh\n```\n\n## 服务器相关\n\n### bbr.sh\n\n- 脚本说明: BBR 一键安装管理脚本\n- 系统支持: Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-16/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/bbr.sh && chmod +x bbr.sh && bash bbr.sh\n```\n\n### status.sh\n\n- 脚本说明: ServerStatus 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc3/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/status.sh && chmod +x status.sh && bash status.sh\n```\n\n### ban_iptables.sh\n\n- 脚本说明: iptables 垃圾邮件(SPAM)/BT/PT 一键封禁脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc2/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ban_iptables.sh && chmod +x ban_iptables.sh && bash ban_iptables.sh\n```\n\n### ssh_port.sh\n\n- 脚本说明: SSH 一键修改端口脚本\n- 系统支持: Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/linux-jc11/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ssh_port.sh && chmod +x ssh_port.sh && bash ssh_port.sh\n```\n\n## VPN相关\n\n### ocserv.sh\n\n- 脚本说明: Ocserv AnyConnect 一键安装管理脚本\n- 系统支持: Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/vpnzy-7/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ocserv.sh && chmod +x ocserv.sh && bash ocserv.sh\n```\n\n## DNS相关\n\n### dowsdns.sh\n\n- 脚本说明: DowsDNS 一键安装管理脚本\n- 系统支持: CentOS7 / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/dowsdns-jc3/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/dowsdns.sh && chmod +x dowsdns.sh && bash dowsdns.sh\n```\n\n## HTTP相关\n\n### caddy_install.sh\n\n- 脚本说明: Caddy 一键安装脚本\n- 系统支持: CentOS6+ / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc1\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/caddy_install.sh && chmod +x caddy_install.sh && bash caddy_install.sh\n```\n\n插件和Caddy是集成在一起的(单个二进制文件)，多个插件必须同时安装。\n例如同时安装 http.filemanager 和 http.webdav插件：\n``` bash\nbash caddy_install.sh http.filemanager,http.webdav\n```\n卸载命令：\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/caddy_install.sh && chmod +x caddy_install.sh && caddy_install.sh uninstall\n```\n\n### pythonhttp.sh\n\n- 脚本说明: SimpleHTTPServer 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-8/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/pythonhttp.sh && chmod +x pythonhttp.sh && bash pythonhttp.sh\n```\n\n## 其他\n\n### adbyby.sh\n\n- 脚本说明: ADbyby 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/adbyby-jc2/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/adbyby.sh && chmod +x adbyby.sh && bash adbyby.sh\n```\n\n### gfw_push.sh\n\n- 脚本说明: 监测服务器IP是否被墙并推送至 Telegram 一键脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc8/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/gfw_push.sh && chmod +x gfw_push.sh && bash gfw_push.sh\n```\n\n### libsodium.sh\n\n- 脚本说明: libsodium 一键安装管理脚本\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc6/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/libsodium.sh && chmod +x libsodium.sh && bash libsodium.sh\n```\n\n### ssr_check.sh\n\n- 脚本说明: ShadowsocksR 批量快速验证账号可用性\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/ss-jc56/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ssr_check.sh && chmod +x ssr_check.sh\n```\n\n### ssrstatus.sh\n\n- 脚本说明: ShadowsocksR 账号在线监控网站\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/shell-jc5/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ssrstatus.sh && chmod +x ssrstatus.sh && bash ssrstatus\n```\n\n### ssr_ip_check.sh\n\n- 脚本说明: ShadowsocksR 检测每个端口链接IP数\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/ss-jc50/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/ssr_ip_check.sh && chmod +x ssr_ip_check.sh\n```\n\n### ~~pipes.sh~~\n\n- 脚本说明: PipeSocks 一键安装管理脚本（该软件已停更）\n- 系统支持: CentOS7 / Debian7+ / Ubuntu14+\n- 使用方法: https://doub.io/pipesocks-jc2/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/pipesocks/install/master/install.sh && mv install.sh pipes.sh && chmod +x pipes.sh && bash pipes.sh\n```\n\n### ~~gogo.sh~~\n\n- 脚本说明: GoGo Tunnel 一键安装管理脚本（该软件已停更）\n- 系统支持: CentOS6+ / Debian6+ / Ubuntu14+\n- 使用方法: https://doub.io/wlzy-24/\n\n下载安装:\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/doubi/master/gogo.sh && chmod +x gogo.sh && bash gogo.sh\n```\n\n### wireguard_install_centos7\n\n- 脚本说明: wireguard_install_centos7\n- 系统支持: CentOS7不支持OVZ\n- 使用方法: https://www.atrandys.com/2018/886.html\n\n下载安装:\n\n``` bash\nyum install -y wget && wget https://raw.githubusercontent.com/yobabyshark/wireguard/master/wireguard_install.sh && chmod +x wireguard_install.sh && ./wireguard_install.sh\n```\n\nfork版本\n\n``` bash\nyum install -y wget && wget https://raw.githubusercontent.com/ojbk8/doubi/master/wireguard_install_centos7.sh && chmod +x wireguard_install_centos7.sh && ./wireguard_install_centos7.sh\n```\n使用xftp等ftp工具连接vps，进入/etc/wireguard/目录，然后将client.conf下载到本地电脑\n\n### LotServer.sh\n\n安装LotServer\n\n``` bash\nwget --no-check-certificate -qO /tmp/appex.sh \"https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh\" && bash /tmp/appex.sh 'install'\n```\n\n卸载LotServer\n\n``` bash\nwget --no-check-certificate -qO /tmp/appex.sh \"https://raw.githubusercontent.com/0oVicero0/serverSpeeder_Install/master/appex.sh\" && bash /tmp/appex.sh 'uninstall'\n```\n\n其它配置\n\n``` bash\n/appex/bin/serverSpeeder.sh start\n/appex/bin/serverSpeeder.sh stop\n/appex/bin/serverSpeeder.sh restart\n/appex/bin/serverSpeeder.sh status\n/appex/bin/serverSpeeder.sh renewLic\n```\n","tags":["ToyoDAdoubi"],"categories":["教程"]},{"title":"VMwareWorkstation单臂路由配置安装openwrt(LEDE)单网卡国际互联网","url":"%2Frouter-on-a-stick-VMwareWorkstation-openwrt-lede.html","content":"\n\n为什么要配置虚拟机环境\n出差时，比如udp2raw等个别软件只能在LINUX环境才能使用，而在WIN环境下就没法例用它。\n\n\n### 所需要的软件\n\n* [VMware Workstation 15 Pro](https://www.vmware.com/products/workstation-pro/workstation-pro-evaluation.html) 注册码SN:`ZY1MK-4UD80-M81VY-RZYNX-Z22X2`\n* [StarWind V2V Converter](https://www.starwindsoftware.com/starwind-v2v-converter) \n* [KoolShare 固件](http://firmware.koolshare.cn/LEDE_X64_fw867)  *选择普通的就行，不一定非要虚拟机转盘或PE下写盘专用*\n\n### 使用StarWind V2V-Image Converter转换格式\n\n`Image format`选择`Vmware growable image`\n\n![](/images/StarWind V2V-Image Converter-1.png)\n\n![](/images/StarWind V2V-Image Converter-2.png)\n\n\n### 配置VMware Workstation\n开始新建虚拟机，选择`稍后安装操作系统`\n\n![](/images/openwrt-lede-VMware-Workstation-1.png)\n\n客户机操作系统选择`Linx`版本`其它Linx 4.X或更高版本内核64位` \n\n![](/images/openwrt-lede-VMware-Workstation-2.png)\n\n![](/images/openwrt-lede-VMware-Workstation-3.png)\n\n一路默认完成创建,`编辑虚拟机设置`\n删除打印机(可选)，删除原有的硬盘，然后添加硬盘`使用现有虚拟磁盘` 找到刚才转换好的后缀为.vmdk格式的并使用它。\n\n\n![](/images/openwrt-lede-VMware-Workstation-4.png)\n\n![](/images/openwrt-lede-VMware-Workstation-5.png)\n\n`网络适配器`中的`网络连接`选择`桥接模式(B):直接连接物理网络`\n\n![](/images/openwrt-lede-VMware-Workstation-6.png)\n\n### 配置LEDE软路由\n\n配置网络 \n``` bash\nvi /etc/config/network\n```\n\n这里有2种联网方式\n\n#### 通过上级路由器拨号上网\n\n上级路由器已经设置好了拨号上网。\n假设宿主机路由器的网关为10.10.10.1\n![](/images/openwrt-lede-VMware-Workstation-7.png)\n此时可以删除WAN口(可选)，也可以保留。\n![](/images/openwrt-lede-VMware-Workstation-8.png)\n上图中上级拨号路由器的IP地址为`10.10.10.1`虚拟机软路由器的IP地址为`10.10.10.11` 按实际IP修改\n\n1. `IPV4 网关`务必一定要设置成上级路由器的IP地址\n2. `IPV4 地址`必须要跟上级路由器在同一个网段内\n3. `DNS`可以设置成公共DNS，也可以使用运营商的。\n\n联网后去`酪软中心`安装`科学上网`插件并配置好以后\n其它设置，包括本机电脑的只要网关设置成`10.10.10.11`就能享受国际互联网了。\n\n#### 在虚拟机路由器里拨号上网\n\n待完善中... ...\n","tags":["VMwareWorkstation"],"categories":["教程"]},{"title":"Koolshare-openwrt-lede屏蔽360腾讯的方法","url":"%2Fkoolshare-shield-tencent-360.html","content":"\n登陆后依次进入`系统`,`进阶设置`,`配置dnsmasq`\n或者在`/etc/dnsmasq.conf`添加以下内容\n\n### 屏蔽腾讯的方法\n``` bash\naddress=/qq.com/127.0.0.1\naddress=/tencent.com/127.0.0.1\naddress=/qcloud.com/127.0.0.1\naddress=/gtimg.com/127.0.0.1\naddress=/gtimg.cn/127.0.0.1\naddress=/qpic.cn/127.0.0.1\naddress=/qlogo.cn/127.0.0.1\naddress=/url.cn/127.0.0.1\n```\n\n### 屏蔽360腾讯的方法\n``` bash\naddress=/360.cn/127.0.0.1\naddress=/360.com/127.0.0.1\naddress=/so.com/127.0.0.1\naddress=/i360mall.com/127.0.0.1\naddress=/360shouji.com/127.0.0.1\naddress=/360.net/127.0.0.1\naddress=/360totalsecurity.com/127.0.0.1\n```\n\n\nPS **抓包网址还不够全面，且对UDP流量不起作用**  欢迎留言补充\n","tags":["Koolshare"],"categories":["教程"]},{"title":"TCP加速bbr魔改plus锐速lotserver一键安装包","url":"%2Flinux-tcp-bbr-lotserver.html","content":"\n\n整出了一个集合BBR、BBR魔改、BBR plus、锐速四合一的脚本\n本脚本支持KVM架构的VPS，不支持OpenVZ。\n\n\n> 项目地址：(https://github.com/cx9208/Linux-NetSpeed)\n\n# 安装\n\n``` bash\nwget https://github.com/ojbk8/Linux-NetSpeed/raw/master/tcp.sh\nchmod +x tcp.sh\n./tcp.sh\n```\n\n先换成对应加速\n出现弹窗按`TAB键`切换选择`No`回车删除原内核\n\n![](/images/tcp-bbrplus-lotserver.png)\n\n重启后\n\n``` bash\n./tcp.sh\n```\n\n开启加速\n\n\n \n","tags":["lotserver"],"categories":["教程"]},{"title":"Debian和Ubuntu安装最新的MySQL修改密码卸载清理","url":"%2FDebian-Ubuntu-install-MySQL-uninstall.html","content":"\nDebian 9上安装最新的MySQL\n\n在Debian 9中，MySQL项目的社区分支MariaDB被打包为默认的MySQL变体。虽然MariaDB在大多数情况下运行良好，但如果您需要仅在Oracle的MySQL中找到的功能，则可以从MySQL开发人员维护的存储库中安装和使用软件包。\n\n# 安装MySQL\n\n首先添加MySQL软件库\n\nMySQL开发人员提供了一个.deb包，用于处理配置和安装官方MySQL软件存储库。一旦设置了存储库，我们就可以使用Ubuntu的标准apt命令来安装该软件。我们将使用wget下载此.deb文件，然后使用该dpkg命令进行安装。\n\n首先，在Web浏览器中加载[MySQL下载页面](https://dev.mysql.com/downloads/repo/apt/)。找到右下角的“ 下载”按钮，然后单击下一页。此页面将提示您登录或注册Oracle Web帐户。我们可以跳过这一点，而是寻找说不用的链接，只需启动我的下载。右键单击该链接并选择“ 复制链接地址”（此选项的措辞可能不同，具体取决于您的浏览器）。\n\n现在我们要下载文件了。在您的服务器上，移动到您可以写入的目录。使用wget下载文件，记住粘贴刚刚复制的地址代替下面突出显示的部分：\n\n\n``` bash\ncd /tmp\nwget https://dev.mysql.com/get/mysql-apt-config_0.8.13-1_all.deb\n```\n\n该文件现在应该下载到我们当前的目录中`ls`列出文件以确保：\n\n您应该看到列出的文件名：\n\n``` bash\nmysql-apt-config_0.8.13-1_all.deb\n```\n\n现在我们准备安装：\n\n``` bash\ndpkg -i mysql-apt-config*\n```\n\ndpkg将会被用于安装，删除和检查.deb软件包。该-i标志表示我们要从指定的文件安装。\n\n在安装过程中，您将看到一个配置屏幕，您可以在其中指定您喜欢的MySQL版本，以及为其他MySQL相关工具安装存储库的选项。默认值将添加最新稳定版MySQL的存储库信息，而不是其他任何内容。这就是我们想要的，所以使用向下箭头导航到Ok菜单选项并点击ENTER。\n\n该包现在将完成添加存储库。刷新apt包缓存以使新软件包可用：\n\n``` bash\ndpkg-reconfigure mysql-apt-config\napt-get update\n```\n\n添加了存储库并使用我们的软件包缓存进行了新近更新\n\n安装MySQL\n\n我们现在可以使用apt安装最新的MySQL服务器软件包：\n\n``` bash\napt install mysql-server\n```\n\n状态查询\n\n``` bash\nsystemctl status mysql\n```\n\n# 修改MYSQL的初使密码\n\n``` bash\nmysql -u root -p\n```\n\n用安装时设置的密码登陆\n\n``` bash\nuse mysql\n```\n\n开始修改密码\n\n``` bash\nupdate user set authentication_string=password('yournewpassword') where user='root';\n```\n\n退出\n\n``` bash\nexit\n```\n\n经过我们修改MYSQL的初使密码后，方可以顺利登陆phpMyAdmin管理\n\n用SET PASSWORD命令\n\n``` bash\nmysql -u root\nmysql> SET PASSWORD FOR 'root'@'localhost' = PASSWORD('yournewpassword');\n```\n\n最后重启一下MySQL\n\n``` bash\nsystemctl restart mysql\n```\n\n# 卸载清理MYSQL\n\n首先你可以通过\n\n``` bash\ndpkg --get-selections | grep mysql\n```\n\n命令罗列出你电脑上安装的和MySQL相关的软件，然后purge卸载\n\n``` bash\napt-get --purge remove mysql-server\napt-get --purge remove mysql-client\napt-get --purge remove mysql-common\napt-get --purge remove mysql-apt-config\napt-get --purge remove mysql-community-client\napt-get --purge remove mysql-community-server\n```\n\n上面列出的安装MYSQL组件列表会不一样，请根据自己的实际操作。\n\n最后再通过下面的命令清理残余：\n\n``` bash\napt-get autoremove\napt-get autoclean\nrm /etc/mysql/ -R\nrm /var/lib/mysql/ -R\n```\n\n至此卸载清理工作全部完成\n","tags":["Ubuntu"],"categories":["教程"]},{"title":"docker创建删除使用容器或镜像","url":"%2Fdocker-images.html","content":"\n*更多容器可以访问[docker](https://www.docker.com/)的[Docker Hub](https://hub.docker.com/)*\n\n操作系统内核大于等于 3.10 的都可以安装最新版 Docker 查看内核版本\n\n``` bash\nuname -r\n```\n\n### 安装docker\n``` bash\nwget -qO- get.docker.com | bash \n```\n\n安装完成后，运行下面的命令，验证是否安装成功。\n``` bash\ndocker version \n```\n\n<!--more-->\n\n启动 Docker\n``` bash\nsystemctl start docker \n```\n查看 Docker 启动状态\n``` bash\nsystemctl status docker\n```\n允许 Docker 开机自启\n``` bash\nsystemctl enable docker \n```\n\n解决`docker-compose: command not found`的方法\n\n您还需要安装Docker Compose。见 [手册](https://docs.docker.com/compose/install/)。以下是您需要执行的命令\n\n```\ncurl -L https://github.com/docker/compose/releases/download/1.16.1/docker-compose-`uname -s`-`uname -m` > ./docker-compose\nsudo mv ./docker-compose /usr/bin/docker-compose\nsudo chmod +x /usr/bin/docker-compose\n```\n\n### Docker 清理命令\n杀死所有正在运行的容器.\n``` bash\nalias dockerkill='docker kill $(docker ps -a -q)'\n```\n\n删除所有已经停止的容器.\n\n``` bash\nalias dockercleanc='docker rm $(docker ps -a -q)'\n```\n\n删除所有未打标签的镜像.\n\n``` bash\nalias dockercleani='docker rmi $(docker images -q -f dangling=true)'\n```\n\n删除所有已经停止的容器和未打标签的镜像.\n\n``` bash\nalias dockerclean='dockercleanc || true && dockercleani'\n```\n\n删除所有未运行 Docker 容器\ndocker rm $(docker ps -a -q)\n删除所有 Docker 镜像\n删除所有未打 tag 的镜像\n\ndocker rmi $(docker images -q | awk '/^<none>/ { print $3 }')\n删除所有镜像\n\ndocker rmi $(docker images -q)\n根据格式删除所有镜像\n\ndocker rm $(docker ps -qf status=exited)\n\n\ndocker images\ndocker tag IMAGE_ID  <hub-user>/<repo-name>[:<tag>]\ndocker login\n#docker push 镜像到docker hub 的仓库\ndocker push <hub-user>/<repo-name>:<tag>\ndocker images\n镜像的保存\ndocker save IMAGE_ID > newname.tar\n镜像的导入\ndocker load < tnewname.tar\n\n保存对容器的修改，示范\ndocker commit cb439fb2c714 mxnet/python:gpu\n\n停用全部运行中的容器:\n\n```\ndocker stop $(docker ps -q)\n```\n\n删除全部容器：\n\n```\ndocker rm $(docker ps -aq)\n```\n\n\n一条命令实现停用并删除容器：\n\n``` bash\ndocker stop $(docker ps -q) & docker rm $(docker ps -aq)\n```\n\n``` bash\ndocker system prune -y\ndocker image prune --force --all -y\n```\n\n更新docker 1.13 中增加了 `docker system prune`的命令，针对container、image可以使用`docker container prune`、`docker image prune`命令。\n\n- `docker image prune --force --all`或者`docker image prune -f -a` : 删除所有不使用的镜像\n- `docker container prune -f`: 删除所有停止的容器\n\n\ndocker中如何删除image（镜像）\n\n``` bash\ndocker images\ndocker ps -a\n```\n\n查看docker的帮助会发现有两个与删除有关的命令rm和rmi\n\n``` bash\nrm Remove one or more containers\nrmi Remove one or more images\n```\n\n\n``` bash\ndocker rmi ID\n```\n\n\n``` bash\ndocker pull ubuntu\ndocker run -t -i ubuntu /bin/bash\n```\n\n### 使用示例\n1. nginx\n\n``` bash\ndocker pull nginx\ndocker run --name some-nginx -d -p 8080:80 some-content-nginx\n```\n\nThen you can hit http://localhost:8080 or http://host-ip:8080 in your browser.\n\n\n2. shadowsocks-libev-teddysun\n\n``` bash\ndocker pull teddysun/shadowsocks-libev:alpine\n```\n\n在宿主机上创建配置文件\n``` bash\necho \"{\n    \"server\":\"0.0.0.0\",\n    \"server_port\":9000,\n    \"password\":\"password0\",\n    \"timeout\":300,\n    \"method\":\"aes-256-gcm\",\n    \"fast_open\":true,\n    \"nameserver\":\"8.8.8.8\",\n    \"mode\":\"tcp_and_udp\",\n    \"plugin\":\"obfs-server\",\n    \"plugin_opts\":\"obfs=tls\"\n} \" > /etc/shadowsocks-libev/config.json\n```\n\n启动容器\n\n``` bash\ndocker run -d -p 9000:9000 -p 9000:9000/udp --name ss-libev -v /etc/shadowsocks-libev:/etc/shadowsocks-libev teddysun/shadowsocks-libev \n```\n\n介绍\n\n- docker run：开始运行一个容器。\n- -d 参数：容器以后台运行并输出容器 ID。\n- -p 参数：容器的 9000 端口映射到本机的 9000 端口。默认是映射 TCP，当需要映射 UDP 时，那就再追加一次 UDP 的映射。冒号后面是容器端口，冒号前面是宿主机端口，可以写成一致，也可以不一致。\n- –name 参数：给容器分配一个识别符，方便将来的启动，停止，删除等操作。\n- -v 参数：挂载卷(volume)，冒号后面是容器的路径，冒号前面是宿主机的路径，可以写成一致，也可以不一致。\n- teddysun/shadowsocks-libev：这是拉取回来的镜像路径。\n","tags":["docker"],"categories":["教程"]},{"title":"hexo文章编辑模版示范","url":"%2Fhexo-edit-Markdown.html","content":"\n\n\n``` bash\neefef\n```\n\n`这是灰底字`\n\n### 修改字体颜色/大小/背景色\n如果想自定义字体大小以及颜色，可以直接在 Markdown 文档中使用 html 语法\n\n``` bash\n<font size=4 > 这里输入文字，自定义字体大小 </font>\n<font color=\"#FF0000\"> 这里输入文字，自定义字体颜色</font> \n<span style=\"background-color: #ff6600;\">这里输入文字，自定义字体背景色</span>\n<font color=\"#000000\" size=4><span style=\"background-color: #ADFF2F;\">这是综合起来的效果 </span></font>\n<font color=\"#FFFFFF\" size=4><span style=\"background-color: #68228B;\">这是综合起来的效果2 </span></font>\n```\n\n\n<!--more-->\n\n\n其中#FF0000为RGB颜色代码，读者可去[RGB颜色查询对照表网站](/rgb.html)查找自己喜欢的颜色。\n\n若想在RGB颜色值与十六进制颜色码之间相互转化，可查看[该网站](http://link.zhihu.com/?target=http%3A//www.sioe.cn/yingyong/yanse-rgb-16/)。\n\n<font size=4 > 这里输入文字，自定义字体大小 </font>\n<font color=\"#FF0000\"> 这里输入文字，自定义字体颜色</font> \n<span style=\"background-color: #ff6600;\">这里输入文字，自定义字体背景色</span>\n<font color=\"#000000\" size=4><span style=\"background-color: #ADFF2F;\">这是综合起来的效果 </span></font>\n<font color=\"#FFFFFF\" size=4><span style=\"background-color: #68228B;\">这是综合起来的效果2 </span></font>\n\n\n### 文本居中对齐\n\n``` bash\n{% centerquote %}blah blah blah{% endcenterquote %}\n```\n\n展示如下\n\n{% centerquote %}blah blah blah{% endcenterquote %}\n\n\n### 插入代码\n\n``` bash \n``` bash\n```\n\n演示效果\n\n``` bash \nbash xxx.sh\n```\n\n### 插入表格\n``` bash\n|函数名|功能|其它|\n|----|----|----|\n|max|求最大值|其它1|\n|min|求最小值|其它2|\n```\n演示效果\n\n|函数名|功能|其它|\n|----|----|----|\n|max|求最大值|其它1|\n|min|求最小值|其它2|\n","tags":["hexo"],"categories":["教程"]},{"title":"Debian和Ubuntu安装php7.2","url":"%2FDebian-Ubuntu-install-php7.2.html","content":"\n适用系统： \n\n* Ubuntu 16.04 LTS \n* Ubuntu 14.04 LTS \n* Debian 9 stretch \n* Debian 8 jessie\n\n# 安装 PHP\n\nOnd?ej Sury 的 PHP PPA 为 Ubuntu 16.04/14.04 提供了 PHP7.2 版本，同时也有通过个人网站为 Debian 9/8 提供 PHP7.2 版本，因此 Ubuntu 是源于 Debian 所以基本可以通用，同时维护难度较低，软件源安装的 PHP 默认以 Unix Socket 的状态运行在 /run/php/php7.1-fpm.sock，比使用 TCP 以 localhost:9000 的方式性能更好。\n\n\n# 添加软件源\n\n> Ubuntu安装软件源拓展工具：\n\n``` bash\napt -y install software-properties-common apt-transport-https lsb-release ca-certificates\n```\n\n添加 Ond?ej Sury 的 PHP PPA 源，需要按一次回车：\n\n``` bash\nadd-apt-repository ppa:ondrej/php\n```\n\n更新软件源缓存：\n\n``` bash\napt update\n```\n\n> Debian安装软件源拓展工具：\n\n``` bash\napt -y install software-properties-common apt-transport-https lsb-release ca-certificates\n```\n\n添加 GPG\n\n``` bash\nwget -O /etc/apt/trusted.gpg.d/php.gpg https://mirror.xtom.com.hk/sury/php/apt.gpg\n```\n\n添加 sury 软件源\n\n``` bash\nsh -c 'echo \"deb https://mirror.xtom.com.hk/sury/php/ $(lsb_release -sc) main\" > /etc/apt/sources.list.d/php.list'  \n```\n\n更新软件源缓存：\n\n``` bash\napt-get update\n```\n\n# 安装 PHP7.2：\n\n``` bash\napt install php7.2-fpm php7.2-mysql php7.2-curl php7.2-gd php7.2-mbstring php7.2-xml php7.2-xmlrpc php7.2-zip php7.2-opcache -y\n```\n\n\n> 设置 PHP\n\n安装完成后，编辑 /etc/php/7.2/fpm/php.ini 替换换 ;cgi.fix_pathinfo=1 为 cgi.fix_pathinfo=0 快捷命令：\n\n``` bash\nsed -i 's/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/' /etc/php/7.2/fpm/php.ini\n```\n\n> 管理 PHP\n\n安装好了先重启一下！\n\n``` bash\nsystemctl restart php7.2-fpm\n```\n\n> 更多操作：\n\n\n``` bash\nphp -v #查看PHP版本号\nsystemctl restart php7.2-fpm #重启\nsystemctl start php7.2-fpm #启动\nsystemctl stop php7.2-fpm #关闭\nsystemctl status php7.2-fpm #检查状态\n```\n\n> 更新 PHP\n\n运行下面的命令系统就会更新所有可以更新的软件包括 PHP\n\n``` bash\napt update\napt upgrade -y\n```\n\n\n安装更多组件\n\n\n``` bash\napt-cache search php7.2\n```\n\n上面的一条命令安装 PHP 只是安装了部分 PHP 拓展，更多的软件可见：\n\n``` bash\nphp-radius - radius client library for PHP\nphp-http - PECL HTTP module for PHP Extended HTTP Support\nphp-uploadprogress - file upload progress tracking extension for PHP\nphp-yaml - YAML-1.1 parser and emitter for PHP\nphp-mongodb - MongoDB driver for PHP\nphp-apcu - APC User Cache for PHP\nphp-imagick - Provides a wrapper to the ImageMagick library\nphp-ssh2 - Bindings for the libssh2 library\nphp-redis - PHP extension for interfacing with Redis\nphp-memcached - memcached extension module for PHP, uses libmemcached\nphp-apcu-bc - APCu Backwards Compatibility Module\nphp-rrd - PHP bindings to rrd tool system\nphp-uuid - PHP UUID extension\nphp-memcache - memcache extension module for PHP\nphp-zmq - ZeroMQ messaging bindings for PHP\nphp-igbinary - igbinary PHP serializer\nphp-msgpack - PHP extension for interfacing with MessagePack\nphp-geoip - GeoIP module for PHP\nphp-tideways - Tideways PHP Profiler Extension\nphp-yac - YAC (Yet Another Cache) for PHP\nphp-mailparse - Email message manipulation for PHP\nphp-oauth - OAuth 1.0 consumer and provider extension\nphp-gnupg - PHP wrapper around the gpgme library\nphp-propro - propro module for PHP\nphp-raphf - raphf module for PHP\nphp-solr - PHP extension for communicating with Apache Solr server\nphp-stomp - Streaming Text Oriented Messaging Protocol (STOMP) client module for PHP\nphp-gearman - PHP wrapper to libgearman\nphp-phalcon - full-stack PHP framework delivered as a C-extension\nphp-ds - PHP extension providing efficient data structures for PHP 7\nphp-sass - PHP bindings to libsass - fast, native Sass parsing in PHP\nphp-lua - PHP Embedded lua interpreter\nlibapache2-mod-php7.2 - server-side, HTML-embedded scripting language (Apache 2 module)\nlibphp7.2-embed - HTML-embedded scripting language (Embedded SAPI library)\nphp7.2-bcmath - Bcmath module for PHP\nphp7.2-bz2 - bzip2 module for PHP\nphp7.2-cgi - server-side, HTML-embedded scripting language (CGI binary)\nphp7.2-cli - command-line interpreter for the PHP scripting language\nphp7.2-common - documentation, examples and common module for PHP\nphp7.2-curl - CURL module for PHP\nphp7.2-dba - DBA module for PHP\nphp7.2-dev - Files for PHP7.2 module development\nphp7.2-enchant - Enchant module for PHP\nphp7.2-fpm - server-side, HTML-embedded scripting language (FPM-CGI binary)\nphp7.2-gd - GD module for PHP\nphp7.2-gmp - GMP module for PHP\nphp7.2-imap - IMAP module for PHP\nphp7.2-interbase - Interbase module for PHP\nphp7.2-intl - Internationalisation module for PHP\nphp7.2-json - JSON module for PHP\nphp7.2-ldap - LDAP module for PHP\nphp7.2-mbstring - MBSTRING module for PHP\nphp7.2-mysql - MySQL module for PHP\nphp7.2-odbc - ODBC module for PHP\nphp7.2-opcache - Zend OpCache module for PHP\nphp7.2-pgsql - PostgreSQL module for PHP\nphp7.2-phpdbg - server-side, HTML-embedded scripting language (PHPDBG binary)\nphp7.2-pspell - pspell module for PHP\nphp7.2-readline - readline module for PHP\nphp7.2-recode - recode module for PHP\nphp7.2-snmp - SNMP module for PHP\nphp7.2-soap - SOAP module for PHP\nphp7.2-sqlite3 - SQLite3 module for PHP\nphp7.2-sybase - Sybase module for PHP\nphp7.2-tidy - tidy module for PHP\nphp7.2-xml - DOM, SimpleXML, WDDX, XML, and XSL module for PHP\nphp7.2-xmlrpc - XMLRPC-EPI module for PHP\nphp7.2-zip - Zip module for PHP\nphp7.2-xsl - XSL module for PHP (dummy)\nphp7.2 - server-side, HTML-embedded scripting language (metapackage)\nphp7.2-sodium - libsodium module for PHP\n```\n\n以后内容转载自 https://www.mf8.biz/debian-install-php7-2/\n\n# Caddy调用PHP7.2\n\n在`/etc/caddy/Caddyfile`中添加以下代码\n\n``` bash\nfastcgi / /run/php/php7.2-fpm.sock php\n```\n","tags":["php"],"categories":["教程"]},{"title":"静态网站生成器hugo安装配置主题","url":"%2Fhugo-install-themes.html","content":"\n## install-hugo\n\n下载[Hugo](https://github.com/gohugoio/hugo/releases) 对应平台解压得到二进制文件\n\n\n### Linux安装hugo\n\n以64bit为例，此安装方法适用于debian ubuntu centos openwrt等X64位的系统\n\n``` bash\nwget https://github.com/gohugoio/hugo/releases/download/v0.54.0/hugo_0.54.0_Linux-64bit.tar.gz\ntar zxvf hugo_0.54.0_Linux-64bit.tar.gz\nmv hugo /usr/bin/hugo\n```\n\n### Windows安装hugo\n\n下载[hugo_extended_0.54.0_Windows-64bit.zip](https://github.com/gohugoio/hugo/releases/download/v0.54.0/hugo_extended_0.54.0_Windows-64bit.zip) 并解压缩\n\n``` bash\nC:\\Hugo\\bin\n - hugo.exe\n - LICENSE\n - README.md\n```\n\n添加到PATH\n\n``` bash\nset PATH=%PATH%;C:\\Hugo\\bin\n```\n\n### 验证是否安装成功\n\n``` bash\nhugo version\n```\n\n能看到Hugo版本号说明已经成功安装好了hugo\n\n``` bash\nC:\\Hugo>set PATH=%PATH%;C:\\Hugo\\bin\n\nC:\\Hugo>hugo version\nHugo Static Site Generator v0.54.0/extended windows/amd64 BuildDate: unknown\n\nC:\\Hugo>\n```\n\n## Hugo新建网站\n\n使用以下命令新建站点\n\n``` bash\nhugo new site blog\n```\n\nHugo会自动新建名为`blog`的文件夹\n\n``` bash\nC:\\HUGO\\BLOG\n├─archetypes\n├─content\n├─data\n├─layouts\n├─static\n└─themes\n```\n\n文件夹描述相关\n\n- `archetypes`使用hugu new post生成新文章的模板，可以自定义里面的值\n- `content` 存放网站内容\n- `data` 存储Hugo在生成您的网站时可以使用的配置文件\n- `layouts` 以.html文件的形式存储模板，指定如何将内容的视图呈现到静态网站中\n- `static` 存储所有静态内容：图像，CSS，JavaScript等，当Hugo构建您的站点时，静态目录中的所有资产都将按原样复制\n- `themes` 存放主题\n- `config.toml` 配置文件\n\n进入`blog`的文件夹\n\n``` bash\nhugo\n```\n\n生成静态网站`public` \n\n``` bash\nhugo server\n```\n\n## 主题安装\n\n先去[Hugo官方主题](https://themes.gohugo.io)中选择一个自己中意的\n\n通过git submodule add以Git子模块的方式下载（推荐）\n\n进入网站文件夹，使用git init初始化后再下载主题\n\n``` bash\ncd example.com\ngit init\ngit submodule add https://github.com/olOwOlo/hugo-theme-even.git themes/even\n```\n\n通过git clone下载（此方式下载的主题带有.git和网站本身的Git版本控制产生冲突）\n\n进入网站文件夹，使用git clone直接下载\n\n``` bash\ngit clone https://github.com/olOwOlo/hugo-theme-even themes/even\n```\n\n\n复制主题的配置文件\n\n下载完后，找到主题目录`/themes/even/exampleSite`下的配置文件`config.toml`，将该文件复制到网站文件夹下替换原来的`config.toml`，根据需求更改配置文件即可。也可以同时将`/themes/even/exampleSite`下的全部文件复制到网站目录下，`/themes/even/exampleSite/content`包含了一些示例文章可作参考\n把文章模版`/themes/even/archetypes/default.md`覆盖掉`/archetypes/default.md`\n\n创建一篇文章\n\n``` bash\nhugo new post/my-first-post.md\n```\n\n\n文章会保存在coneten/post目录下\n\n``` bash\nhugo server -D\n```\n\n\n","tags":["hugo"],"categories":["教程"]},{"title":"rclone成功挂载GoogleDrive和MicrosoftOneDrive自动上传","url":"%2Frclone-upload-GoogleDrive-MicrosoftOneDrive.html","content":"\n使用前请确保已经rclone成功挂载GoogleDrive或MicrosoftOneDrive [搭建教程](/rclone-upload-googledrive-microsoftonedrive.html)\n\n **实现功能** \n\n1. 自动上传\n2. 删除本地文件\n\n避免占用本地磁盘空间。\n\n适用于`rclone`或`aria2`\n\n``` bash\necho \"#!/bin/bash\ndownloadpath='/root/Download' #需要上传的目录，Aria2下载目录\nname='gdrive' #配置Rclone时填写的name\nfolder='/rclone' #网盘里的文件夹，留空为整个网盘。\nMinSize='10k' #限制最低上传大小，默认10k，BT下载时可防止上传其他无用文件。会删除文件，谨慎设置。\nMaxSize='15G' #限制最高文件大小，默认15G，OneDrive上传限制。\n\nfilepath=$3 #Aria2传递给脚本的原始路径，如果是单文件则为/root/Download/1.mp4，如果是文件夹则该值为文件夹内第一个文件比如/root/Download/a/b/1.mp4\nrdp=${filepath#${downloadpath}/} #路径转换，去掉开头的下载路径。\npath=${downloadpath}/${rdp%%/*} #文件或文件夹路径。如果是单个文件，应与原始路径一致。\n\nif [ $2 -eq 0 ]\n\tthen\n\t\texit 0\nfi\n\nwhile true; do\nif [ \"$path\" = \"$filepath\" ] && [ $2 -eq 1 ] #如果下载的是单个文件\n\tthen\n\trclone move -v \"$filepath\" ${name}:${folder} --min-size $MinSize --max-size $MaxSize\n\trm -vf \"$filepath\".aria2 #删除残留的.aria.2文件\n\texit 0\nelif [ \"$path\" != \"$filepath\" ] #如果下载的是文件夹\n\tthen\n\twhile [[ \"`ls -A \"$path/\"`\" != \"\" ]]; do\n\trclone move -v \"$path\" ${name}:\"${folder}\"/\"${rdp%%/*}\" --min-size $MinSize --max-size $MaxSize --delete-empty-src-dirs\n\trclone delete -v \"$path\" --max-size $MinSize #删除多余的文件\n\trclone rmdirs -v \"$downloadpath\" --leave-root #删除空目录，--delete-empty-src-dirs参数已实现，加上无所谓。\n\tdone\n\trm -vf \"$path\".aria2 #删除残留的.aria2文件\n\texit 0\nfi\ndone\" >> /root/upload.sh\n```\n\n**记得修改里面的路径为自己的**\n\n``` bash\ndownloadpath='/root/Download' #需要上传的目录，Aria2下载目录\nname='gdrive' #配置Rclone时填写的name\nfolder='/rclone' #网盘里的文件夹，留空为整个网盘。\n```\n\n授予可执行权限\n\n``` bash\nchmod +x upload.sh\n```\n\n运行\n\n``` bash\nbash upload.sh\n```\n","tags":["rclone"]},{"title":"一键安装 Caddy+PHP7+Sqlite3 环境","url":"%2FCaddy-PHP7-Sqlite3.html","content":"\n\n\n> 项目地址： (https://github.com/dylanbai8/Onekey_Caddy_PHP7_Sqlite3)\n\n小内存 VPS 一键搭建 Caddy+PHP7+Sqlite3 环境 (支持VPS最小内存64M)，一键翻墙 caddy+web(php+sqlite3)+v2ray+bbr。\n\n\n## 一键安装 Caddy+PHP7+Sqlite3 环境\n\n- 解析好域名,执行以下命令\n- 提示：支持IPv6（AAAA记录）如果本地网络不支持IPv6可以通过cloudflareCDN转换为IP4\n\n\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/dylanbai8/Onekey_Caddy_PHP7_Sqlite3/master/c.sh && chmod +x c.sh && bash c.sh\n```\n\n#### Caddy+PHP7+Sqlite3 环境\n\n``` bash\n启动：systemctl start caddy \n停止：systemctl stop caddy \n重启：systemctl restart caddy \n网站根目录：/www \nCaddyfile文件: /etc/dylanbai8/caddy/Caddyfile\n```\n\n#### 一键安装 typecho 博客\n\n``` bash\nbash c.sh -t\n```\n\n#### 一键安装 wordpress 博客\n\n``` bash\nbash c.sh -w\n```\n\n#### 一键安装 zblog 博客\n\n``` bash\nbash c.sh -z\n```\n\n#### 一键安装 kodexplorer 可道云\n\n``` bash\nbash c.sh -k\n```\n\n#### 一键安装 laverna 印象笔记\n\n``` bash\nbash c.sh -l\n```\n\n#### 一键整站备份（一键打包/www目录 含数据库）\n\n``` bash\nbash c.sh -a\n```\n\n#### 一键安装 v2ray 翻墙\n\n``` bash\nbash c.sh -v\n```\n\n#### 一键安装 rinetd bbr 端口加速\n\n``` bash\nbash c.sh -b\n```\n\n#### 一键卸载命令：\n\n``` bash\n卸载 caddy\nbash c.sh -unc\n\n卸载 php+sqlite\nbash c.sh -unp\n\n卸载 v2ray\nbash c.sh -unv\n\n卸载 rinetdbbr\nbash c.sh -unb\n```\n\n#### 文件目录权限设置\n\n``` bash\nchmod -R 755 /www/*\nchown www-data:www-data -R /www/*\n```\n","tags":["Sqlite3"],"categories":["教程"]},{"title":"在Linux_VPS上使用rclone挂载GoogleDrive云端硬盘和MicrosoftOneDrive","url":"%2FLinux-VPS-rclone-GoogleDrive-MicrosoftOneDrive.html","content":"\n[rclone](https://rclone.org/)可以在Linux上挂载包括\n\n``` bash\nRclone is a command line program to sync files and directories to and from:\n\nAlibaba Cloud (Aliyun) Object Storage System (OSS)  \nAmazon Drive   (See note)\nAmazon S3  \nBackblaze B2  \nBox  \nCeph  \nDigitalOcean Spaces  \nDreamhost  \nDropbox  \nFTP  \nGoogle Cloud Storage  \nGoogle Drive  \nHTTP  \nHubic  \nJottacloud  \nIBM COS S3  \nKoofr  \nMemset Memstore  \nMega  \nMicrosoft Azure Blob Storage  \nMicrosoft OneDrive  \nMinio  \nNextcloud  \nOVH  \nOpenDrive  \nOpenstack Swift  \nOracle Cloud Storage  \nownCloud  \npCloud  \nput.io  \nQingStor  \nRackspace Cloud Files  \nScaleway  \nSFTP  \nWasabi  \nWebDAV  \nYandex Disk  \nThe local filesystem  \n```\n\n且不会占用本地硬盘空间\n\n# 安装rclone  \n\n以Debian为例\n\n``` bash\napt-get install fuse -y\ncurl https://rclone.org/install.sh | sudo bash\n```\n\n运行以下命令开始配置rclone\n\n``` bash\nrclone config\n```\n\n配置文件路径\n\n``` bash\n/root/.config/rclone/rclone.conf\n```\n\n## rclone挂载Google Drive\n\n``` bash\nroot@MonstrousPointed-VM:~# rclone config\nCurrent remotes:\n\nName                 Type\n====                 ====\ngdname               drive\nodname               onedrive\n\ne) Edit existing remote\nn) New remote\nd) Delete remote\nr) Rename remote\nc) Copy remote\ns) Set configuration password\nq) Quit config\ne/n/d/r/c/s/q> n   #选择n新建\nname> googledrive   #名字随意例如googledrive\nType of storage to configure.\nEnter a string value. Press Enter for the default (\"\").\nChoose a number from below, or type in your own value\n 1 / A stackable unification remote, which can appear to merge the contents of s                                                                                        everal remotes\n   \\ \"union\"\n 2 / Alias for a existing remote\n   \\ \"alias\"\n 3 / Amazon Drive\n   \\ \"amazon cloud drive\"\n 4 / Amazon S3 Compliant Storage Provider (AWS, Alibaba, Ceph, Digital Ocean, Dr                                                                                        eamhost, IBM COS, Minio, etc)\n   \\ \"s3\"\n 5 / Backblaze B2\n   \\ \"b2\"\n 6 / Box\n   \\ \"box\"\n 7 / Cache a remote\n   \\ \"cache\"\n 8 / Dropbox\n   \\ \"dropbox\"\n 9 / Encrypt/Decrypt a remote\n   \\ \"crypt\"\n10 / FTP Connection\n   \\ \"ftp\"\n11 / Google Cloud Storage (this is not Google Drive)\n   \\ \"google cloud storage\"\n12 / Google Drive\n   \\ \"drive\"\n13 / Hubic\n   \\ \"hubic\"\n14 / JottaCloud\n   \\ \"jottacloud\"\n15 / Koofr\n   \\ \"koofr\"\n16 / Local Disk\n   \\ \"local\"\n17 / Mega\n   \\ \"mega\"\n18 / Microsoft Azure Blob Storage\n   \\ \"azureblob\"\n19 / Microsoft OneDrive\n   \\ \"onedrive\"\n20 / OpenDrive\n   \\ \"opendrive\"\n21 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)\n   \\ \"swift\"\n22 / Pcloud\n   \\ \"pcloud\"\n23 / QingCloud Object Storage\n   \\ \"qingstor\"\n24 / SSH/SFTP Connection\n   \\ \"sftp\"\n25 / Webdav\n   \\ \"webdav\"\n26 / Yandex Disk\n   \\ \"yandex\"\n27 / http Connection\n   \\ \"http\"\nStorage> 12  #选12选定Google Drive\n** See help for drive backend at: https://rclone.org/drive/ **\n\nGoogle Application Client Id\nSetting your own is recommended.\nSee https://rclone.org/drive/#making-your-own-client-id for how to create your o                                                                                        wn.\nIf you leave this blank, it will use an internal key which is low performance.\nEnter a string value. Press Enter for the default (\"\").\nclient_id>\nGoogle Application Client Secret\nSetting your own is recommended.\nEnter a string value. Press Enter for the default (\"\").\nclient_secret>\nScope that rclone should use when requesting access from drive.\nEnter a string value. Press Enter for the default (\"\").\nChoose a number from below, or type in your own value\n 1 / Full access all files, excluding Application Data Folder.\n   \\ \"drive\"\n 2 / Read-only access to file metadata and file contents.\n   \\ \"drive.readonly\"\n   / Access to files created by rclone only.\n 3 | These are visible in the drive website.\n   | File authorization is revoked when the user deauthorizes the app.\n   \\ \"drive.file\"\n   / Allows read and write access to the Application Data folder.\n 4 | This is not visible in the drive website.\n   \\ \"drive.appfolder\"\n   / Allows read-only access to file metadata but\n 5 | does not allow any access to read or download file content.\n   \\ \"drive.metadata.readonly\"\nscope> 1\nID of the root folder\nLeave blank normally.\nFill in to access \"Computers\" folders. (see docs).\nEnter a string value. Press Enter for the default (\"\").\nroot_folder_id>\nService Account Credentials JSON file path\nLeave blank normally.\nNeeded only if you want use SA instead of interactive login.\nEnter a string value. Press Enter for the default (\"\").\nservice_account_file>\nEdit advanced config? (y/n)\ny) Yes\nn) No\ny/n> n\nRemote config\nUse auto config?\n * Say Y if not sure\n * Say N if you are working on a remote or headless machine\ny) Yes\nn) No\ny/n> n\nIf your browser doesn't open automatically go to the following link: https://accounts.google.com/o/oauth2/auth?access_type=offline&client_id=202xxxxxx5644.apps.gc6d8875f163240ea0bf58\n#注意网址不能有空格，在浏览器中打开并按提示完成授权，获得code码\nEnter verification code> xxxxxxxxxxxxx  #这里填写你刚才获得的code码\nConfigure this as a team drive?\ny) Yes\nn) No\ny/n> y\ny) Yes this is OK\ne) Edit this remote\nd) Delete this remote\ny/e/d> y\nCurrent remotes:\n\nName                 Type\n====                 ====\ngd                   googledrive\n\ne) Edit existing remote\nn) New remote\nd) Delete remote\nr) Rename remote\nc) Copy remote\ns) Set configuration password\nq) Quit config\ne/n/d/r/c/s/q> q\n\n```\n\n## rclone挂载Microsoft OneDrive\n\n### 客户端授权\n\n在本地Windows电脑上下载[rclone](https://rclone.org/downloads) [点我下载rclone客户端](https://downloads.rclone.org/v1.47.0/rclone-v1.47.0-windows-386.zip)\n然后解压出来，进入文件夹，按住`shift`键后右击`在此处打开命令窗口`键入\n\n``` bash\nrclone authorize \"onedrive\"\n```\n\n这时会自动打开浏览器按提示登陆授权，当网页显示\n\n``` bash\nSuccess!\nAll done. Please go back to rclone.\n```\n\n回到CMD界面\n\n``` bash\nC:\\Users\\Users>cd /d d:\\rclone\nd:\\rclone>rclone authorize \"onedrive\"\n2018/12/24 19:14:35 NOTICE: Config file \"C:\\\\Users\\\\Users\\\\.config\\\\rclone\\\\rclone.conf\" not found - using defaults\nIf your browser doesn't open automatically go to the following link: http://127.0.0.1:53682/auth\nLog in and authorize rclone for access\nWaiting for code...\nGot code\nPaste the following into your remote machine --->\n{\"access_token\":\"EwBwA8l6BxxxxxxxxxxxxacbtK!VgGItbS7sxc\",\"expiry\":\"2018-12-24T20:15:31.0560991+08:00\"}\n<---End paste\nd:\\rclone>\n```\n\n其中中括号在内就是VPS挂载所需要的result值，包括**{}**中括号在内\n\n``` bash\n{\"access_token\":\"EwBwA8l6BxxxxxxxxxxxxacbtK!VgGItbS7sxc\",\"expiry\":\"2018-12-24T20:15:31.0560991+08:00\"}\n```\n\n### linux上挂载Microsoft OneDrive\n\n``` bash\nrclone config\n```\n\n开始配置\n\n``` bash\nroot@MonstrousPointed-VM:~# rclone config\nCurrent remotes:\ne) Edit existing remote\nn) New remote\nd) Delete remote\nr) Rename remote\nc) Copy remote\ns) Set configuration password\nq) Quit config\ne/n/d/r/c/s/q> n\nname> onedrive    #名字自定义\nType of storage to configure.\nEnter a string value. Press Enter for the default (\"\").\nChoose a number from below, or type in your own value\n 1 / A stackable unification remote, which can appear to merge the contents of several remotes\n   \\ \"union\"\n 2 / Alias for a existing remote\n   \\ \"alias\"\n 3 / Amazon Drive\n   \\ \"amazon cloud drive\"\n 4 / Amazon S3 Compliant Storage Providers (AWS, Ceph, Dreamhost, IBM COS, Minio)\n   \\ \"s3\"\n 5 / Backblaze B2\n   \\ \"b2\"\n 6 / Box\n   \\ \"box\"\n 7 / Cache a remote\n   \\ \"cache\"\n 8 / Dropbox\n   \\ \"dropbox\"\n 9 / Encrypt/Decrypt a remote\n   \\ \"crypt\"\n10 / FTP Connection\n   \\ \"ftp\"\n11 / Google Cloud Storage (this is not Google Drive)\n   \\ \"google cloud storage\"\n12 / Google Drive\n   \\ \"drive\"\n13 / Hubic\n   \\ \"hubic\"\n14 / JottaCloud\n   \\ \"jottacloud\"\n15 / Local Disk\n   \\ \"local\"\n16 / Mega\n   \\ \"mega\"\n17 / Microsoft Azure Blob Storage\n   \\ \"azureblob\"\n18 / Microsoft OneDrive\n   \\ \"onedrive\"\n19 / OpenDrive\n   \\ \"opendrive\"\n20 / Openstack Swift (Rackspace Cloud Files, Memset Memstore, OVH)\n   \\ \"swift\"\n21 / Pcloud\n   \\ \"pcloud\"\n22 / QingCloud Object Storage\n   \\ \"qingstor\"\n23 / SSH/SFTP Connection\n   \\ \"sftp\"\n24 / Webdav\n   \\ \"webdav\"\n25 / Yandex Disk\n   \\ \"yandex\"\n26 / http Connection\n   \\ \"http\"\nStorage> 18  #Microsoft OneDrive\n** See help for onedrive backend at: https://rclone.org/onedrive/ **\n\nMicrosoft App Client Id\nLeave blank normally.\nEnter a string value. Press Enter for the default (\"\").\nclient_id>\nMicrosoft App Client Secret\nLeave blank normally.\nEnter a string value. Press Enter for the default (\"\").\nclient_secret>\nEdit advanced config? (y/n)\ny) Yes\nn) No\ny/n> n\nRemote config\nUse auto config?\n * Say Y if not sure\n * Say N if you are working on a remote or headless machine\ny) Yes\nn) No\ny/n> n\nFor this to work, you will need rclone available on a machine that has a web browser available.\nExecute the following on your machine:\n        rclone authorize \"onedrive\"\nThen paste the result below:\nresult> {\"access_token\":\"EwBwA8l6BAAURxxxxxxxxxxxxxxxxxxxxxxxxxxxCMszTZEI27EacbtK!VgGItbS7sxc\",\"expiry\":\"2018-12-24T20:15:31.0560991+08:00\"}\n2018/12/24 06:39:03 ERROR : Failed to save new token in config file: section 'od100' not found\nChoose a number from below, or type in an existing value\n 1 / OneDrive Personal or Business\n   \\ \"onedrive\"\n 2 / Root Sharepoint site\n   \\ \"sharepoint\"\n 3 / Type in driveID\n   \\ \"driveid\"\n 4 / Type in SiteID\n   \\ \"siteid\"\n 5 / Search a Sharepoint site\n   \\ \"search\"\nYour choice> 1\nFound 1 drives, please select the one you want to use:\n0:  (personal) id=xxxxxxxxxxxxxx\nChose drive to use:> 0  #0: 这里输入0\nFound drive 'root' of type 'personal', URL: https://onedrive.live.com/?cid=e164800991cb8f79\nIs that okay?\ny) Yes\nn) No\ny/n> y\n--------------------\n[onedrive]\ntype = onedrive\ntoken = {\"access_token\":\"EwBwA8l6BAAURxxxxxxxxxxxxxxxxxxxxxxxxxxxCMszTZEI27EacbtK!VgGItbS7sxc\",\"expiry\":\"2018-12-24T20:15:31.0560991+08:00\"}\ndrive_id = xxxxxxxxxxxxxx\ndrive_type = personal  #personal个人版,Business挂载方法类似。\n--------------------\ny) Yes this is OK\ne) Edit this remote\nd) Delete this remote\ny/e/d> y\nCurrent remotes:\n\nName                 Type\n====                 ====\nonedrive                onedrive\n#这里能看到上面自定义名称说明成功了\ne) Edit existing remote\nn) New remote\nd) Delete remote\nr) Rename remote\nc) Copy remote\ns) Set configuration password\nq) Quit config\ne/n/d/r/c/s/q> q\n# 退出\n```\n\n# 配置rclone开机自动挂载为本地磁盘\n\n``` bash\necho \"#!/bin/bash\n\nPATH=/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/bin:/usr/local/sbin:~/bin\nexport PATH\nNAME_BIN=\"rclone\"\n### BEGIN INIT INFO\n# Provides:          rclone\n# Required-Start:    $all\n# Required-Stop:     $all\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: Start rclone at boot time\n# Description:       Enable rclone by daemon.\n### END INIT INFO\n\nNAME=\"rclone_name\" #rclone name名\nREMOTE='/rclone' #远程文件夹，Google Drive网盘里的挂载的一个文件夹\nLOCAL='/mnt/gdrive' #VPS本地挂载目录\n\nGreen_font_prefix=\"\\033[32m\" && Red_font_prefix=\"\\033[31m\" && Green_background_prefix=\"\\033[42;37m\" && Red_background_prefix=\"\\033[41;37m\" && Font_color_suffix=\"\\033[0m\"\nInfo=\"${Green_font_prefix}[信息]${Font_color_suffix}\"\nError=\"${Red_font_prefix}[错误]${Font_color_suffix}\"\nRETVAL=0\n\ncheck_running(){\n\tPID=\"$(ps -C $NAME_BIN -o pid= |head -n1 |grep -o '[0-9]\\{1,\\}')\"\n\tif [[ ! -z ${PID} ]]; then\n\t\treturn 0\n\telse\n\t\treturn 1\n\tfi\n}\ndo_start(){\n\tcheck_running\n\tif [[ $? -eq 0 ]]; then\n\t\techo -e \"${Info} $NAME_BIN (PID ${PID}) 正在运行...\" && exit 0\n\telse\n\t\tfusermount -zuq $LOCAL >/dev/null 2>&1\n\t\tmkdir -p $LOCAL\n\t\tsudo /usr/bin/rclone mount $NAME:$REMOTE $LOCAL --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000 >/dev/null 2>&1 &\n\t\tsleep 2s\n\t\tcheck_running\n\t\tif [[ $? -eq 0 ]]; then\n\t\t\techo -e \"${Info} $NAME_BIN 启动成功 !\"\n\t\telse\n\t\t\techo -e \"${Error} $NAME_BIN 启动失败 !\"\n\t\tfi\n\tfi\n}\ndo_stop(){\n\tcheck_running\n\tif [[ $? -eq 0 ]]; then\n\t\tkill -9 ${PID}\n\t\tRETVAL=$?\n\t\tif [[ $RETVAL -eq 0 ]]; then\n\t\t\techo -e \"${Info} $NAME_BIN 停止成功 !\"\n\t\telse\n\t\t\techo -e \"${Error} $NAME_BIN 停止失败 !\"\n\t\tfi\n\telse\n\t\techo -e \"${Info} $NAME_BIN 未运行\"\n\t\tRETVAL=1\n\tfi\n\tfusermount -zuq $LOCAL >/dev/null 2>&1\n}\ndo_status(){\n\tcheck_running\n\tif [[ $? -eq 0 ]]; then\n\t\techo -e \"${Info} $NAME_BIN (PID $(echo ${PID})) 正在运行...\"\n\telse\n\t\techo -e \"${Info} $NAME_BIN 未运行 !\"\n\t\tRETVAL=1\n\tfi\n}\ndo_restart(){\n\tdo_stop\n\tdo_start\n}\ncase \"$1\" in\n\tstart|stop|restart|status)\n\tdo_$1\n\t;;\n\t*)\n\techo \"使用方法: $0 { start | stop | restart | status }\"\n\tRETVAL=1\n\t;;\nesac\nexit $RETVAL\" >> /etc/init.d/rcloned\n```\n\n修改一下内容：\n\n``` bash\nNAME=\"rclone_name\" #rclone name名\nREMOTE='/rclone' #远程文件夹，Google Drive网盘里的挂载的一个文件夹\nLOCAL='/mnt/gdrive' #VPS本地挂载目录\n```\n\n然后\n\n``` bash\nchmod +x /etc/init.d/rcloned\nupdate-rc.d -f rcloned defaults\nbash /etc/init.d/rcloned start\n```\n\n重启一下查看是否成功\n\n``` bash\ndf -h\n```\n\n![](/images/df-honedrivegdrive.png)\n\n\n如果上面脚本的挂载失败,可以手动挂载，以onedrive为例:\n\n先新建一个目录,用于挂载\n\n``` bash\nmkdir -p /mnt/onedrive\n```\n\n挂载命令\n\n``` bash\nrclone mount onedrive: /mnt/onedrive --allow-other --allow-non-empty \n--vfs-cache-mode writes\n```\n\n\n# 相关命令\n\n``` bash\n### 文件上传\nrclone copy /home/backup gdrive:backup # 本地路径 配置名字:谷歌文件夹名字\n### 文件下载\nrclone copy gdrive:backup /home/backup\n### 列表\nrclone ls gdrive:backup\nrclone lsl gdrive:backup # 比上面多一个显示上传时间\nrclone lsd gdrive:backup # 只显示文件夹\n### 新建文件夹\nrclone mkdir gdrive:backup\n### 挂载\nrclone mount gdrive:mm /root/mm &\n### 卸载\nfusermount -u  /root/mm\n```\n\n#### 其他 ####\n\n``` bash\nrclone config - 以控制会话的形式添加rclone的配置，配置保存在.rclone.conf文件中。\nrclone copy - 将文件从源复制到目的地址，跳过已复制完成的。\nrclone sync - 将源数据同步到目的地址，只更新目的地址的数据。   –dry-run标志来检查要复制、删除的数据\nrclone move - 将源数据移动到目的地址。\nrclone delete - 删除指定路径下的文件内容。\nrclone purge - 清空指定路径下所有文件数据。\nrclone mkdir - 创建一个新目录。\nrclone rmdir - 删除空目录。\nrclone check - 检查源和目的地址数据是否匹配。\nrclone ls - 列出指定路径下所有的文件以及文件大小和路径。\nrclone lsd - 列出指定路径下所有的目录/容器/桶。\nrclone lsl - 列出指定路径下所有文件以及修改时间、文件大小和路径。\nrclone md5sum - 为指定路径下的所有文件产生一个md5sum文件。\nrclone sha1sum - 为指定路径下的所有文件产生一个sha1sum文件。\nrclone size - 获取指定路径下，文件内容的总大小。.\nrclone version - 查看当前版本。\nrclone cleanup - 清空remote。\nrclone dedupe - 交互式查找重复文件，进行删除/重命名操作。\n```\n\n\n\n挂载服务器\n\n``` bash\napt-get install -y nload htop fuse p7zip-full\n```\n \n# 挂载为磁盘\n\n``` bash\nrclone mount DriveName:Folder LocalFolder --copy-links --no-gzip-encoding --no-check-certificate --allow-other --allow-non-empty --umask 000\n```\n \n# 卸载磁盘\n\n``` bash\nfusermount -qzu LocalFolder\n```\n\n\n","tags":["rclone"]},{"title":"秋水逸冰一键shadowsocksR","url":"%2FshadowsocksR.html","content":"\n> https://shadowsocks.be/9.html\n\n# 安装\n\n``` bash\nwget --no-check-certificate https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocksR.sh\nchmod +x shadowsocksR.sh\n./shadowsocksR.sh 2>&1 | tee shadowsocksR.log\n```\n\n如果链接失效可以使用下面的\n\n``` bash\nwget --no-check-certificate https://567899.xyz/bash/shadowsocksR.sh\nchmod +x shadowsocksR.sh\n./shadowsocksR.sh 2>&1 | tee shadowsocksR.log\n```\n\n使用命令：\n\n``` bash\n启动：/etc/init.d/shadowsocks start\n停止：/etc/init.d/shadowsocks stop\n重启：/etc/init.d/shadowsocks restart\n状态：/etc/init.d/shadowsocks status\n配置文件路径：/etc/shadowsocks.json\n日志文件路径：/var/log/shadowsocks.log\n代码安装目录：/usr/local/shadowsocks\n卸载方法：./shadowsocksR.sh uninstall\n```\n\n安装完成后即已后台启动 ShadowsocksR ，运行：\n\n``` bash\n/etc/init.d/shadowsocks status\n```\n\n\n**多端口配置示范**\n\n``` bash\n{\n    \"server\":\"0.0.0.0\",\n    \"server_ipv6\":\"[::]\",\n    \"local_address\":\"127.0.0.1\",\n    \"local_port\":1080,\n    \"port_password\":{\n    \"80\":\"password1\",\n    \"8770\":\"password2\",\n    \"8451\":\"password3\"\n},\n    \"timeout\":120,\n    \"method\":\"chacha20\",\n    \"protocol\":\"auth_sha1_v4_compatible\",\n    \"protocol_param\":\"\",\n    \"obfs\":\"http_simple_compatible\",\n    \"obfs_param\":\"\",\n    \"redirect\":\"*:80#127.0.0.1:81\",\n    \"dns_ipv6\":false,\n    \"fast_open\":false,\n    \"workers\":1\n}\n```\n\n\n``` bash\n\"redirect\":\"*:80#127.0.0.1:81\"\n```\n\n上面的代码是设定shadowsocksR本地端口转发\n\n","tags":["shadowsocksR"]},{"title":"利用Caddy,Nginx反向代理谷歌YouTube等网站","url":"%2Fnginx-caddy-proxy-google-youtube-wikipedia.html","content":"\n\n[Caddy](https://caddyserver.com) - The HTTP/2 Web Server with Automatic HTTPS\n\n- go语言一个二进制单文件就是服务端\n- 自动申请[Let's Encrypt](https://letsencrypt.org)免费的SSL/TLS证书,自动续期。\n\n### Caddy一键安装脚本\n``` bash\nwget -N --no-check-certificate https://raw.githubusercontent.com/ojbk8/ToyoDAdoubiBackup/master/caddy_install.sh && chmod +x caddy_install.sh && bash caddy_install.sh\n```\n\n- caddy_conf_file=\"/usr/local/caddy/Caddyfile\" \n- 日志文件：cat /tmp/caddy.log \n- 使用说明：service caddy start | stop | restart | status \n- 或者使用：/etc/init.d/caddy start | stop | restart | status \n\n<!--more-->\n\n### 反代[Google](https://www.google.com)\n\n``` bash\necho \"google.yourdomains.com {\n gzip\n tls xxxx@xxx.xx\n proxy / https://www.google.com\n}\" >> /usr/local/caddy/Caddyfile\n```\n\n同样我们可以使用此这个方法、等其它被精准扶贫的网站\n\n### 反代[YouTube](https://www.youtube.com)\n\n``` bash\necho \"youtube.yourdomains.com {\n gzip\n tls xxxx@xxx.xx\n proxy / https://www.youtube.com\n}\" >> /usr/local/caddy/Caddyfile\n```\n\n重启Caddy生效\n\n``` bash\n/etc/init.d/caddy restart\n```\n\n### 反代[维基百科](https://zh.wikipedia.org/wiki/Wiki)\n\n``` bash\necho \"wiki.yourdomains.com {\n gzip\n tls xxxx@xxx.xx\n proxy / https://zh.wikipedia.org/wiki/Wiki\n}\" >> /usr/local/caddy/Caddyfile\n```\n\n### Nginx反代设置\n\n``` bash\n        location / {\n                proxy_pass              https://www.google.com/;\n                proxy_redirect          off;\n                proxy_set_header        X-Real-IP       $remote_addr;\n                proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;\n                sub_filter_once off;\n                }\n```\n","tags":["Caddy"],"categories":["教程"]},{"title":"gitbook安装和插件的使用","url":"%2Fgitbook-install-plugin.html","content":"\n\n> gitbook安装使用插件教程\n\n### 安装gitbook\n先下载安装[Node.js](https://nodejs.org/zh-cn/),然后\n\n``` bash\nnpm install -g gitbook-cli\ngitbook init\ngitbook install ./\ngitbook build\ngitbook serve\n```\n\n提示如下\n\n``` bash\nD:\\gitbook>gitbook serve\nLive reload server started on port: 35729\nPress CTRL+C to quit ...\n\ninfo: 7 plugins are installed\ninfo: loading plugin \"livereload\"... OK\ninfo: loading plugin \"highlight\"... OK\ninfo: loading plugin \"search\"... OK\ninfo: loading plugin \"lunr\"... OK\ninfo: loading plugin \"sharing\"... OK\ninfo: loading plugin \"fontsettings\"... OK\ninfo: loading plugin \"theme-default\"... OK\ninfo: found 5 pages\ninfo: found 4 asset files\ninfo: >> generation finished with success in 1.0s !\n\nStarting server ...\nServing book on http://localhost:4000\n```\n\n你可以你的浏览器中打开这个网址： (http://localhost:4000)  预览\n\n\n### 创建配置`book.json`\n\n``` bash\n{\n    \"title\": \"站点标题\",\n    \"author\": \"作者\",\n    \"description\": \"网站描述\",\n\t\"keywords\": \"关键字1,关键字2,keyword3\",\n    \"language\": \"zh-hans\",\n    \"gitbook\": \"3.2.3\",\n    \"styles\": {\n        \"website\": \"./styles/website.css\"\n    },\n    \"structure\": {\n        \"readme\": \"README.md\"\n    },\n\t\"links\": {\n        \"sharing\": {\n            \"all\"      : true,\n            \"google\"   : true,\n            \"facebook\" : true,\n            \"twitter\"  : true,\n            \"weibo\"    : true,\n            \"qq\"       : true,\n            \"qrcode\"   : true\n        }\n    },\n    \"links\": {\n        \"sidebar\": {\n            \"链接网站\": \"https://github.com\"\n        }\n    },\n    \"plugins\": [\n\t\t\"-livereload\",\n\t\t\"-highlight\",\n\t\t\"search\",\n\t\t\"-lunr\",\n\t\t\"sharing\",\n\t\t\"fontsettings\",\n\t\t\"theme-default\",\n\t\t\"copy-code-button\",\n\t\t\"anchor-navigation-ex\",\n\t\t\"donate\"\n    ],\n    \"pluginsConfig\": {\n        \"anchor-navigation-ex\": {\n            \"isRewritePageTitle\": true,\n            \"isShowTocTitleIcon\": true,\n            \"tocLevel1Icon\": \"fa fa-hand-o-right\",\n            \"tocLevel2Icon\": \"fa fa-hand-o-right\",\n            \"tocLevel3Icon\": \"fa fa-hand-o-right\"\n        },\n\t\t\"donate\": {\n          \"wechat\": \"/images/wechatpay.jpg\",\n          \"alipay\": \"/images/alipay.jpg\",\n          \"title\": \"\",\n          \"button\": \"Donate\",\n          \"alipayText\": \"支付宝捐赠\",\n          \"wechatText\": \"微信捐赠\"\n        }\n\n    }\n\t\n}\n```\n\n### 配置`SUMMARY.md`示范演示\n\n``` bash\n# Summary\n\n* [Introduction](README.md)\n* [基本安装](howtouse/README.md)\n   * [Node.js安装](howtouse/nodejsinstall.md)\n   * [Gitbook安装](howtouse/gitbookinstall.md)\n   * [Gitbook命令行速览](howtouse/gitbookcli.md)\n```\n\n使用Markdown语法创建编辑`xxx.md`\n\n然后安装所需要的插件\n\n``` bash\ngitbook install\n```\n\n运行\n\n``` bash\ngitbook build\ngitbook serve\n```\n\n\n","tags":["gitbook"],"categories":["教程"]},{"title":"搭建配置frps内网穿透服务端开机自启","url":"%2Ffrps-service-install.html","content":"\n \n在debian ubuntu x64上测试通过 [其它系统frp下载](https://github.com/fatedier/frp/releases)\n\n假设你的IPV4地址为11.22.33.44 假设是以ROOT用户登陆并在root用户默认目录下\n\n\n### 下载安装frp\n\n``` bash\nwget -N -O frp.tar.gz https://github.com/fatedier/frp/releases/download/v0.23.1/frp_0.23.1_linux_amd64.tar.gz\ntar -zxvf frp.tar.gz\nmv frp_0.23.1_linux_amd64 frp\n```\n### 配置frps服务端\n修改文件frp/frps.ini服务端配置文件,按需要添加删减,示范如下\n\n<!--more-->\n\n\n``` bash\necho \"privilege_token = 12345\nvhost_http_port = 800\n\n[ssh]\nlisten_port = 6000\n\n[ftp]\nlisten_port = 221\n\n[aria2]\nlisten_port = 6844\n\n[websocket]\nlisten_port = 4567\" >> frp/frps.ini\n```\n\n### 配置frpc客户端\n``` bash\nserver_port = 7000\nprivilege_token = 12345\nvhost_http_port = 800\n\n[ssh]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 22\nremote_port = 6000\n\n[web]\ntype = http\nlocal_ip = 127.0.0.1\nlocal_port = 80\ncustom_domains = www.yourdomain.com\n\n[ftp]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 21\nremote_port = 221\n\n[aria2]\ntype = tcp\nlocal_ip = 127.0.0.1\nlocal_port = 6800\nremote_port = 6844\n```\n\n### 设置开机自动启动frp服务\n\n添加自启文件\n``` bash\necho \"[Unit]\nDescription=frps daemon\nAfter=syslog.target network.target\nWants=network.target\n\n[Service]\nType=simple\nExecStart=/root/frp/frps -c /root/frp/frps.ini\nRestart= always\nRestartSec=1min\n\n[Install]\nWantedBy=multi-user.target\" > /etc/systemd/system/frps.service\n```\n#### 启动并设为开机自启\n``` bash\nsystemctl enable frps\n```\n\n#### 启动frps\n\n``` bash\nsystemctl start frps\n```\n\n#### 状态查询\n\n``` bash\nsystemctl status frps\n```\n\n### 其它\n\n如果使用的是自定义配置文件，经测试在koolshare_LEDE_X86路由器固件中不能开机启动frpc客户端\n需要在**[common]**添加以下代码即可\n\n``` bash\nlogin_fail_exit = false\ntcp_mux = true\nlog_file = /dev/null\nlog_level = error\nlog_max_days = 1\n```\n\n\n","tags":["frps"],"categories":["教程"]},{"title":"hexo备份更换设备后同步编辑","url":"%2Fhexo-Backup-Synchronize-edit.html","content":"\n### 备份hexo原始配置文件\n压缩打包备份原始的hexo配置文件scaffolds, source, themes 和 _config.yml\n### 在新电脑上重新布署安装一次hexo\n\n``` bash\ncd /d\nnpm install hexo-cli -g\nhexo init blog\ncd blog\nnpm install\nnpm install hexo-deployer-git --save\ngit init\nnpm install hexo-generator-feed --save\nnpm install hexo-generator-sitemap --save\nnpm install hexo-generator-baidu-sitemap --save\nnpm install hexo-generator-searchdb --save\ngit clone https://github.com/iissnan/hexo-theme-next themes/next\n```\n\n然后覆盖替换掉原有的文件scaffolds, source, themes 和 _config.yml\n\n<!-- more -->\n### hexo远程同步到github\n[登陆GitHub](https://github.com/login)并创建分支为username.github.io 可以点击[Join GitHub](https://github.com/join?source=header-home)注册账号\n\n``` bash\ngit config --global user.name \"username\"\ngit config --global user.email \"youremail@gmail.com\"\nssh-keygen -t rsa -C 'youremail@gmail.com'\n```\n\nYour public key has been saved in /c/Users/admin/.ssh/id_rsa.pub.\n按提示一路回车即可以得到KEY,并收到邮件提醒。\n用文本编辑器打开/c/Users/admin/.ssh/id_rsa.pub这个文件将里面的所有文本文字\n复制到repo－Settings－Deploy keys－Add deploy key中，Title可以随便填写\n回到Git Bash\n\n``` bash\nssh -T git@github.com\n```\n\n测试是否连接成功，如果能看到\n\nHi username/username.github.io! You've successfully authenticated, but GitHub does not provide shell access.\n即表示连接成功了。\n\n``` bash\ngit remote add origin git@github.com:username/username.github.io.git\ngit commit -m \"自定义描述\"\ngit push -u origin master\n```\n\n### hexo开启github远程同步文件\n\n``` bash\ngit add .\ngit commit -m ‘在新电脑上提交新文章’ #(引号内容可改)\ngit push\n```\n\n``` bash\nhexo clean\nhexo g\nhexo d\n```\n","tags":["hexo"],"categories":["教程"]},{"title":"hexo同步布署在github-coding并实现国内外自动分流","url":"%2Fhexo-github-coding-sync-Diversion.html","content":"\n\n建议单独托管在github上，因为国内大环境背景下，你懂的啦！\n\n![](/images/coding-domain-Filing.png)\n\n### 域名解析\n\n登陆[DNSPOD控制台](https://www.dnspod.cn)  在域名添加2条记录值\n\n|记录类型|线路类型|记录值|\n|----|----|----|\n|CNAME|国外|username.github.io|\n|CNAME|国内|username.coding.me|\n\n<!--more-->\n\n### 配置文件\n在`_config.yml`站点配置文件中添加配置：\n\n``` bash\n# Deployment\n# Docs: https://hexo.io/docs/deployment.html\ndeploy:\n- type: git\n  repo: git@github.com:username/username.github.io.git\n  branch: master\n- type: git\n  repo: git@git.coding.net:username/username.coding.me.git\n  branch: master\n```\n\n然后执行`hexo deploy`完成。\n","tags":["hexo"],"categories":["教程"]},{"title":"Linux下scp使用RSA秘钥传输数据Scp命令免密码远程下载上传","url":"%2Flinux_ssh_scp_id_rsa.html","content":"\n### 生成密钥对\n\n``` bash\nssh-keygen\n```\n\n* `id_rsa`为私钥文件(保存在client)\n* `id_rsa.pub`为公钥(用于追加到server的用户目录`/.ssh/authorized_keys`文件中)\n\n### 下载数据\n\n``` bash\nscp -i ~/.ssh/id_rsa -r root@server_ip:/var/www/ /var/www/\n```\n\n### 上传数据\n\n``` bash\nscp -i ~/.ssh/id_rsa -r /var/www/ root@server_ip:/var/www/\n```\n\n### ssh登录\n\n``` bash\nssh user@host\n```\n\n### 其它\n\n\n\nssh使用RSA密钥对登录也是同理，service名称为sshd,配置文件为`/etc/ssh/sshd_config`\n\n\n``` bash\nchmod -R 700 ~/.ssh/ \nchmod 600 ~/.ssh/authorized_keys\n``` \n\n\n\n\n\n### 指定端口\n\n`-P`: 大写的P, 指定端口号 \n\n``` bash \nscp -P 788 -i ~/.ssh/id_rsa -r /var/www/ root@server_ip:/var/www/\n```\n","categories":["教程"]},{"title":"Crontab定时执行计划任务","url":"%2Fcrontab.html","content":"\n\n## crond简介\n\ncrond是linux定时执行计划任务\n\nLinux下的任务调度分为两类，系统任务调度和用户任务调度。\n\n### 系统任务\n\n配置文件`/etc/crontab`\n\n``` bash\nnano /etc/crontab\n```\n\n### 用户任务\n\n``` bash\ncrontab -e\n```\n\n## crontab文件的含义\n\n用户所建立的crontab文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，格式如下：\n\nminute   hour   day   month   week   command\n\n![](/images/crontab.png)\n\n其中：\n\n- minute： 表示分钟，可以是从0到59之间的任何整数。\n- hour：表示小时，可以是从0到23之间的任何整数。\n- day：表示日期，可以是从1到31之间的任何整数。\n- month：表示月份，可以是从1到12之间的任何整数。\n- week：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。\n- command：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。\n\n在以上各个字段中，还可以使用以下特殊字符：\n\n- 星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。\n- 逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”\n- 中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”\n- 正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。\n\n\n## 管理crontab进程\n\n重启\n\n``` bash\n/etc/init.d/cron restart\n```\n\n或者\n\n``` bash\nsystemctl restart cron\n```\n\n或者\n\n``` bash\nsystemctl restart cron.service\n```\n\n状态查询\n\n``` bash\nservice cron status\n```\n\n或者\n\n``` bash\nsystemctl status cron\n```\n\n\n列出crontab文件\n\n``` bash\ncrontab -l\n```\n\n删除crontab文件\n\n``` bash\ncrontab -r\n```\n\n","tags":["crontab"],"categories":["教程"]},{"title":"Debian/Ubuntu系统手动更新内核并启用TCP BBR拥塞控制算法","url":"%2FDebian-Ubuntu-kernel-update-bbr.html","content":"\n查看内核版本\n\n``` bash\nuname -r\n```\n\nBBR要求内核为kernel4.9以上版本。\n\n如果大于或等于4.9的可以直接开启BBR,开启步骤如下\n\n配置文件\n\n``` bash\necho \"net.core.default_qdisc=fq\" >> /etc/sysctl.conf\necho \"net.ipv4.tcp_congestion_control=bbr\" >> /etc/sysctl.conf\n```\n\n加载配置到内核参数中\n\n``` bash\nsysctl -p\nsysctl net.ipv4.tcp_available_congestion_control\n```\n\n顺利的话下面的命令就能看到bbr模块了\n\n``` bash\nlsmod | grep bbr\n```\n\n``` bash\nsysctl net.ipv4.tcp_available_congestion_control\n```\n\n返回值一般为：\n\n``` bash\nnet.ipv4.tcp_available_congestion_control = bbr cubic reno\n```\n\n``` bash\nsysctl net.ipv4.tcp_congestion_control\n```\n\n返回值一般为：\n\n``` bash\nnet.ipv4.tcp_congestion_control = bbr\n```\n\n``` bash\nsysctl net.core.default_qdisc\n```\n\n返回值一般为：\n\n``` bash\nnet.core.default_qdisc = fq\n```\n\n如果内核版本低于4.9的需要手动升级到4.9或以上才能开启\n\n去这里[下载最新版的内核 deb 安装包](https://kernel.ubuntu.com/~kernel-ppa/mainline/)\n\n1. 如果系统是 64 位，则下载 amd64 的 linux-image 中含有 generic 这个 deb 包；\n2. 如果系统是 32 位，则下载 i386 的 linux-image 中含有 generic 这个 deb 包；\n\n安装的命令如下（以最新版的 64 位 4.12.4 举例而已，请替换为下载好的 deb 包）：\n\n``` bash\nwget https://kernel.ubuntu.com/~kernel-ppa/mainline/v4.12.4/linux-image-4.12.4-041204-generic_4.12.4-041204.201707271932_amd64.deb\ndpkg -i linux-image-4.12.4-041204-generic_4.12.4-041204.201707271932_amd64.deb\n```\n\n安装完成后，再执行命令：\n\n``` bash\n/usr/sbin/update-grub\n```\n\n最后，重启 VPS 即可。\n\n``` bash\nreboot\n```\n","tags":["bbr"]},{"title":"Oneindex程序安装失败解决办法","url":"%2Foneindex-installation-failed.html","content":"\n项目地址： https://github.com/donwa/oneindex\n\n功能：\n\n* 不占用服务器空间，不走服务器流量；\n* 直接列出 OneDrive 目录，文件直链下载。\n\n源码安装运行需求：\n\n1. PHP空间，PHP 5.6+ 需打开curl支持\n2. OneDrive 账号 (个人、企业版或教育版/工作或学校帐户)\n3. OneIndex 程序\n\n# Oneindex程序安装失败解决办法\n\n打开这个网址https://apps.dev.microsoft.com/#/appList\n\n里面会列出oneindex的应用，点击进去后，会看到你的应用ID（client_ID）。\n\n找到【应用程序机密】，点击【生成新密码】，就会生成一个新的client_secret，然后重新安装时候填这个新的client_secret就可以了\n","tags":["oneindex"],"categories":["教程"]},{"title":"test","url":"%2Ftest.html","content":"\n\n这是{% label default@Default%}\n\n这是{% label primary@Primary%} 8899 \n\n这是{% label success@Success%} test \n\n这是{% label info@Info%} \n\n这是{% label warning@Warning%} \n\n这是{% label danger@Danger%} \n\n<div>{% button /,首页,home fa-fw,首页%}</div>\n\n这是有删除线的~~{% label danger@Danger%}~~\n\n\n{% note %}默认 用来替代引用标签还行{%endnote%} {% note default %} \n默认 有图标的引用标签吧{%endnote%} {% note info \n%}可以补充一些信息{%endnote%} {% note \nprimary%}Primary，不知道怎么用{%endnote%} {% note \nwarning%}Warning，写一些警告信息{%endnote%} {% note danger \n%}Danger,就是这样很危险吧{% endnote%} {% note \nsuccess%}Success，成功是什么鬼啊{%endnote%}\n{% note success no-icon%}没有图标的样子{%endnote%}\n\n\n\n{% note default %} default 提示块标签 {% endnote %} {% note primary \n%} primary 提示块标签 {% endnote %} {% note success %} success \n提示块标签 {% endnote %} {% note info %} info 提示块标签 {% endnote \n%} {% note warning %} warning 提示块标签 {% endnote %} {% note danger \n%} danger 提示块标签\n{% endnote %}\n\n\n\n{% cq %}世间所有的相遇，都是久别重逢{% endcq %}\n\n\n\n{% tabs tab,1 %} 名字为tab，默认在第1个选项卡，如果是-1则隐藏 <!-- \ntab --> **选项卡 1** <!-- endtab --> <!-- tab --> **选项卡 2** <!-- \nendtab --> <!-- tab A --> **选项卡 3** 名字为A <!-- endtab -->\n{% endtabs %}\n","categories":["未分类"]},{"title":"Linux下tar,unzip,7z,rar压缩带密码解压文件文件夹的使用","url":"%2Flinux-tar-unzip-p7zip-unrar-password.html","content":"\n\n### tar压缩\n\n压缩多个文件或者文件夹的命令\n\n``` bash\ntar -czvf a.tar.gz(想压缩文件名) 源文件名1 源文件名2 源文件夹1 源文件夹2\n```\n\n参数：\n\n- `c`创建一个压缩文件，如果只使用这个参数，不使用 z 参数，那么只会打包，不会压缩\n- `x`解开一个压缩文件\n- `z`是否使用 gzip 压缩或解压\n- `j`是否使用 bzip2 压缩或解压\n- `v`显示详细信息\n- `f`指定压缩后的文件名，后面要直接跟文件名，所以将 f 参数放到最后\n\n举几个例子：\n\n将a文件夹打包成a.tar但是不压缩\n\n``` bash\ntar cvf a.tar arg\n```\n\n将a文件夹打包成a.tar.gz并使用 gzip 压缩\n\n``` bash\ntar czvf a.tar.gz arg\n```\n\n将a文件夹打包成a.tar.gz并使用bzip2压缩\n\n``` bash\ntar cjvf a.tar.bz2 arg\n```\n\n### tar解压\n\nLinux下常见的压缩包格式有5种:zip tar.gz tar.bz2 tar.xz tar.Z\n\n其中tar是种打包格式,gz和bz2等后缀才是指代压缩方式:gzip和bzip2\n\nfilename.zip的解压:\n\n``` bash\nunzip filename.zip\n```\n\nfilename.tar.gz的解压:\n\n``` bash\ntar -zxvf filename.tar.gz\n```\n\n其中zxvf含义分别如下\n\n- `z`gzip压缩格式\n- `x`extract解压\n- `v`verbose详细信息\n- `f`file(file=archieve)文件\n\nfilename.tar.bz2的解压:\n\n``` bash\ntar -jxvf filename.tar.bz2\n```\n\n`j`指bzip2压缩格式\n\n其它选项和tar.gz解压含义相同\n\n\nfilename.tar.xz的解压: \n\n``` bash\ntar -Jxvf filename.tar.xz\n```\n\n注意`J`大写\n\n \n\nfilename.tar.Z的解压: \n\n``` bash\ntar -Zxvf filename.tar.Z\n```\n\n注意`Z`大写\n\n \n\n关于tar的详细命令可以\n\n``` bash\ntar --help\n```\n\n事实上, 从1.15版本开始tar就可以自动识别压缩的格式,故不需人为区分压缩格式就能正确解压\n\n``` bash\ntar -xvf filename.tar.gz\ntar -xvf filename.tar.bz2\ntar -xvf filename.tar.xz\ntar -xvf filename.tar.Z\n```\n\n### 压缩zip解压unzip缩命令\n\n安装\n\n``` bash\napt-get install unzip\n```\n\nzip命令\n\n``` bash\nzip -r myfile.zip ./*\n```\n\n将当前目录下的所有文件和文件夹全部压缩成myfile.zip文件,－r表示递归压缩子目录下所有文件.\n\nunzip命令\n\n``` bash\nunzip -o -d /home/sunny myfile.zip\n```\n\n把myfile.zip文件解压到 /home/sunny/\n\n- `o`不提示的情况下覆盖文件；\n- `d` -d /home/sunny 指明将文件解压缩到/home/sunny目录下；\n\n其他\n\n``` bash\nzip -d myfile.zip smart.txt\n```\n\n删除压缩文件中smart.txt文件\n\n``` bash\nzip -m myfile.zip ./rpm_info.txt\n```\n\n向压缩文件中myfile.zip中添加rpm_info.txt文件\n\n``` bash\nzip -r filename.zip file1 file2 file3 /usr/work/school \n```\n\n上面的命令把 file1、file2、 file3、以及 /usr/work/school 目录的内容（假设这个目录存在）压缩起来，然后放入 filename.zip 文件中。\n\n解压unzip缩命令\n\n``` bash\nunzip filename.zip\n```\n\n### 7Z\n\nlinux安装7z命令\n\n``` bash\napt-get install p7zip-full\n```\n\n带密码压缩\n\n``` bash\n7z -p a test.7z test.txt\n```\n\n`-p`添加密码\n\n解压：\n\n``` bash\n7z x test.7z\n```\n\n\n解压缩7z文件\n\n``` bash\n7z x phpMyAdmin-3.3.8.1-all-languages.7z -r -o./\n```\n\n最新命令为7zr\n\n参数含义：\n\n1. `x`代表解压缩文件，并且是按原始目录树解压（还有个参数 e 也是解压缩文件，但其会将所有文件都解压到根下，而不是自己原有的文件夹下）\n2. `r` 表示递归解压缩所有的子文件夹\n3. `o`是指定解压到的目录，-o后是没有空格的，直接接目录。这一点需要注意。\n\n压缩文件/文件夹\n\n``` bash\n7z a -r test.7z ./*\n```\n\n参数含义：\n\n1. `a`代表添加文件／文件夹到压缩包\n2. `t`是指定压缩类型，这里定为7z，可不指定，因为7za默认压缩类型就是7z。\n3. `r`表示递归所有的子文件夹\n4. `Mytest.7z`是压缩好后的压缩包名\n5. `/opt/phpMyAdmin-3.3.8.1-all-languages/*`是压缩目标。\n\n注意：7za不仅仅支持.7z压缩格式，还支持.tar.bz2等压缩类型的。如上所述，用-t指定即可。\n\n\n\n### unrar\n\n[RAR下载地址](http://www.rarsoft.com/download.htm) 64系统\n\n安装unrar,rar\n\n``` bash\nwget https://www.rarlab.com/rar/rarlinux-x64-5.8.b2.tar.gz\ntar xvf rarlinux-x64-5.8.b2.tar.gz\ncd rar\ncp rar /usr/local/rar\ncp unrar /usr/local/unrar\nln -s /usr/local/rar /usr/local/bin/rar\nln -s /usr/local/unrar /usr/local/bin/unrar\n```\n\n安装完毕后就有了RAR和UNRAR这两个程序\n\n解压有密码的rar压缩包\n\n``` bash\nunrar e -p filename.rar\n```\n\n输入密码后解压一个名为filename.rar的带密码压缩包\n\n1. unrar v test.rar    #查看压缩文件中的文件\n2. unrar x test.rar /tmp   #解压到指定文件夹\n3. unrar e test.rar   #解压到当前文件夹\n\n``` bash\nrar -p a test.rar test.txt\n```\n\n带密码压缩会提示输入两次密码。\n\n解压：\n\n``` bash\nunrar x test.rar\n```\n\n会提示输入密码。\n","categories":["教程"]},{"title":"SSH使用SSH-KEY登录并禁用密码登录","url":"%2FSSH-Xshell-password-keys.html","content":"\nSSH安全登陆三步曲\n\n1. 修改默认端口22为其它\n2. 改用SSH-keys登陆\n3. 禁止密码登陆\n\n- 路径: ~/.ssh/\n- 私钥: ~/.ssh/id_rsa\n- 公钥: ~/.ssh/id_rsa.pub\n\n\n# 使用Xshell生成密钥公钥\n\n依次点击菜单栏中的【工具】【新建用户密钥生成向导】\n【密钥类型】选择`RSA`【长度】`2048`可以自定义\n然后一路【下一步】【保存为文件】\n\n生成私钥\n工具 -> 用户秘钥管理者\n选中秘钥类型 -> 导出\n至此，生成了一对 公钥-私钥 对。\nid_rsa_2048.pub #公钥\nid_rsa_2048 #私钥\n\n# 配置Xshell使用密钥登陆\n\n创建目录\n\n``` bash\nmkdir .ssh\nchmod 700 .ssh\n```\n\n创建文件\n\n``` bash\ncd .ssh\ntouch authorized_keys\nchmod 600 authorized_keys\n```\n\n写入公钥内容\n\n``` bash\nnano /.ssh/authorized_keys\n```\n\n把`id_rsa_2048.pub`中的文本内容全部复制到`/.ssh/authorized_keys`\n\n修改SSH配置文件\n\n``` bash\nnano /etc/ssh/sshd_config\n```\n\n启用密钥验证\n\n``` bash\nRSAAuthentication yes\nPubkeyAuthentication yes\nAuthorsizedKeysFile .ssh/authorized_keys\n```\n\n`AuthorsizedKeysFile .ssh/authorized_keys`是指定公钥数据库文件\n\n\n重启SSH服务生效\n\nRHEL/CentOS系统\n\n``` bash\nservice sshd restart\n```\nubuntu系统\n\n``` bash\nservice ssh restart\n```\n\ndebian系统\n\n``` bash\n/etc/init.d/ssh restart\n```\n\n切换到使用密钥登陆，如果成功了就可以禁止密码登陆了\n\nPasswordAuthentication no\n\n# 其它\n\nPermitRootLogin yes\n\n`yes`允许用户root登陆`no`禁用\n\nPort 22\n\n默认22端口，可自定义修改\n\n``` bash\nsudo -i\n```\n\n切换到root用户权限\n\n``` bash\npasswd root\n```\n\n设置root用户的密码\n\n关于putty的登陆设置，由于putty与ssh2的key文件不同，所以要用puttygen.exe转换一下。\n\n运行puttygen.exe，选择Conversions->Import key，选择privateKey文件，\n\n注意这里要选privatekey文件，而不是前面用的publickey文件，\n最后选择\"save private key\"将密钥保存为.ppk文件，这个就是putty需要的key文件。\n\n运行putty，填写完session信息后，到connection->ssh->auth中指定好privatekey文件即可，\n当然也可以在connection->data中设置上auto-login username\n\n\n`PermitRootLogin yes`使用root登陆提示如下\n\n``` bash\nlogin as: root\nAuthenticating with public key \"imported-openssh-key\"\nPlease login as the user \"ubuntu\" rather than the user \"root\".\n```\n\n需要在authorized_keys中有一个命令，如下所示。\n\n``` bash\ncat /root/.ssh/authorized_keys \nno-port-forwarding,no-agent-forwarding,no-X11-forwarding,command=\"echo 'Please login as the user \\\"ubuntu\\\" rather than the user \\\"root\\\".';echo;sleep 10\"\n```\n\n删除此行，并保留它后面的ssh-rsa和密钥。\n\n保存文件，然后重试。\n","tags":["SSH"],"categories":["未分类"]},{"title":"Windows中将OneDrive映射为本地磁盘","url":"%2FWindows-Map-a-network-drive.html","content":"\n将 OneDrive 映射为本地网络驱动器\n登录到 [OneDrive](https://onedrive.live.com/) 在浏览器地址栏即可获取账户 ID。类似：\n\n``` bash\nhttps://onedrive.live.com/?id=root&cid=xxxxxxxxxxx\n```\n\n其中xxxxxxxxxxx为Onedrive账户ID\n\n![](/images/onedriveid.png)\n\n打开`此电脑` `计算机` `映射网络驱动器`\n\n![](/images/windows-map-a-network-drive.png)\n\n`映射网络驱动器`在`文件夹`输入\n\n``` bash\nhttps://d.docs.live.net/xxxxxxxxxxx\n```\n\n按提示输入账号密码即能完成映射网络驱动器\n\n![](/images/windows-map-a-network-drive1.png)\n\n\n\n\n","tags":["Windows"],"categories":["教程"]},{"title":"Hello World","url":"%2Fhello-world.html","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n"},{"title":"SSH远程会话管理工具screen使用教程","url":"%2Fscreen.html","content":"\n\n在刚接触Linux时最怕的就是SSH远程登录Linux VPS编译安装程序时（比如安装lnmp）网络突然断开，或者其他情况导致不得不与远程SSH服务器链接断开，远程执行的命令也被迫停止，只能重新连接，重新运行。\n\n\n一、screen命令是什么？\n\nScreen是一个可以在多个进程之间多路复用一个物理终端的全屏窗口管理器。Screen中有会话的概念，用户可以在一个screen会话中创建多个screen窗口，在每一个screen窗口中就像操作一个真实的telnet/SSH连接窗口那样。\n\n二、如何安装screen命令？\n\n除部分精简的系统或者定制的系统大部分都安装了screen命令，如果没有安装，\nCentOS系统可以执行：\n\n``` bash\nyum install screen\n```\n\nDebian/Ubuntu系统执行：\n\n``` bash\napt-get install screen\n```\n\n三、screen命令使用方法？\n\n1、常用的使用方法\n\n用来解决文章开始我们遇到的问题，比如在安装lnmp时。\n\n1.1 创建screen会话\n\n可以先执行：screen -S lnmp ，screen就会创建一个名字为lnmp的会话。 VPS侦探 https://www.vpser.net/\n\n1.2 暂时离开，保留screen会话中的任务或程序\n\n当需要临时离开时（会话中的程序不会关闭，仍在运行）可以用快捷键Ctrl+a d(即按住Ctrl，依次再按a,d)\n\n\n1.3 恢复screen会话\n\n当回来时可以再执行执行：`screen -r lnmp` 即可恢复到离开前创建的lnmp会话的工作界面。如果忘记了，或者当时没有指定会话名，可以执行：screen -ls screen会列出当前存在的会话列表，如下图：\n\n\n11791.lnmp即为刚才的screen创建的lnmp会话，目前已经暂时退出了lnmp会话，所以状态为Detached，当使用`screen -r lnmp`后状态就会变为Attached，11791是这个screen的会话的进程ID，恢复会话时也可以使用：screen -r 11791\n\n1.4 关闭screen的会话\n\n执行：`exit` 会提示：[screen is terminating]，表示已经成功退出screen会话。VPS侦探 https://www.vpser.net/\n\n2、远程演示\n首先演示者先在服务器上执行 screen -S test 创建一个screen会话，观众可以链接到远程服务器上执行screen -x test 观众屏幕上就会出现和演示者同步。\n\n3、常用快捷键\n\n\n- `Ctrl+a c` ：在当前screen会话中创建窗口\n- `Ctrl+a w` ：窗口列表\n- `Ctrl+a n ：下一个窗口\n- `Ctrl+a p` ：上一个窗口\n- `Ctrl+a 0-9` ：在第0个窗口和第9个窗口之间切换\n\n\n执行：`screen -S lnmp` 创建screen会话。\n\n* 如果网络掉线，可以重新连接SSH，再执行 `screen -r lnmp` 就会看到你的lnmp安装进程。\n* 有时候screen异常退出可能会提示状态为Attached，可以执行：`screen -D -r lnmp` 进行恢复。\n* 有时候可能会创建了多个同名的screen会话，可以执行：`screen -ls` 查看对应会话的session id，然后使用`screen -D -r sessionid` 进行恢复。\n\n\n转载自： https://www.vpser.net/manage/screen.html\n","tags":["screen"]},{"title":"FastStone Capture是一款非常小巧的屏幕截图屏幕录像软件","url":"%2FFastStone-Capture-FSCapture.html","content":"\n[FastStone Capture](https://www.faststone.org)是一款非常小巧的屏幕截图屏幕录像软件。\n\n\n官方下载地址:  https://www.faststone.org/FSCaptureDownload.htm\n\n\n企业版序列号：\n\n- name：`bluman`\n\n- serial/序列号/注册码：`VPISCJULXUFGDDXYAUYF`\n\n\n\n\nFastStone Capture 注册码 序列号：\n\nname/用户名：`TEAM JiOO`\n\nkey/注册码：`CPCWXRVCZW30HMKE8KQQUXW`\n\n\n\nUSER NAME:TEAM_BRAiGHTLiNG_2007\n\n\nCODE:XPNMF-ISDYF-LCSED-BPATU\n\n\nRPTME-IMDHD-MIEPX-VLXAW\n\n\n","tags":["FastStone Capture"]},{"title":"404 Not Found","url":"%2F%2F404.html","content":"**抱歉**\n*您访问的页面不存在或已经删除*\n\n\n<div>{% button /,首页,home fa-fw,首页%}</div>\n"},{"title":"关于","url":"%2Fabout%2Findex.html","content":"\n记录折腾中的点点滴滴，方便日后查找。\n\n**如有侵权，请留言联系我删除**\n\n\n``` bash\ngit add .\ngit commit -m \"Hexo code\"\ngit push -u origin code\nhexo cl\nhexo g\nhexo d\n```"},{"title":"分类","url":"%2Fcategories%2Findex.html"},{"title":"标签","url":"%2Ftags%2Findex.html"}]